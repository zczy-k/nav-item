const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-DXmKdpBa.js","assets/index-DyThvoqa.js","assets/CardGrid-CR1X23qM.css"])))=>i.map(i=>d[i]);
var at=Object.defineProperty,ot=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Le=(k,p,d)=>p in k?at(k,p,{enumerable:!0,configurable:!0,writable:!0,value:d}):k[p]=d,ue=(k,p)=>{for(var d in p||(p={}))nt.call(p,d)&&Le(k,d,p[d]);if($e)for(var d of $e(p))rt.call(p,d)&&Le(k,d,p[d]);return k},de=(k,p)=>ot(k,st(p));var f=(k,p,d)=>new Promise((_,g)=>{var O=I=>{try{v(d.next(I))}catch(z){g(z)}},y=I=>{try{v(d.throw(I))}catch(z){g(z)}},v=I=>I.done?_(I.value):Promise.resolve(I.value).then(O,y);v((d=d.apply(k,p)).next())});import{_ as De,r as u,c as s,F as P,a as R,o as n,b as t,d as c,t as h,n as W,e as Ee,f as it,g as ut,h as dt,i as T,w as b,v as U,j as be,k as j,u as ct,l as vt,m as G,T as H,p as ge,q as Be,s as ht,x as ce}from"./index-DyThvoqa.js";import{g as pt,a as ft,b as bt,c as Q,l as Ue,d as gt,e as mt,u as Ve,f as kt,h as yt,i as wt}from"./api-BbZSgGBc.js";const _t={class:"menu-bar"},Ct=["onMouseenter","onMouseleave"],Mt=["onClick"],xt=["onClick"],St={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(k){const p=u(null);function d(g){p.value=g}function _(g){setTimeout(()=>{p.value===g&&(p.value=null)},100)}return(g,O)=>(n(),s("nav",_t,[(n(!0),s(P,null,R(k.menus,y=>(n(),s("div",{key:y.id,class:"menu-item",onMouseenter:v=>d(y.id),onMouseleave:v=>_(y.id)},[t("button",{onClick:v=>g.$emit("select",y),class:W({active:y.id===k.activeId})},h(y.name),11,Mt),y.subMenus&&y.subMenus.length>0?(n(),s("div",{key:0,class:W(["sub-menu",{show:p.value===y.id}])},[(n(!0),s(P,null,R(y.subMenus,v=>(n(),s("button",{key:v.id,onClick:I=>g.$emit("select",v,y),class:W([{active:v.id===k.activeSubMenuId},"sub-menu-item"])},h(v.name),11,xt))),128))],2)):c("",!0)],40,Ct))),128))]))}},It=De(St,[["__scopeId","data-v-16a94230"]]),$t={class:"menu-bar-fixed"},Lt={class:"search-section"},Et={class:"search-box-wrapper"},Bt={class:"search-engine-select"},Ut=["onClick"],Vt={class:"search-container"},Dt=["placeholder"],At={key:0,class:"ad-space-fixed left-ad-fixed"},Pt=["href"],Rt=["src"],Nt={key:1,class:"ad-space-fixed right-ad-fixed"},Tt=["href"],zt=["src"],Ft={key:2,class:"move-target-panel"},qt={class:"move-target-header"},Ot={class:"move-target-list"},Jt=["onClick"],Kt={key:0,class:"target-submenu-list"},jt=["onClick"],Gt=["disabled"],Ht={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Qt={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Wt={key:"plus",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Xt={key:"close",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Yt={class:"modal-header"},Zt={class:"modal-body"},el={key:0,class:"batch-step"},tl={class:"remember-password-wrapper"},ll={key:0,class:"batch-error"},al={class:"batch-actions"},ol=["disabled"],sl={key:1,class:"batch-step"},nl={key:0,class:"batch-error"},rl={class:"batch-actions"},il=["disabled"],ul={key:2,class:"batch-step"},dl={class:"batch-preview-list"},cl=["onUpdate:modelValue","id"],vl={class:"batch-card-preview"},hl=["src","alt"],pl={class:"batch-card-info"},fl={class:"batch-edit-field"},bl=["onUpdate:modelValue"],gl={class:"batch-edit-field"},ml=["onUpdate:modelValue"],kl={class:"batch-edit-field"},yl=["onUpdate:modelValue"],wl={class:"batch-card-url"},_l={key:0,class:"batch-card-warning"},Cl={key:0,class:"batch-error"},Ml={class:"batch-actions"},xl=["disabled"],Sl={class:"footer"},Il={class:"footer-content"},$l={class:"modal-header"},Ll={class:"modal-body"},El={class:"remember-password-wrapper"},Bl={key:0,class:"batch-error"},Ul={class:"batch-actions",style:{"margin-top":"20px"}},Vl=["disabled"],Dl={class:"modal-header"},Al={class:"modal-body"},Pl={class:"friend-links-grid"},Rl=["href"],Nl={class:"friend-link-logo"},Tl=["src","alt"],zl={key:1,class:"friend-link-placeholder"},Fl={class:"friend-link-info"},ql={class:"modal-body"},Ol={class:"edit-card-form"},Jl={class:"form-group"},Kl={class:"form-group"},jl={class:"form-group"},Gl={class:"form-group"},Hl={key:0,class:"batch-error"},Ql={class:"batch-actions",style:{"margin-top":"20px"}},Wl=["disabled"],Xl={key:0,class:"toast-notification"},Yl={__name:"Home",setup(k){const p=vt(()=>ht(()=>import("./CardGrid-DXmKdpBa.js"),__vite__mapDeps([0,1,2]))),d=u([]),_=u(null),g=u(null),O=u([]),y=u([]),v=u(""),I=u([]),z=u([]),ae=u(!1),me=u([]),ve=u(!1),$=u(1),V=u(""),X=u(""),x=u(!1),m=u(""),Y=u([]),J=u(!1),L=u(!1),F=u(""),K=u(!1),D=u(!1),C=u(""),oe=u(!1),E=u([]),q=u(!1),Z=u(null),ee=u(null),ke=u(""),he=u(!1),pe=u(!1),se=u(null),w=u({title:"",url:"",logo_url:"",desc:""}),A=u(!1);function Ae(){A.value=!A.value}function ye(){A.value&&(A.value=!1)}const te=u(!1),we=Ee(()=>Y.value.filter(l=>l.selected).length),fe=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],le=u((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=fe.find(o=>o.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return fe[0]})());function Pe(l){le.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function Re(){v.value=""}const Ne=Ee(()=>{if(!v.value)return O.value;const l=v.value.toLowerCase();return y.value.filter(e=>e.title.toLowerCase().includes(l)||e.url.toLowerCase().includes(l)||e.desc&&e.desc.toLowerCase().includes(l))});it(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),ut(()=>f(null,null,function*(){const l=yield pt();d.value=l.data,d.value.length&&(_.value=d.value[0],N(),Fe());const e=yield ft();I.value=e.data.filter(i=>i.position==="left"),z.value=e.data.filter(i=>i.position==="right");const o=yield bt();me.value=o.data;const r=localStorage.getItem("nav_background");if(r){const i=document.querySelector(".home-container");i&&!i.style.backgroundImage.includes(r)&&(i.style.backgroundImage=`url(${r})`,i.style.backgroundSize="cover",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",i.style.backgroundAttachment="fixed")}Je(),document.addEventListener("click",ye)})),dt(()=>{document.removeEventListener("click",ye)});function Te(l,e=null){return f(this,null,function*(){e?(_.value=e,g.value=l):(_.value=l,g.value=null),N()})}const ze=u({});function N(){return f(this,null,function*(){var e;if(!_.value)return;const l=yield Q(_.value.id,(e=g.value)==null?void 0:e.id);O.value=l.data})}function Fe(){return f(this,null,function*(){const l=[];for(const e of d.value)try{const o=yield Q(e.id,null);if(l.push(...o.data),e.subMenus&&e.subMenus.length)for(const r of e.subMenus){const i=yield Q(e.id,r.id);l.push(...i.data)}}catch(o){console.error(`加载菜单 ${e.name} 的卡片失败:`,o)}y.value=l})}function ne(){return f(this,null,function*(){const l={};for(const e of d.value){const o=yield Q(e.id,null),r=`${e.id}_null`;if(l[r]=o.data,e.subMenus&&e.subMenus.length)for(const i of e.subMenus){const M=yield Q(e.id,i.id),a=`${e.id}_${i.id}`;l[a]=M.data}}ze.value=l})}function _e(){return f(this,null,function*(){if(v.value.trim())if(le.value.name==="site"){let l=!1;for(const e of d.value){const o=yield Q(e.id),r=o.data.find(i=>i.title.toLowerCase().includes(v.value.toLowerCase())||i.url.toLowerCase().includes(v.value.toLowerCase()));if(r){_.value=e,O.value=o.data,setTimeout(()=>{const i=document.querySelector(`[data-card-id='${r.id}']`);i&&i.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=le.value.url(v.value);window.open(l,"_blank")}})}function qe(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function Oe(){return f(this,null,function*(){ve.value=!0,m.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:r}=JSON.parse(l);if(Date.now()<o&&r){localStorage.setItem("token",r),V.value=e,J.value=!0,$.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}$.value=1})}function re(){ve.value=!1,$.value=1,V.value="",X.value="",m.value="",Y.value=[],x.value=!1}function Je(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:r}=JSON.parse(l);Date.now()<o?(V.value=e,J.value=!0,r&&localStorage.setItem("token",r)):localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}}function Ce(){return f(this,null,function*(){if(!V.value){m.value="请输入密码";return}x.value=!0,m.value="";try{const l=yield Ue("admin",V.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(J.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:V.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");$.value=2}catch(l){m.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{x.value=!1}})}function Ke(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),V.value="",J.value=!1,$.value=1}function je(){return f(this,null,function*(){var e,o;const l=X.value.split(`
`).map(r=>r.trim()).filter(r=>r.length>0);if(l.length===0){m.value="请输入至少一个网址";return}x.value=!0,m.value="";try{const r=yield gt(l);Y.value=r.data.data.map(i=>de(ue({},i),{selected:!0})),$.value=3}catch(r){m.value=((o=(e=r.response)==null?void 0:e.data)==null?void 0:o.error)||"解析失败，请重试"}finally{x.value=!1}})}function Ge(){return f(this,null,function*(){var e,o,r;const l=Y.value.filter(i=>i.selected);if(l.length===0){m.value="请至少选择一个网站";return}x.value=!0,m.value="";try{const i=l.map(M=>({title:M.title,url:M.url,logo:M.logo,description:M.description}));yield mt(_.value.id,((e=g.value)==null?void 0:e.id)||null,i),alert(`成功添加 ${l.length} 个网站！`),re(),yield N()}catch(i){m.value=((r=(o=i.response)==null?void 0:o.data)==null?void 0:r.error)||"添加失败，请重试"}finally{x.value=!1}})}function He(){return f(this,null,function*(){if(!te.value){te.value=!0;try{const e=(yield kt()).data.url;let o=document.getElementById("dynamic-bg-style");o||(o=document.createElement("style"),o.id="dynamic-bg-style",document.head.appendChild(o)),o.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{te.value=!1}}})}function Qe(){return f(this,null,function*(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:r}=JSON.parse(l);if(Date.now()<o&&r){localStorage.setItem("token",r),L.value=!0;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}if(K.value=!0,F.value="",C.value="",l)try{const{password:e,expiry:o}=JSON.parse(l);Date.now()<o&&(F.value=e,oe.value=!0)}catch(e){}})}function Me(){return f(this,null,function*(){if(!F.value){C.value="请输入密码";return}D.value=!0,C.value="";try{const l=yield Ue("admin",F.value);if(localStorage.setItem("token",l.data.token),oe.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:F.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");L.value=!0,K.value=!1,D.value=!1}catch(l){C.value="密码错误",D.value=!1}})}function xe(){L.value=!1,E.value=[],q.value=!1,Z.value=null,ee.value=null}function We(l){L.value&&l.target.classList.contains("home-container")&&xe()}function Xe(){q.value=!1,Z.value=null,ee.value=null}function Ye(l){var o,r;const e=E.value.findIndex(i=>i.id===l.id);e>-1?(E.value.splice(e,1),E.value.length===0&&(q.value=!1)):(E.value.push(l),q.value||(q.value=!0,Z.value=((o=_.value)==null?void 0:o.id)||null,ee.value=((r=g.value)==null?void 0:r.id)||null))}function Se(l,e=2e3){ke.value=l,he.value=!0,setTimeout(()=>{he.value=!1},e)}function Ie(l,e){return f(this,null,function*(){var o,r;if(E.value.length!==0)try{const i=E.value.map(a=>({id:a.id,menu_id:l,sub_menu_id:e}));for(const a of i){const S=E.value.find(B=>B.id===a.id);yield Ve(a.id,de(ue({},S),{menu_id:a.menu_id,sub_menu_id:a.sub_menu_id}))}const M=E.value.length;Se(`已移动 ${M} 个卡片！`),E.value=[],q.value=!1,yield N()}catch(i){Se(`移动失败：${((r=(o=i.response)==null?void 0:o.data)==null?void 0:r.error)||i.message}`)}})}function Ze(l,e,o){return f(this,null,function*(){var i,M;const r=l.map((a,S)=>({id:a,order:S,menu_id:e,sub_menu_id:o}));try{yield wt(r),L.value?yield ne():yield N()}catch(a){alert("保存失败："+(((M=(i=a.response)==null?void 0:i.data)==null?void 0:M.error)||a.message)),L.value?yield ne():yield N()}})}function et(l){return f(this,null,function*(){var e,o;if(confirm(`确定要删除「${l.title}」吗？`))try{yield yt(l.id),alert("删除成功"),L.value?yield ne():yield N()}catch(r){alert("删除失败："+(((o=(e=r.response)==null?void 0:e.data)==null?void 0:o.error)||r.message))}})}function tt(l){se.value=l,w.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},C.value="",pe.value=!0}function ie(){pe.value=!1,se.value=null,w.value={title:"",url:"",logo_url:"",desc:""},C.value=""}function lt(){return f(this,null,function*(){var l,e;if(!w.value.title.trim()){C.value="请输入标题";return}if(!w.value.url.trim()){C.value="请输入网址";return}D.value=!0,C.value="";try{yield Ve(se.value.id,de(ue({},se.value),{title:w.value.title,url:w.value.url,logo_url:w.value.logo_url,desc:w.value.desc})),alert("修改成功"),ie(),L.value?yield ne():yield N()}catch(o){C.value="修改失败："+(((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.error)||o.message)}finally{D.value=!1}})}return(l,e)=>{var o,r,i,M;return n(),s("div",{class:"home-container",onClick:We},[t("div",$t,[T(It,{menus:d.value,activeId:(o=_.value)==null?void 0:o.id,activeSubMenuId:(r=g.value)==null?void 0:r.id,onSelect:Te},null,8,["menus","activeId","activeSubMenuId"])]),t("div",Lt,[t("div",Et,[t("div",Bt,[(n(),s(P,null,R(fe,a=>t("button",{key:a.name,class:W(["engine-btn",{active:le.value.name===a.name}]),onClick:S=>Pe(a)},h(a.label),11,Ut)),64))]),t("div",Vt,[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),type:"text",placeholder:le.value.placeholder,class:"search-input",onKeyup:be(_e,["enter"])},null,40,Dt),[[U,v.value]]),v.value?(n(),s("button",{key:0,class:"clear-btn",onClick:Re,"aria-label":"清空",title:"clear"},e[24]||(e[24]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):c("",!0),t("button",{onClick:_e,class:"search-btn",title:"search"},e[25]||(e[25]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),I.value.length?(n(),s("div",At,[(n(!0),s(P,null,R(I.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Rt)],8,Pt))),128))])):c("",!0),z.value.length?(n(),s("div",Nt,[(n(!0),s(P,null,R(z.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,zt)],8,Tt))),128))])):c("",!0),L.value&&q.value?(n(),s("div",Ft,[t("div",qt,[t("h4",null,"移动到 ("+h(E.value.length)+")",1),t("button",{onClick:Xe,class:"cancel-move-btn"},"×")]),t("div",Ot,[(n(!0),s(P,null,R(d.value,a=>(n(),s("div",{key:a.id,class:"target-menu-group"},[t("button",{onClick:S=>Ie(a.id,null),class:W(["target-menu-btn",{active:Z.value===a.id&&ee.value===null}])},h(a.name),11,Jt),a.subMenus&&a.subMenus.length?(n(),s("div",Kt,[(n(!0),s(P,null,R(a.subMenus,S=>(n(),s("button",{key:S.id,onClick:B=>Ie(a.id,S.id),class:W(["target-submenu-btn",{active:Z.value===a.id&&ee.value===S.id}])}," ⤷ "+h(S.name),11,jt))),128))])):c("",!0)]))),128))])])):c("",!0),T(ct(p),{cards:Ne.value,editMode:L.value,selectedCards:E.value,categoryId:(i=_.value)==null?void 0:i.id,subCategoryId:(M=g.value)==null?void 0:M.id,onCardsReordered:Ze,onEditCard:tt,onDeleteCard:et,onToggleCardSelection:Ye,onClick:e[1]||(e[1]=j(()=>{},["stop"]))},null,8,["cards","editMode","selectedCards","categoryId","subCategoryId"]),t("div",{class:"fab-container",onClick:e[2]||(e[2]=j(()=>{},["stop"]))},[T(H,{name:"fab-item"},{default:G(()=>[b(t("button",{onClick:He,class:"change-bg-btn",title:"切换背景",disabled:te.value},[te.value?(n(),s("svg",Qt,e[27]||(e[27]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(n(),s("svg",Ht,e[26]||(e[26]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,Gt),[[ce,A.value]])]),_:1}),T(H,{name:"fab-item"},{default:G(()=>[_.value?b((n(),s("button",{key:0,onClick:Oe,class:"batch-add-btn",title:"批量添加网站"},e[28]||(e[28]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[ce,A.value]]):c("",!0)]),_:1}),T(H,{name:"fab-item"},{default:G(()=>[L.value?b((n(),s("button",{key:0,onClick:xe,class:"exit-edit-btn",title:"退出编辑模式"},e[29]||(e[29]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[ce,A.value]]):c("",!0)]),_:1}),T(H,{name:"fab-item"},{default:G(()=>[L.value?c("",!0):b((n(),s("button",{key:0,onClick:Qe,class:"edit-mode-btn",title:"编辑模式"},e[30]||(e[30]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[ce,A.value]])]),_:1}),t("button",{onClick:Ae,class:"fab-toggle-btn",title:"更多功能"},[T(H,{name:"fab-icon",mode:"out-in"},{default:G(()=>[A.value?(n(),s("svg",Xt,e[32]||(e[32]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(n(),s("svg",Wt,e[31]||(e[31]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),ve.value?(n(),s("div",{key:3,class:"modal-overlay",onClick:re},[t("div",{class:"modal-content batch-modal",onClick:e[8]||(e[8]=j(()=>{},["stop"]))},[t("div",Yt,[t("h3",null,h($.value===1?"验证密码":$.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:re,class:"close-btn"},e[33]||(e[33]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Zt,[$.value===1?(n(),s("div",el,[e[35]||(e[35]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>V.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:be(Ce,["enter"])},null,544),[[U,V.value]]),t("div",tl,[t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>J.value=a)},null,512),[[ge,J.value]]),e[34]||(e[34]=t("span",null,"记住密码（2小时）",-1))])]),m.value?(n(),s("p",ll,h(m.value),1)):c("",!0),t("div",al,[t("button",{onClick:re,class:"btn btn-cancel"},"取消"),t("button",{onClick:Ce,class:"btn btn-primary",disabled:x.value},h(x.value?"验证中...":"确认"),9,ol)])])):c("",!0),$.value===2?(n(),s("div",sl,[e[36]||(e[36]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),b(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>X.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[U,X.value]]),m.value?(n(),s("p",nl,h(m.value),1)):c("",!0),t("div",rl,[t("button",{onClick:Ke,class:"btn btn-cancel"},"上一步"),t("button",{onClick:je,class:"btn btn-primary",disabled:x.value||!X.value.trim()},h(x.value?"解析中...":"下一步"),9,il)])])):c("",!0),$.value===3?(n(),s("div",ul,[e[40]||(e[40]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",dl,[(n(!0),s(P,null,R(Y.value,(a,S)=>(n(),s("div",{key:S,class:"batch-preview-item"},[b(t("input",{type:"checkbox","onUpdate:modelValue":B=>a.selected=B,id:`card-${S}`},null,8,cl),[[ge,a.selected]]),t("div",vl,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[6]||(e[6]=B=>B.target.src="/default-favicon.png")},null,40,hl),t("div",pl,[t("div",fl,[e[37]||(e[37]=t("label",null,"标题：",-1)),b(t("input",{type:"text","onUpdate:modelValue":B=>a.title=B,class:"batch-edit-input"},null,8,bl),[[U,a.title]])]),t("div",gl,[e[38]||(e[38]=t("label",null,"Logo：",-1)),b(t("input",{type:"text","onUpdate:modelValue":B=>a.logo=B,class:"batch-edit-input"},null,8,ml),[[U,a.logo]])]),t("div",kl,[e[39]||(e[39]=t("label",null,"描述：",-1)),b(t("textarea",{"onUpdate:modelValue":B=>a.description=B,class:"batch-edit-textarea",rows:"2"},null,8,yl),[[U,a.description]])]),t("p",wl,h(a.url),1),a.success?c("",!0):(n(),s("p",_l,"⚠️ "+h(a.error),1))])])]))),128))]),m.value?(n(),s("p",Cl,h(m.value),1)):c("",!0),t("div",Ml,[t("button",{onClick:e[7]||(e[7]=a=>$.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Ge,class:"btn btn-primary",disabled:x.value||we.value===0},h(x.value?"添加中...":`添加 (${we.value})`),9,xl)])])):c("",!0)])])])):c("",!0),t("footer",Sl,[t("div",Il,[t("button",{onClick:e[9]||(e[9]=a=>ae.value=!0),class:"friend-link-btn"},e[41]||(e[41]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),Be(" 友情链接 ")])),e[42]||(e[42]=t("p",{class:"copyright"},[Be("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),K.value?(n(),s("div",{key:4,class:"modal-overlay",onClick:e[15]||(e[15]=a=>K.value=!1)},[t("div",{class:"modal-content",onClick:e[14]||(e[14]=j(()=>{},["stop"]))},[t("div",$l,[e[44]||(e[44]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[10]||(e[10]=a=>K.value=!1),class:"close-btn"},e[43]||(e[43]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ll,[e[46]||(e[46]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>F.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:be(Me,["enter"]),style:{width:"100%"}},null,544),[[U,F.value]]),t("div",El,[t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=a=>oe.value=a)},null,512),[[ge,oe.value]]),e[45]||(e[45]=t("span",null,"记住密码（2小时）",-1))])]),C.value?(n(),s("p",Bl,h(C.value),1)):c("",!0),t("div",Ul,[t("button",{onClick:e[13]||(e[13]=a=>K.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:Me,class:"btn btn-primary",disabled:D.value},h(D.value?"验证中...":"确认"),9,Vl)])])])])):c("",!0),ae.value?(n(),s("div",{key:5,class:"modal-overlay",onClick:e[18]||(e[18]=a=>ae.value=!1)},[t("div",{class:"modal-content",onClick:e[17]||(e[17]=j(()=>{},["stop"]))},[t("div",Dl,[e[48]||(e[48]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[16]||(e[16]=a=>ae.value=!1),class:"close-btn"},e[47]||(e[47]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Al,[t("div",Pl,[(n(!0),s(P,null,R(me.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",Nl,[a.logo?(n(),s("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:qe},null,40,Tl)):(n(),s("div",zl,h(a.title.charAt(0)),1))]),t("div",Fl,[t("h4",null,h(a.title),1)])],8,Rl))),128))])])])])):c("",!0),pe.value?(n(),s("div",{key:6,class:"modal-overlay",onClick:ie},[t("div",{class:"modal-content",onClick:e[23]||(e[23]=j(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[50]||(e[50]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:ie,class:"close-btn"},e[49]||(e[49]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",ql,[t("div",Ol,[t("div",Jl,[e[51]||(e[51]=t("label",null,"标题",-1)),b(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>w.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[U,w.value.title]])]),t("div",Kl,[e[52]||(e[52]=t("label",null,"网址",-1)),b(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>w.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[U,w.value.url]])]),t("div",jl,[e[53]||(e[53]=t("label",null,"Logo 链接",-1)),b(t("input",{"onUpdate:modelValue":e[21]||(e[21]=a=>w.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[U,w.value.logo_url]])]),t("div",Gl,[e[54]||(e[54]=t("label",null,"描述",-1)),b(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>w.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[U,w.value.desc]])]),C.value?(n(),s("p",Hl,h(C.value),1)):c("",!0),t("div",Ql,[t("button",{onClick:ie,class:"btn btn-cancel"},"取消"),t("button",{onClick:lt,class:"btn btn-primary",disabled:D.value},h(D.value?"保存中...":"保存"),9,Wl)])])])])])):c("",!0),T(H,{name:"toast"},{default:G(()=>[he.value?(n(),s("div",Xl,h(ke.value),1)):c("",!0)]),_:1})])}}},aa=De(Yl,[["__scopeId","data-v-41ac354f"]]);export{aa as default};
