var be=Object.defineProperty,me=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var ee=(S,n,b)=>n in S?be(S,n,{enumerable:!0,configurable:!0,writable:!0,value:b}):S[n]=b,E=(S,n)=>{for(var b in n||(n={}))ge.call(n,b)&&ee(S,b,n[b]);if(Z)for(var b of Z(n))fe.call(n,b)&&ee(S,b,n[b]);return S},R=(S,n)=>me(S,he(n));var $=(S,n,b)=>new Promise((f,k)=>{var M=v=>{try{V(b.next(v))}catch(y){k(y)}},a=v=>{try{V(b.throw(v))}catch(y){k(y)}},V=v=>v.done?f(v.value):Promise.resolve(v.value).then(M,a);V((b=b.apply(S,n)).next())});import{_ as T,r as w,g as H,c as h,o as c,b as e,w as g,v as _,q as L,F as z,a as I,n as W,t as B,e as le,y as te,z as G,j as ne,d as D,A as O,x as J,B as Q,p as K,l as se,C as we,D as F}from"./index-DX2fGdNM.js";import{g as oe,n as ke,o as ye,q as $e,r as _e,s as Ce,t as Me,v as Ve,u as Be,k as xe,d as Ue,a as Ae,w as Se,x as De,y as Le,b as We,z as ze,A as Ie,B as Te,C as He,D as Pe,l as Fe}from"./api-DJSardu8.js";const Oe={class:"menu-manage"},Ne={class:"menu-header"},je={class:"menu-add"},Ee={class:"menu-content"},qe={class:"menu-list"},Re={class:"main-menu"},Je={class:"menu-info"},Ke=["onUpdate:modelValue","onBlur"],Ge={class:"menu-order"},Qe=["onUpdate:modelValue","onBlur"],Xe={class:"menu-actions"},Ye=["onClick","title"],Ze=["onClick"],et={class:"sub-menu-header"},tt={class:"sub-menu-title"},st=["onClick"],lt={key:0,class:"sub-menu-list"},nt={class:"sub-menu-info"},ot=["onUpdate:modelValue","onBlur"],at={class:"sub-menu-order"},it=["onUpdate:modelValue","onBlur"],dt={class:"sub-menu-actions"},ut=["onClick"],rt={key:1,class:"empty-sub-menu"},ct=["onClick"],vt={__name:"MenuManage",setup(S){const n=w([]),b=w("");H(f);function f(){return $(this,null,function*(){const s=yield oe();n.value=s.data.map(l=>R(E({},l),{showSubMenu:!1}))})}function k(){return $(this,null,function*(){if(!b.value.trim())return;const s=n.value.length?Math.max(...n.value.map(l=>l.order||0)):0;yield ke({name:b.value.trim(),order:s+1}),b.value="",f()})}function M(s){return $(this,null,function*(){yield ye(s.id,{name:s.name,order:s.order}),f()})}function a(s){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ã€‚")&&(yield $e(s),f())})}function V(s){return $(this,null,function*(){var o;const l=n.value.find(C=>C.id===s),r=prompt("è¯·è¾“å…¥å­èœå•åç§°ï¼š");if(!(r!=null&&r.trim()))return;const U=(o=l.subMenus)!=null&&o.length?Math.max(...l.subMenus.map(C=>C.order||0)):0;yield _e(s,{name:r.trim(),order:U+1}),f()})}function v(s){return $(this,null,function*(){yield Ce(s.id,{name:s.name,order:s.order}),f()})}function y(s){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å¡ç‰‡ã€‚")&&(yield Me(s),f())})}function u(s){const l=n.value.find(r=>r.id===s);l&&(l.showSubMenu=!l.showSubMenu)}return(s,l)=>(c(),h("div",Oe,[e("div",Ne,[l[2]||(l[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ä¸»èœå•å’Œå­èœå•")],-1)),e("div",je,[g(e("input",{"onUpdate:modelValue":l[0]||(l[0]=r=>b.value=r),placeholder:"è¯·è¾“å…¥ä¸»èœå•åç§°",class:"input"},null,512),[[_,b.value]]),e("button",{class:"btn btn-primary",onClick:k},l[1]||(l[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" æ·»åŠ ä¸»èœå• ")]))])]),e("div",Ee,[e("div",qe,[(c(!0),h(z,null,I(n.value,r=>{var U;return c(),h("div",{key:r.id,class:"menu-item"},[e("div",Re,[e("div",Je,[l[4]||(l[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),g(e("input",{"onUpdate:modelValue":o=>r.name=o,onBlur:o=>M(r),class:"menu-name-input"},null,40,Ke),[[_,r.name]]),e("div",Ge,[l[3]||(l[3]=e("span",{class:"order-label"},"æ’åº",-1)),g(e("input",{"onUpdate:modelValue":o=>r.order=o,type:"number",onBlur:o=>M(r),class:"order-input"},null,40,Qe),[[_,r.order,void 0,{number:!0}]])])]),e("div",Xe,[e("button",{class:"btn btn-icon expand-btn",onClick:o=>u(r.id),title:r.showSubMenu?"æ”¶èµ·å­èœå•":"å±•å¼€å­èœå•"},l[5]||(l[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)]),8,Ye),e("button",{class:"btn btn-danger btn-icon",onClick:o=>a(r.id),title:"åˆ é™¤ä¸»èœå•"},l[6]||(l[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Ze)])]),e("div",{class:W(["sub-menu-section",{expanded:r.showSubMenu}])},[e("div",et,[e("div",tt,[l[7]||(l[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),L(" å­èœå• ("+B(((U=r.subMenus)==null?void 0:U.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:o=>V(r.id)},l[8]||(l[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" æ·»åŠ å­èœå• ")]),8,st)]),r.subMenus&&r.subMenus.length>0?(c(),h("div",lt,[(c(!0),h(z,null,I(r.subMenus,o=>(c(),h("div",{key:o.id,class:"sub-menu-item"},[e("div",nt,[l[9]||(l[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),g(e("input",{"onUpdate:modelValue":C=>o.name=C,onBlur:C=>v(o),class:"sub-menu-name-input"},null,40,ot),[[_,o.name]]),e("div",at,[g(e("input",{"onUpdate:modelValue":C=>o.order=C,type:"number",onBlur:C=>v(o),class:"order-input"},null,40,it),[[_,o.order,void 0,{number:!0}]])])]),e("div",dt,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:C=>y(o.id),title:"åˆ é™¤å­èœå•"},l[10]||(l[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,ut)])]))),128))])):(c(),h("div",rt,[l[11]||(l[11]=e("p",null,"æš‚æ— å­èœå•",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:o=>V(r.id)},"æ·»åŠ ç¬¬ä¸€ä¸ªå­èœå•",8,ct)]))],2)])}),128))])])]))}},pt=T(vt,[["__scopeId","data-v-5964fa59"]]),bt={class:"card-manage"},mt={class:"card-header"},ht={class:"card-add"},gt=["value"],ft=["value"],wt={class:"card-card"},kt={class:"card-table"},yt=["onUpdate:modelValue","onBlur"],$t=["onUpdate:modelValue","onBlur"],_t=["onUpdate:modelValue","onBlur"],Ct=["onUpdate:modelValue","onBlur"],Mt=["onUpdate:modelValue","onBlur"],Vt=["onClick"],Bt={__name:"CardManage",setup(S){const n=w([]),b=w([]),f=w(),k=w(""),M=w(""),a=w(""),V=w(""),v=le(()=>{if(!f.value)return[];const o=n.value.find(C=>C.id===f.value);return(o==null?void 0:o.subMenus)||[]});H(()=>$(null,null,function*(){const o=yield oe();n.value=o.data,n.value.length&&(f.value=n.value[0].id,k.value="")})),te(f,()=>{k.value="",s()}),te(k,s);function y(){k.value=""}function u(){s()}function s(){return $(this,null,function*(){if(!f.value)return;const o=yield Ue(f.value,k.value||null);b.value=o.data})}function l(){return $(this,null,function*(){!M.value||!a.value||(yield Ve({menu_id:f.value,sub_menu_id:k.value||null,title:M.value,url:a.value,logo_url:V.value}),M.value="",a.value="",V.value="",s())})}function r(o){return $(this,null,function*(){yield Be(o.id,{menu_id:f.value,sub_menu_id:k.value||null,title:o.title,url:o.url,logo_url:o.logo_url,desc:o.desc,order:o.order}),s()})}function U(o){return $(this,null,function*(){yield xe(o),s()})}return(o,C)=>(c(),h("div",bt,[e("div",mt,[C[7]||(C[7]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",ht,[g(e("select",{"onUpdate:modelValue":C[0]||(C[0]=p=>f.value=p),class:"input narrow",onChange:y},[(c(!0),h(z,null,I(n.value,p=>(c(),h("option",{value:p.id,key:p.id},B(p.name),9,gt))),128))],544),[[G,f.value]]),g(e("select",{"onUpdate:modelValue":C[1]||(C[1]=p=>k.value=p),class:"input narrow",onChange:u},[C[5]||(C[5]=e("option",{value:""},"ä¸»èœå•",-1)),(c(!0),h(z,null,I(v.value,p=>(c(),h("option",{value:p.id,key:p.id},B(p.name),9,ft))),128))],544),[[G,k.value]]),g(e("input",{"onUpdate:modelValue":C[2]||(C[2]=p=>M.value=p),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[_,M.value]]),g(e("input",{"onUpdate:modelValue":C[3]||(C[3]=p=>a.value=p),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[_,a.value]]),g(e("input",{"onUpdate:modelValue":C[4]||(C[4]=p=>V.value=p),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[_,V.value]]),e("button",{class:"btn",onClick:l},C[6]||(C[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" æ·»åŠ å¡ç‰‡ ")]))])]),e("div",wt,[e("table",kt,[C[9]||(C[9]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(c(!0),h(z,null,I(b.value,p=>(c(),h("tr",{key:p.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":x=>p.title=x,onBlur:x=>r(p),class:"table-input"},null,40,yt),[[_,p.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":x=>p.url=x,onBlur:x=>r(p),class:"table-input"},null,40,$t),[[_,p.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":x=>p.logo_url=x,onBlur:x=>r(p),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,_t),[[_,p.logo_url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":x=>p.desc=x,onBlur:x=>r(p),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,Ct),[[_,p.desc]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":x=>p.order=x,type:"number",onBlur:x=>r(p),class:"table-input order-input"},null,40,Mt),[[_,p.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:x=>U(p.id),title:"åˆ é™¤"},C[8]||(C[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Vt)])]))),128))])])])]))}},xt=T(Bt,[["__scopeId","data-v-2003d901"]]),Ut={class:"ad-manage"},At={class:"ad-header"},St={class:"ad-section"},Dt={class:"ad-card"},Lt={class:"ad-table"},Wt=["onUpdate:modelValue","onBlur"],zt=["onUpdate:modelValue","onBlur"],It=["onClick"],Tt={class:"ad-section"},Ht={class:"ad-card"},Pt={class:"ad-table"},Ft=["onUpdate:modelValue","onBlur"],Ot=["onUpdate:modelValue","onBlur"],Nt=["onClick"],jt={__name:"AdManage",setup(S){const n=w([]),b=w([]),f=w(""),k=w(""),M=w("left");H(a);function a(){return $(this,null,function*(){const u=yield Ae();n.value=u.data.filter(s=>s.position==="left"),b.value=u.data.filter(s=>s.position==="right")})}function V(){return $(this,null,function*(){!f.value||!k.value||(yield Se({position:M.value,img:f.value,url:k.value}),f.value="",k.value="",M.value="left",a())})}function v(u){return $(this,null,function*(){yield De(u.id,{img:u.img,url:u.url}),a()})}function y(u){return $(this,null,function*(){yield Le(u),a()})}return(u,s)=>(c(),h("div",Ut,[e("div",At,[e("form",{class:"ad-add-row",onSubmit:ne(V,["prevent"])},[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>f.value=l),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[_,f.value]]),g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>k.value=l),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[_,k.value]]),g(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>M.value=l),class:"input select-input"},s[3]||(s[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)]),512),[[G,M.value]]),s[4]||(s[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",St,[s[6]||(s[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Dt,[e("table",Lt,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(c(!0),h(z,null,I(n.value,l=>(c(),h("tr",{key:l.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":r=>l.img=r,onBlur:r=>v(l),class:"input"},null,40,Wt),[[_,l.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":r=>l.url=r,onBlur:r=>v(l),class:"input"},null,40,zt),[[_,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:r=>y(l.id)},"åˆ é™¤å¹¿å‘Š",8,It)])]))),128))])])])]),e("div",Tt,[s[8]||(s[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Ht,[e("table",Pt,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(c(!0),h(z,null,I(b.value,l=>(c(),h("tr",{key:l.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":r=>l.img=r,onBlur:r=>v(l),class:"input"},null,40,Ft),[[_,l.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":r=>l.url=r,onBlur:r=>v(l),class:"input"},null,40,Ot),[[_,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:r=>y(l.id)},"åˆ é™¤å¹¿å‘Š",8,Nt)])]))),128))])])])])]))}},Et=T(jt,[["__scopeId","data-v-780b5e23"]]),qt={class:"friend-manage"},Rt={class:"friend-add"},Jt={class:"friend-card"},Kt={class:"friend-table"},Gt=["onUpdate:modelValue","onBlur"],Qt=["onUpdate:modelValue","onBlur"],Xt=["onUpdate:modelValue","onBlur"],Yt=["onClick"],Zt={__name:"FriendLinkManage",setup(S){const n=w([]),b=w(""),f=w(""),k=w("");H(M);function M(){return $(this,null,function*(){const y=yield We();n.value=y.data})}function a(){return $(this,null,function*(){!b.value||!f.value||(yield ze({title:b.value,url:f.value,logo:k.value}),b.value="",f.value="",k.value="",M())})}function V(y){return $(this,null,function*(){yield Ie(y.id,{title:y.title,url:y.url,logo:y.logo}),M()})}function v(y){return $(this,null,function*(){yield Te(y),M()})}return(y,u)=>(c(),h("div",qt,[u[4]||(u[4]=e("div",{class:"friend-header"},null,-1)),e("div",Rt,[g(e("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>b.value=s),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[_,b.value]]),g(e("input",{"onUpdate:modelValue":u[1]||(u[1]=s=>f.value=s),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[_,f.value]]),g(e("input",{"onUpdate:modelValue":u[2]||(u[2]=s=>k.value=s),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[_,k.value]]),e("button",{class:"btn",onClick:a},"æ·»åŠ å‹é“¾")]),e("div",Jt,[e("table",Kt,[u[3]||(u[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(c(!0),h(z,null,I(n.value,s=>(c(),h("tr",{key:s.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":l=>s.title=l,onBlur:l=>V(s),class:"input"},null,40,Gt),[[_,s.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":l=>s.url=l,onBlur:l=>V(s),class:"input"},null,40,Qt),[[_,s.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":l=>s.logo=l,onBlur:l=>V(s),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,Xt),[[_,s.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:l=>v(s.id)},"åˆ é™¤",8,Yt)])]))),128))])])])]))}},es=T(Zt,[["__scopeId","data-v-f280329a"]]),ts={class:"user-manage"},ss={class:"user-card"},ls={class:"password-section"},ns={class:"password-form"},os={class:"form-group"},as={class:"form-group"},is={class:"form-group"},ds={class:"form-actions"},us=["disabled"],rs={__name:"UserManage",setup(S){const n=w(""),b=w(""),f=w(""),k=w(!1),M=w(""),a=w("success"),V=w({});H(()=>$(null,null,function*(){try{const u=yield He();V.value=u.data}catch(u){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",u)}}));function v(){return $(this,null,function*(){var u,s;if(!n.value||!b.value||!f.value){y("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(b.value!==f.value){y("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(b.value.length<6){y("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}k.value=!0,M.value="";try{yield Pe(n.value,b.value),y("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),n.value="",b.value="",f.value=""}catch(l){y(((s=(u=l.response)==null?void 0:u.data)==null?void 0:s.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{k.value=!1}})}function y(u,s){M.value=u,a.value=s,u==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&s==="success"?setTimeout(()=>{M.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{M.value=""},3e3)}return(u,s)=>(c(),h("div",ts,[s[7]||(s[7]=e("div",{class:"user-header"},null,-1)),e("div",ss,[e("div",ls,[s[6]||(s[6]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",ns,[e("div",os,[s[3]||(s[3]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>n.value=l),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[_,n.value]])]),e("div",as,[s[4]||(s[4]=e("label",null,"æ–°å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>b.value=l),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[_,b.value]])]),e("div",is,[s[5]||(s[5]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>f.value=l),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[_,f.value]])]),e("div",ds,[e("button",{onClick:v,class:"btn",disabled:k.value},B(k.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,us)]),M.value?(c(),h("p",{key:0,class:W(["message",a.value])},B(M.value),3)):D("",!0)])])])]))}},cs=T(rs,[["__scopeId","data-v-85ce40f4"]]),vs={class:"backup-manage"},ps={class:"tabs"},bs={class:"tab-content"},ms={class:"toolbar"},hs=["disabled"],gs=["disabled"],fs=["disabled"],ws={class:"backup-list"},ks={key:0,class:"empty-state"},ys={key:1,class:"backup-grid"},$s={class:"backup-info"},_s={class:"backup-name"},Cs={class:"backup-meta"},Ms={class:"backup-size"},Vs={class:"backup-date"},Bs={class:"backup-actions"},xs=["onClick"],Us=["onClick"],As=["onClick"],Ss={class:"tab-content"},Ds={class:"toolbar"},Ls=["disabled"],Ws=["disabled"],zs={key:1,class:"info-box"},Is={class:"backup-list"},Ts={key:0,class:"empty-state"},Hs={key:1,class:"backup-grid"},Ps={class:"backup-info"},Fs={class:"backup-name"},Os={class:"backup-meta"},Ns={class:"backup-size"},js={class:"backup-date"},Es={class:"backup-actions"},qs=["onClick"],Rs=["onClick"],Js={class:"tab-content"},Ks={class:"config-section"},Gs={class:"config-card"},Qs={class:"config-header"},Xs={class:"switch"},Ys={key:0,class:"config-fields"},Zs={class:"field-row"},el={class:"field-row"},tl={class:"field-row"},sl={class:"config-card"},ll={class:"config-header"},nl={class:"switch"},ol={key:0,class:"config-fields"},al={class:"field-row"},il={class:"time-input"},dl={class:"field-row"},ul={class:"config-card"},rl={class:"config-header"},cl={class:"switch"},vl={key:0,class:"stats-card"},pl={class:"stats-grid"},bl={class:"stat-item"},ml={class:"stat-value"},hl={class:"stat-item"},gl={class:"stat-value"},fl={class:"stat-item"},wl={class:"stat-value"},kl={class:"stat-item"},yl={class:"stat-value"},$l={class:"config-actions"},_l=["disabled"],Cl={key:0,class:"modal-overlay"},Ml={class:"modal-content config-modal"},Vl={class:"form-group"},Bl={class:"form-group"},xl={class:"form-group"},Ul={class:"modal-actions"},Al=["disabled"],Sl={key:1,class:"modal-overlay"},Dl={class:"modal-content"},Ll={class:"modal-actions"},Wl={__name:"BackupManage",setup(S){const n=w("local"),b=w([]),f=w([]),k=w(!1),M=w(null),a=O({create:!1,list:!1,delete:!1,restore:!1,upload:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),V=w({text:"",type:""}),v=O({show:!1,filename:"",action:null,title:"",message:"",confirmClass:""}),y=O({configured:!1,url:"",username:""}),u=O({url:"",username:"",password:""}),s=O({debounce:{enabled:!0,delay:30,maxPerDay:3,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7},autoClean:!0}),l=w(null),r=localStorage.getItem("token");function U(d){return $(this,arguments,function*(i,t={}){return(yield fetch(i,R(E({},t),{headers:E({Authorization:`Bearer ${r}`,"Content-Type":"application/json"},t.headers)}))).json()})}const o=(i,t="success")=>{V.value={text:i,type:t},setTimeout(()=>{V.value={text:"",type:""}},3e3)},C=()=>$(null,null,function*(){a.create=!0;const i=yield U("/api/backup/create",{method:"POST"});i.success?(o("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),yield p()):o(i.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),a.create=!1}),p=()=>$(null,null,function*(){a.list=!0;const i=yield U("/api/backup/list");i.success?b.value=i.backups:o("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.list=!1}),x=i=>{window.open(`/api/backup/download/${i}?token=${r}`,"_blank")},m=(i,t)=>{v.show=!0,v.filename=t,v.action=i,i==="delete"?(v.title="åˆ é™¤",v.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,v.confirmClass="btn-danger"):i==="restore"?(v.title="æ¢å¤",v.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,v.confirmClass="btn-restore"):i==="webdav-restore"?(v.title="ä»WebDAVæ¢å¤",v.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${t} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,v.confirmClass="btn-restore"):i==="webdav-delete"&&(v.title="åˆ é™¤WebDAVå¤‡ä»½",v.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${t} å—ï¼Ÿ`,v.confirmClass="btn-danger")},A=()=>$(null,null,function*(){const{action:i,filename:t}=v;if(v.show=!1,i==="delete"){a.delete=!0;const d=yield U(`/api/backup/delete/${t}`,{method:"DELETE"});d.success?(o("åˆ é™¤æˆåŠŸï¼"),yield p()):o(d.message||"åˆ é™¤å¤±è´¥","error"),a.delete=!1}else if(i==="restore"){a.restore=!0;const d=yield U(`/api/backup/restore/${t}`,{method:"POST"});d.success?(o("æ¢å¤æˆåŠŸï¼"),yield p()):o(d.message||"æ¢å¤å¤±è´¥","error"),a.restore=!1}else i==="webdav-restore"?yield re(t):i==="webdav-delete"&&(yield ce(t))}),N=i=>i?new Date(i).toLocaleString("zh-CN",{hour12:!1}):"--",ae=()=>{M.value.click()},ie=i=>$(null,null,function*(){const t=i.target.files[0];if(t){if(!t.name.endsWith(".zip")){o("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),i.target.value="";return}if(t.size>500*1024*1024){o("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),i.target.value="";return}a.upload=!0;try{const d=new FormData;d.append("backup",t);const Y=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:d})).json();Y.success?(o("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield p()):o(Y.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(d){console.error("ä¸Šä¼ å¤±è´¥:",d),o("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{a.upload=!1,i.target.value=""}}}),X=()=>$(null,null,function*(){const i=yield U("/api/backup/webdav/config");i.success&&i.config&&(y.configured=i.config.configured,y.url=i.config.url||"",y.username=i.config.username||"")}),de=()=>$(null,null,function*(){if(!u.url||!u.username||!u.password){o("è¯·å¡«å†™å®Œæ•´çš„WebDAVé…ç½®ä¿¡æ¯","error");return}a.webdavConfig=!0;const i=yield U("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(u)});i.success?(o("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),k.value=!1,u.url="",u.username="",u.password="",yield X()):o(i.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),a.webdavConfig=!1}),ue=()=>$(null,null,function*(){a.webdavBackup=!0;const i=yield U("/api/backup/webdav/backup",{method:"POST"});i.success?(o("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield j()):o(i.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),a.webdavBackup=!1}),j=()=>$(null,null,function*(){a.webdavList=!0;const i=yield U("/api/backup/webdav/list");i.success?f.value=i.backups||[]:o("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.webdavList=!1}),re=i=>$(null,null,function*(){a.webdavRestore=!0;const t=yield U("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:i})});t.success?o("ä»WebDAVæ¢å¤æˆåŠŸï¼"):o(t.message||"ä»WebDAVæ¢å¤å¤±è´¥","error"),a.webdavRestore=!1}),ce=i=>$(null,null,function*(){a.webdavDelete=!0;const t=yield U(`/api/backup/webdav/delete/${i}`,{method:"DELETE"});t.success?(o("åˆ é™¤æˆåŠŸï¼"),yield j()):o(t.message||"åˆ é™¤å¤±è´¥","error"),a.webdavDelete=!1}),q=()=>$(null,null,function*(){const i=yield U("/api/backup/auto/config");i.success&&i.config?(Object.assign(s,i.config),l.value=i.stats||null):o("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),ve=()=>$(null,null,function*(){a.autoBackupConfig=!0;const i=yield U("/api/backup/auto/config",{method:"POST",body:JSON.stringify(s)});i.success?(o("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield q()):o(i.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),a.autoBackupConfig=!1}),pe=()=>{if(!s.scheduled.enabled)return"æœªå¯ç”¨";const i=String(s.scheduled.hour).padStart(2,"0"),t=String(s.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${i}:${t}`};return H(()=>$(null,null,function*(){yield p(),yield X(),y.configured&&(yield j()),yield q()})),(i,t)=>(c(),h("div",vs,[e("div",ps,[e("button",{class:W(["tab",{active:n.value==="local"}]),onClick:t[0]||(t[0]=d=>n.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:W(["tab",{active:n.value==="webdav"}]),onClick:t[1]||(t[1]=d=>n.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:W(["tab",{active:n.value==="auto"}]),onClick:t[2]||(t[2]=d=>n.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),g(e("div",bs,[e("div",ms,[e("button",{class:"btn btn-primary",onClick:C,disabled:a.create},[t[18]||(t[18]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),L(" "+B(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,hs),e("button",{class:"btn btn-success",onClick:ae,disabled:a.upload},[t[19]||(t[19]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),L(" "+B(a.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,gs),e("button",{class:"btn btn-secondary",onClick:p,disabled:a.list},[t[20]||(t[20]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),L(" "+B(a.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,fs),e("input",{ref_key:"fileInput",ref:M,type:"file",accept:".zip",onChange:ie,style:{display:"none"}},null,544)]),V.value.text?(c(),h("div",{key:0,class:W(["message",V.value.type])},B(V.value.text),3)):D("",!0),e("div",ws,[b.value.length===0&&!a.list?(c(),h("div",ks,t[21]||(t[21]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)]))):(c(),h("div",ys,[(c(!0),h(z,null,I(b.value,d=>(c(),h("div",{key:d.name,class:"backup-card"},[t[25]||(t[25]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",$s,[e("div",_s,B(d.name),1),e("div",Cs,[e("span",Ms,B(d.size),1),e("span",Vs,B(N(d.created)),1)])]),e("div",Bs,[e("button",{class:"btn-icon btn-restore",onClick:P=>m("restore",d.name),title:"æ¢å¤å¤‡ä»½"},t[22]||(t[22]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,xs),e("button",{class:"btn-icon",onClick:P=>x(d.name),title:"ä¸‹è½½å¤‡ä»½"},t[23]||(t[23]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)]),8,Us),e("button",{class:"btn-icon btn-danger",onClick:P=>m("delete",d.name),title:"åˆ é™¤å¤‡ä»½"},t[24]||(t[24]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,As)])]))),128))]))])],512),[[J,n.value==="local"]]),g(e("div",Ss,[e("div",Ds,[e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=d=>k.value=!0)},t[26]||(t[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),L(" WebDAVé…ç½® ")])),e("button",{class:"btn btn-primary",onClick:ue,disabled:a.webdavBackup||!y.configured},[t[27]||(t[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),L(" "+B(a.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,Ls),e("button",{class:"btn btn-secondary",onClick:j,disabled:a.webdavList||!y.configured},[t[28]||(t[28]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),L(" "+B(a.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Ws)]),V.value.text?(c(),h("div",{key:0,class:W(["message",V.value.type])},B(V.value.text),3)):D("",!0),y.configured?D("",!0):(c(),h("div",zs,t[29]||(t[29]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)]))),e("div",Is,[f.value.length===0&&!a.webdavList?(c(),h("div",Ts,t[30]||(t[30]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)]))):(c(),h("div",Hs,[(c(!0),h(z,null,I(f.value,d=>(c(),h("div",{key:d.name,class:"backup-card"},[t[33]||(t[33]=Q('<div class="backup-icon" data-v-a52938cc><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-a52938cc><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-a52938cc></path><polyline points="14 2 14 8 20 8" data-v-a52938cc></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-a52938cc></path></svg></div>',1)),e("div",Ps,[e("div",Fs,B(d.name),1),e("div",Os,[e("span",Ns,B(d.size),1),e("span",js,B(N(d.created)),1)])]),e("div",Es,[e("button",{class:"btn-icon btn-restore",onClick:P=>m("webdav-restore",d.name),title:"ä»WebDAVæ¢å¤"},t[31]||(t[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,qs),e("button",{class:"btn-icon btn-danger",onClick:P=>m("webdav-delete",d.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Rs)])]))),128))]))])],512),[[J,n.value==="webdav"]]),g(e("div",Js,[V.value.text?(c(),h("div",{key:0,class:W(["message",V.value.type])},B(V.value.text),3)):D("",!0),e("div",Ks,[t[61]||(t[61]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[62]||(t[62]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",Gs,[e("div",Qs,[t[35]||(t[35]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",Xs,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=d=>s.debounce.enabled=d)},null,512),[[K,s.debounce.enabled]]),t[34]||(t[34]=e("span",{class:"slider"},null,-1))])]),t[42]||(t[42]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),s.debounce.enabled?(c(),h("div",Ys,[e("div",Zs,[t[36]||(t[36]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=d=>s.debounce.delay=d),min:"5",max:"1440",class:"form-input"},null,512),[[_,s.debounce.delay,void 0,{number:!0}]]),t[37]||(t[37]=e("small",null,"èŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",el,[t[38]||(t[38]=e("label",null,"æ¯å¤©æœ€å¤šå¤‡ä»½æ¬¡æ•°",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=d=>s.debounce.maxPerDay=d),min:"1",max:"10",class:"form-input"},null,512),[[_,s.debounce.maxPerDay,void 0,{number:!0}]]),t[39]||(t[39]=e("small",null,"èŒƒå›´ï¼š1-10æ¬¡",-1))]),e("div",tl,[t[40]||(t[40]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=d=>s.debounce.keep=d),min:"1",max:"30",class:"form-input"},null,512),[[_,s.debounce.keep,void 0,{number:!0}]]),t[41]||(t[41]=e("small",null,"èŒƒå›´ï¼š1-30ä¸ª",-1))])])):D("",!0)]),e("div",sl,[e("div",ll,[t[44]||(t[44]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",nl,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=d=>s.scheduled.enabled=d)},null,512),[[K,s.scheduled.enabled]]),t[43]||(t[43]=e("span",{class:"slider"},null,-1))])]),t[50]||(t[50]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),s.scheduled.enabled?(c(),h("div",ol,[e("div",al,[t[46]||(t[46]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",il,[g(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=d=>s.scheduled.hour=d),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[_,s.scheduled.hour,void 0,{number:!0}]]),t[45]||(t[45]=e("span",null,":",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=d=>s.scheduled.minute=d),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[_,s.scheduled.minute,void 0,{number:!0}]])]),t[47]||(t[47]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",dl,[t[48]||(t[48]=e("label",null,"ä¿ç•™å¤©æ•°",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=d=>s.scheduled.keep=d),min:"1",max:"30",class:"form-input"},null,512),[[_,s.scheduled.keep,void 0,{number:!0}]]),t[49]||(t[49]=e("small",null,"èŒƒå›´ï¼š1-30å¤©",-1))])])):D("",!0)]),e("div",ul,[e("div",rl,[t[52]||(t[52]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",cl,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=d=>s.autoClean=d)},null,512),[[K,s.autoClean]]),t[51]||(t[51]=e("span",{class:"slider"},null,-1))])]),t[53]||(t[53]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡/å¤©æ•°çš„æ—§å¤‡ä»½æ–‡ä»¶ã€‚",-1))]),l.value?(c(),h("div",vl,[t[58]||(t[58]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",pl,[e("div",bl,[t[54]||(t[54]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½ï¼ˆä»Šæ—¥ï¼‰",-1)),e("span",ml,B(l.value.debounceToday||0)+" æ¬¡",1)]),e("div",hl,[t[55]||(t[55]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",gl,B(N(l.value.lastDebounce)||"æ— "),1)]),e("div",fl,[t[56]||(t[56]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",wl,B(N(l.value.lastScheduled)||"æ— "),1)]),e("div",kl,[t[57]||(t[57]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",yl,B(pe()),1)])])])):D("",!0),e("div",$l,[e("button",{class:"btn btn-secondary",onClick:q},t[59]||(t[59]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),L(" é‡ç½® ")])),e("button",{class:"btn btn-primary",onClick:ve,disabled:a.autoBackupConfig},[t[60]||(t[60]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),L(" "+B(a.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,_l)])])],512),[[J,n.value==="auto"]]),k.value?(c(),h("div",Cl,[e("div",Ml,[t[68]||(t[68]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",Vl,[t[63]||(t[63]=e("label",null,[L("WebDAV URL "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=d=>u.url=d),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[_,u.url]]),t[64]||(t[64]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Bl,[t[65]||(t[65]=e("label",null,[L("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=d=>u.username=d),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[_,u.username]])]),e("div",xl,[t[66]||(t[66]=e("label",null,[L("å¯†ç  "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"password","onUpdate:modelValue":t[15]||(t[15]=d=>u.password=d),placeholder:"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,512),[[_,u.password]]),t[67]||(t[67]=e("small",null,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç ",-1))]),e("div",Ul,[e("button",{class:"btn btn-secondary",onClick:t[16]||(t[16]=d=>k.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:de,disabled:a.webdavConfig},B(a.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,Al)])])])):D("",!0),v.show?(c(),h("div",Sl,[e("div",Dl,[e("h3",null,"ç¡®è®¤"+B(v.title),1),e("p",null,B(v.message),1),e("div",Ll,[e("button",{class:"btn btn-secondary",onClick:t[17]||(t[17]=d=>v.show=!1)},"å–æ¶ˆ"),e("button",{class:W(["btn",v.confirmClass]),onClick:A},"ç¡®è®¤",2)])])])):D("",!0)]))}},zl=T(Wl,[["__scopeId","data-v-a52938cc"]]),Il={key:0,class:"login-container"},Tl={class:"login-card"},Hl={class:"login-form"},Pl={class:"password-input-wrapper"},Fl=["type"],Ol={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Nl={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},jl={class:"login-buttons"},El=["disabled"],ql={key:0,class:"login-error"},Rl={key:1,class:"admin-layout"},Jl={class:"menu-list"},Kl={class:"admin-main"},Gl={class:"admin-header"},Ql={class:"header-title"},Xl={class:"admin-content"},Yl={key:0,class:"welcome-page"},Zl={class:"welcome-cards"},en={class:"welcome-card"},tn={class:"welcome-value"},sn={class:"welcome-card"},ln={class:"welcome-value"},nn={__name:"Admin",setup(S){const n=w("welcome"),b=w(""),f=w(""),k=w(!1),M=w(""),a=w(""),V=w(!1),v=w(""),y=w(!1),u=w(!1),s=le(()=>{switch(n.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});H(()=>{const x=localStorage.getItem("token");k.value=!!x,k.value&&l()});function l(){return $(this,null,function*(){try{const x=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.ok){const m=yield x.json();b.value=m.last_login_time||"",f.value=m.last_login_ip||""}}catch(x){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",x)}})}function r(){return $(this,null,function*(){var x,m;if(!M.value||!a.value){v.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}V.value=!0,v.value="";try{const A=yield Fe(M.value,a.value);A.data.token&&(localStorage.setItem("token",A.data.token),k.value=!0,b.value=A.data.lastLoginTime||"",f.value=A.data.lastLoginIp||"")}catch(A){v.value=((m=(x=A.response)==null?void 0:x.data)==null?void 0:m.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{V.value=!1}})}function U(){localStorage.removeItem("token"),k.value=!1,M.value="",a.value="",v.value=""}function o(){window.open("/","_blank")}function C(){u.value=!u.value}function p(){u.value=!1}return(x,m)=>k.value?(c(),h("div",Rl,[e("aside",{class:W(["admin-sider",{open:u.value}]),onClick:ne(p,["self"])},[e("div",{class:"logo clickable",onClick:m[3]||(m[3]=A=>{n.value="welcome",p()})},"Admin"),e("ul",Jl,[e("li",{class:W({active:n.value==="menu"}),onClick:m[4]||(m[4]=A=>{n.value="menu",p()})},"æ ç›®ç®¡ç†",2),e("li",{class:W({active:n.value==="card"}),onClick:m[5]||(m[5]=A=>{n.value="card",p()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:W({active:n.value==="ad"}),onClick:m[6]||(m[6]=A=>{n.value="ad",p()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:W({active:n.value==="friend"}),onClick:m[7]||(m[7]=A=>{n.value="friend",p()})},"å‹é“¾ç®¡ç†",2),e("li",{class:W({active:n.value==="user"}),onClick:m[8]||(m[8]=A=>{n.value="user",p()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:W({active:n.value==="backup"}),onClick:m[9]||(m[9]=A=>{n.value="backup",p()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",Kl,[e("div",Gl,[e("button",{class:"menu-toggle",onClick:C}," â˜° "),e("div",Ql,B(s.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:o,title:"è¿›å…¥ä¸»é¡µ"},m[14]||(m[14]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("button",{class:"btn logout-btn",onClick:U},"é€€å‡ºç™»å½•")])]),e("div",Xl,[n.value==="welcome"?(c(),h("div",Yl,[m[17]||(m[17]=e("h2",{class:"welcome-title"},"æ¬¢è¿æ‚¨è¿›å…¥ Con-Nav-Item åå°ç®¡ç†ç³»ç»Ÿ",-1)),e("div",Zl,[e("div",en,[m[15]||(m[15]=Q('<div class="welcome-icon time-icon" data-v-3d6ed9cb><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-3d6ed9cb><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-3d6ed9cb></path></svg></div><div class="welcome-label" data-v-3d6ed9cb>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",tn,B(b.value||"--"),1)]),e("div",sn,[m[16]||(m[16]=Q('<div class="welcome-icon ip-icon" data-v-3d6ed9cb><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-3d6ed9cb><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-3d6ed9cb></circle></svg></div><div class="welcome-label" data-v-3d6ed9cb>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",ln,B(f.value||"--"),1)])])])):D("",!0),n.value==="menu"?(c(),F(pt,{key:1})):D("",!0),n.value==="card"?(c(),F(xt,{key:2})):D("",!0),n.value==="ad"?(c(),F(Et,{key:3})):D("",!0),n.value==="friend"?(c(),F(es,{key:4})):D("",!0),n.value==="user"?(c(),F(cs,{key:5})):D("",!0),n.value==="backup"?(c(),F(zl,{key:6})):D("",!0)]),m[18]||(m[18]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[L("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(c(),h("div",Il,[e("div",Tl,[m[13]||(m[13]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",Hl,[g(e("input",{"onUpdate:modelValue":m[0]||(m[0]=A=>M.value=A),type:"text",placeholder:"ç”¨æˆ·å",class:"login-input",onKeyup:se(r,["enter"])},null,544),[[_,M.value]]),e("div",Pl,[g(e("input",{"onUpdate:modelValue":m[1]||(m[1]=A=>a.value=A),type:y.value?"text":"password",placeholder:"å¯†ç ",class:"login-input password-input",onKeyup:se(r,["enter"])},null,40,Fl),[[we,a.value]]),e("span",{class:"toggle-password",onClick:m[2]||(m[2]=A=>y.value=!y.value)},[y.value?(c(),h("svg",Ol,m[10]||(m[10]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]))):(c(),h("svg",Nl,m[11]||(m[11]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])))])]),e("div",jl,[e("button",{onClick:o,class:"back-btn"},m[12]||(m[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),L(" è¿”å›é¦–é¡µ ")])),e("button",{onClick:r,class:"login-btn",disabled:V.value},B(V.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,El)]),v.value?(c(),h("p",ql,B(v.value),1)):D("",!0)])])]))}},un=T(nn,[["__scopeId","data-v-3d6ed9cb"]]);export{un as default};
