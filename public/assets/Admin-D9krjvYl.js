var Q=Object.defineProperty,R=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(C,n,s)=>n in C?Q(C,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):C[n]=s,N=(C,n)=>{for(var s in n||(n={}))X.call(n,s)&&j(C,s,n[s]);if(z)for(var s of z(n))Y.call(n,s)&&j(C,s,n[s]);return C},D=(C,n)=>R(C,W(n));var y=(C,n,s)=>new Promise((u,v)=>{var h=f=>{try{M(s.next(f))}catch(w){v(w)}},$=f=>{try{M(s.throw(f))}catch(w){v(w)}},M=f=>f.done?u(f.value):Promise.resolve(f.value).then(h,$);M((s=s.apply(C,n)).next())});import{_ as F,r as m,h as T,c as _,o as p,b as e,j as g,v as b,l as L,F as A,a as I,n as S,t as U,g as E,w as K,p as H,m as G,d as x,k as O,q as Z,s as P,u as q}from"./index-C3gnqQUJ.js";import{g as J,d as ee,u as te,e as le,f as ne,h as oe,i as se,j as ae,k as ue,l as ie,c as de,a as re,m as ve,n as ce,o as pe,b as me,p as he,q as ge,r as we,s as _e,t as be,v as fe}from"./api-CnoDXQnA.js";const ke={class:"menu-manage"},$e={class:"menu-header"},ye={class:"menu-add"},Me={class:"menu-content"},Ce={class:"menu-list"},Ve={class:"main-menu"},Ue={class:"menu-info"},Be=["onUpdate:modelValue","onBlur"],xe={class:"menu-order"},Se=["onUpdate:modelValue","onBlur"],Ae={class:"menu-actions"},Ie=["onClick","title"],Le=["onClick"],Fe={class:"sub-menu-header"},Te={class:"sub-menu-title"},Pe=["onClick"],He={key:0,class:"sub-menu-list"},ze={class:"sub-menu-info"},je=["onUpdate:modelValue","onBlur"],Ne={class:"sub-menu-order"},De=["onUpdate:modelValue","onBlur"],Ke={class:"sub-menu-actions"},Oe=["onClick"],qe={key:1,class:"empty-sub-menu"},Ee=["onClick"],Ge={__name:"MenuManage",setup(C){const n=m([]),s=m("");T(u);function u(){return y(this,null,function*(){const t=yield J();n.value=t.data.map(l=>D(N({},l),{showSubMenu:!1}))})}function v(){return y(this,null,function*(){if(!s.value.trim())return;const t=n.value.length?Math.max(...n.value.map(l=>l.order||0)):0;yield ee({name:s.value.trim(),order:t+1}),s.value="",u()})}function h(t){return y(this,null,function*(){yield te(t.id,{name:t.name,order:t.order}),u()})}function $(t){return y(this,null,function*(){confirm("确定要删除这个主菜单吗？删除后将同时删除其下的所有子菜单和卡片。")&&(yield le(t),u())})}function M(t){return y(this,null,function*(){var i;const l=n.value.find(c=>c.id===t),o=prompt("请输入子菜单名称：");if(!(o!=null&&o.trim()))return;const B=(i=l.subMenus)!=null&&i.length?Math.max(...l.subMenus.map(c=>c.order||0)):0;yield ne(t,{name:o.trim(),order:B+1}),u()})}function f(t){return y(this,null,function*(){yield oe(t.id,{name:t.name,order:t.order}),u()})}function w(t){return y(this,null,function*(){confirm("确定要删除这个子菜单吗？删除后将同时删除其下的所有卡片。")&&(yield se(t),u())})}function r(t){const l=n.value.find(o=>o.id===t);l&&(l.showSubMenu=!l.showSubMenu)}return(t,l)=>(p(),_("div",ke,[e("div",$e,[l[2]||(l[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"管理主菜单和子菜单")],-1)),e("div",ye,[g(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>s.value=o),placeholder:"请输入主菜单名称",class:"input"},null,512),[[b,s.value]]),e("button",{class:"btn btn-primary",onClick:v},l[1]||(l[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" 添加主菜单 ")]))])]),e("div",Me,[e("div",Ce,[(p(!0),_(A,null,I(n.value,o=>{var B;return p(),_("div",{key:o.id,class:"menu-item"},[e("div",Ve,[e("div",Ue,[l[4]||(l[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),g(e("input",{"onUpdate:modelValue":i=>o.name=i,onBlur:i=>h(o),class:"menu-name-input"},null,40,Be),[[b,o.name]]),e("div",xe,[l[3]||(l[3]=e("span",{class:"order-label"},"排序",-1)),g(e("input",{"onUpdate:modelValue":i=>o.order=i,type:"number",onBlur:i=>h(o),class:"order-input"},null,40,Se),[[b,o.order,void 0,{number:!0}]])])]),e("div",Ae,[e("button",{class:"btn btn-icon expand-btn",onClick:i=>r(o.id),title:o.showSubMenu?"收起子菜单":"展开子菜单"},l[5]||(l[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)]),8,Ie),e("button",{class:"btn btn-danger btn-icon",onClick:i=>$(o.id),title:"删除主菜单"},l[6]||(l[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Le)])]),e("div",{class:S(["sub-menu-section",{expanded:o.showSubMenu}])},[e("div",Fe,[e("div",Te,[l[7]||(l[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),L(" 子菜单 ("+U(((B=o.subMenus)==null?void 0:B.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:i=>M(o.id)},l[8]||(l[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" 添加子菜单 ")]),8,Pe)]),o.subMenus&&o.subMenus.length>0?(p(),_("div",He,[(p(!0),_(A,null,I(o.subMenus,i=>(p(),_("div",{key:i.id,class:"sub-menu-item"},[e("div",ze,[l[9]||(l[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),g(e("input",{"onUpdate:modelValue":c=>i.name=c,onBlur:c=>f(i),class:"sub-menu-name-input"},null,40,je),[[b,i.name]]),e("div",Ne,[g(e("input",{"onUpdate:modelValue":c=>i.order=c,type:"number",onBlur:c=>f(i),class:"order-input"},null,40,De),[[b,i.order,void 0,{number:!0}]])])]),e("div",Ke,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:c=>w(i.id),title:"删除子菜单"},l[10]||(l[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Oe)])]))),128))])):(p(),_("div",qe,[l[11]||(l[11]=e("p",null,"暂无子菜单",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:i=>M(o.id)},"添加第一个子菜单",8,Ee)]))],2)])}),128))])])]))}},Je=F(Ge,[["__scopeId","data-v-5964fa59"]]),Qe={class:"card-manage"},Re={class:"card-header"},We={class:"card-add"},Xe=["value"],Ye=["value"],Ze={class:"card-card"},et={class:"card-table"},tt=["onUpdate:modelValue","onBlur"],lt=["onUpdate:modelValue","onBlur"],nt=["onUpdate:modelValue","onBlur"],ot=["onUpdate:modelValue","onBlur"],st=["onUpdate:modelValue","onBlur"],at=["onClick"],ut={__name:"CardManage",setup(C){const n=m([]),s=m([]),u=m(),v=m(""),h=m(""),$=m(""),M=m(""),f=E(()=>{if(!u.value)return[];const i=n.value.find(c=>c.id===u.value);return(i==null?void 0:i.subMenus)||[]});T(()=>y(null,null,function*(){const i=yield J();n.value=i.data,n.value.length&&(u.value=n.value[0].id,v.value="")})),K(u,()=>{v.value="",t()}),K(v,t);function w(){v.value=""}function r(){t()}function t(){return y(this,null,function*(){if(!u.value)return;const i=yield de(u.value,v.value||null);s.value=i.data})}function l(){return y(this,null,function*(){!h.value||!$.value||(yield ae({menu_id:u.value,sub_menu_id:v.value||null,title:h.value,url:$.value,logo_url:M.value}),h.value="",$.value="",M.value="",t())})}function o(i){return y(this,null,function*(){yield ue(i.id,{menu_id:u.value,sub_menu_id:v.value||null,title:i.title,url:i.url,logo_url:i.logo_url,desc:i.desc,order:i.order}),t()})}function B(i){return y(this,null,function*(){yield ie(i),t()})}return(i,c)=>(p(),_("div",Qe,[e("div",Re,[c[7]||(c[7]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"管理网站导航卡片，支持主菜单和子菜单分类")],-1)),e("div",We,[g(e("select",{"onUpdate:modelValue":c[0]||(c[0]=a=>u.value=a),class:"input narrow",onChange:w},[(p(!0),_(A,null,I(n.value,a=>(p(),_("option",{value:a.id,key:a.id},U(a.name),9,Xe))),128))],544),[[H,u.value]]),g(e("select",{"onUpdate:modelValue":c[1]||(c[1]=a=>v.value=a),class:"input narrow",onChange:r},[c[5]||(c[5]=e("option",{value:""},"主菜单",-1)),(p(!0),_(A,null,I(f.value,a=>(p(),_("option",{value:a.id,key:a.id},U(a.name),9,Ye))),128))],544),[[H,v.value]]),g(e("input",{"onUpdate:modelValue":c[2]||(c[2]=a=>h.value=a),placeholder:"卡片标题",class:"input narrow"},null,512),[[b,h.value]]),g(e("input",{"onUpdate:modelValue":c[3]||(c[3]=a=>$.value=a),placeholder:"卡片链接",class:"input wide"},null,512),[[b,$.value]]),g(e("input",{"onUpdate:modelValue":c[4]||(c[4]=a=>M.value=a),placeholder:"logo链接(可选)",class:"input wide"},null,512),[[b,M.value]]),e("button",{class:"btn",onClick:l},c[6]||(c[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),L(" 添加卡片 ")]))])]),e("div",Ze,[e("table",et,[c[9]||(c[9]=e("thead",null,[e("tr",null,[e("th",null,"标题"),e("th",null,"网址"),e("th",null,"Logo链接"),e("th",null,"描述"),e("th",null,"排序"),e("th",null,"操作")])],-1)),e("tbody",null,[(p(!0),_(A,null,I(s.value,a=>(p(),_("tr",{key:a.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":k=>a.title=k,onBlur:k=>o(a),class:"table-input"},null,40,tt),[[b,a.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":k=>a.url=k,onBlur:k=>o(a),class:"table-input"},null,40,lt),[[b,a.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":k=>a.logo_url=k,onBlur:k=>o(a),class:"table-input",placeholder:"logo链接(可选)"},null,40,nt),[[b,a.logo_url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":k=>a.desc=k,onBlur:k=>o(a),class:"table-input",placeholder:"描述（可选）"},null,40,ot),[[b,a.desc]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":k=>a.order=k,type:"number",onBlur:k=>o(a),class:"table-input order-input"},null,40,st),[[b,a.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:k=>B(a.id),title:"删除"},c[8]||(c[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,at)])]))),128))])])])]))}},it=F(ut,[["__scopeId","data-v-2003d901"]]),dt={class:"ad-manage"},rt={class:"ad-header"},vt={class:"ad-section"},ct={class:"ad-card"},pt={class:"ad-table"},mt=["onUpdate:modelValue","onBlur"],ht=["onUpdate:modelValue","onBlur"],gt=["onClick"],wt={class:"ad-section"},_t={class:"ad-card"},bt={class:"ad-table"},ft=["onUpdate:modelValue","onBlur"],kt=["onUpdate:modelValue","onBlur"],$t=["onClick"],yt={__name:"AdManage",setup(C){const n=m([]),s=m([]),u=m(""),v=m(""),h=m("left");T($);function $(){return y(this,null,function*(){const r=yield re();n.value=r.data.filter(t=>t.position==="left"),s.value=r.data.filter(t=>t.position==="right")})}function M(){return y(this,null,function*(){!u.value||!v.value||(yield ve({position:h.value,img:u.value,url:v.value}),u.value="",v.value="",h.value="left",$())})}function f(r){return y(this,null,function*(){yield ce(r.id,{img:r.img,url:r.url}),$()})}function w(r){return y(this,null,function*(){yield pe(r),$()})}return(r,t)=>(p(),_("div",dt,[e("div",rt,[e("form",{class:"ad-add-row",onSubmit:G(M,["prevent"])},[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),placeholder:"广告图片链接",class:"input"},null,512),[[b,u.value]]),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>v.value=l),placeholder:"广告跳转链接",class:"input"},null,512),[[b,v.value]]),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>h.value=l),class:"input select-input"},t[3]||(t[3]=[e("option",{value:"left"},"左侧广告",-1),e("option",{value:"right"},"右侧广告",-1)]),512),[[H,h.value]]),t[4]||(t[4]=e("button",{class:"btn",type:"submit"},"添加广告",-1))],32)]),e("div",vt,[t[6]||(t[6]=e("h3",{class:"section-title"},"左侧广告列表",-1)),e("div",ct,[e("table",pt,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"图片"),e("th",null,"跳转链接"),e("th",null,"操作")])],-1)),e("tbody",null,[(p(!0),_(A,null,I(n.value,l=>(p(),_("tr",{key:l.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":o=>l.img=o,onBlur:o=>f(l),class:"input"},null,40,mt),[[b,l.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>l.url=o,onBlur:o=>f(l),class:"input"},null,40,ht),[[b,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:o=>w(l.id)},"删除广告",8,gt)])]))),128))])])])]),e("div",wt,[t[8]||(t[8]=e("h3",{class:"section-title"},"右侧广告列表",-1)),e("div",_t,[e("table",bt,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"图片"),e("th",null,"跳转链接"),e("th",null,"操作")])],-1)),e("tbody",null,[(p(!0),_(A,null,I(s.value,l=>(p(),_("tr",{key:l.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":o=>l.img=o,onBlur:o=>f(l),class:"input"},null,40,ft),[[b,l.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>l.url=o,onBlur:o=>f(l),class:"input"},null,40,kt),[[b,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:o=>w(l.id)},"删除广告",8,$t)])]))),128))])])])])]))}},Mt=F(yt,[["__scopeId","data-v-780b5e23"]]),Ct={class:"friend-manage"},Vt={class:"friend-add"},Ut={class:"friend-card"},Bt={class:"friend-table"},xt=["onUpdate:modelValue","onBlur"],St=["onUpdate:modelValue","onBlur"],At=["onUpdate:modelValue","onBlur"],It=["onClick"],Lt={__name:"FriendLinkManage",setup(C){const n=m([]),s=m(""),u=m(""),v=m("");T(h);function h(){return y(this,null,function*(){const w=yield me();n.value=w.data})}function $(){return y(this,null,function*(){!s.value||!u.value||(yield he({title:s.value,url:u.value,logo:v.value}),s.value="",u.value="",v.value="",h())})}function M(w){return y(this,null,function*(){yield ge(w.id,{title:w.title,url:w.url,logo:w.logo}),h()})}function f(w){return y(this,null,function*(){yield we(w),h()})}return(w,r)=>(p(),_("div",Ct,[r[4]||(r[4]=e("div",{class:"friend-header"},null,-1)),e("div",Vt,[g(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>s.value=t),placeholder:"网站名",class:"input"},null,512),[[b,s.value]]),g(e("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>u.value=t),placeholder:"网站链接",class:"input"},null,512),[[b,u.value]]),g(e("input",{"onUpdate:modelValue":r[2]||(r[2]=t=>v.value=t),placeholder:"logo链接(可选)",class:"input"},null,512),[[b,v.value]]),e("button",{class:"btn",onClick:$},"添加友链")]),e("div",Ut,[e("table",Bt,[r[3]||(r[3]=e("thead",null,[e("tr",null,[e("th",null,"网站名"),e("th",null,"链接"),e("th",null,"Logo"),e("th",null,"操作")])],-1)),e("tbody",null,[(p(!0),_(A,null,I(n.value,t=>(p(),_("tr",{key:t.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":l=>t.title=l,onBlur:l=>M(t),class:"input"},null,40,xt),[[b,t.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":l=>t.url=l,onBlur:l=>M(t),class:"input"},null,40,St),[[b,t.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":l=>t.logo=l,onBlur:l=>M(t),class:"input",placeholder:"logo链接(可选)"},null,40,At),[[b,t.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:l=>f(t.id)},"删除",8,It)])]))),128))])])])]))}},Ft=F(Lt,[["__scopeId","data-v-f280329a"]]),Tt={class:"user-manage"},Pt={class:"user-card"},Ht={class:"password-section"},zt={class:"password-form"},jt={class:"form-group"},Nt={class:"form-group"},Dt={class:"form-group"},Kt={class:"form-actions"},Ot=["disabled"],qt={__name:"UserManage",setup(C){const n=m(""),s=m(""),u=m(""),v=m(!1),h=m(""),$=m("success"),M=m({});T(()=>y(null,null,function*(){try{const r=yield _e();M.value=r.data}catch(r){console.error("获取用户信息失败:",r)}}));function f(){return y(this,null,function*(){var r,t;if(!n.value||!s.value||!u.value){w("请填写所有密码字段","error");return}if(s.value!==u.value){w("两次输入的新密码不一致","error");return}if(s.value.length<6){w("新密码长度至少6位","error");return}v.value=!0,h.value="";try{yield be(n.value,s.value),w("密码修改成功","success"),n.value="",s.value="",u.value=""}catch(l){w(((t=(r=l.response)==null?void 0:r.data)==null?void 0:t.message)||"密码修改失败","error")}finally{v.value=!1}})}function w(r,t){h.value=r,$.value=t,r==="密码修改成功"&&t==="success"?setTimeout(()=>{h.value="2秒后自动退出登录,请使用新密码重新登录...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{h.value=""},3e3)}return(r,t)=>(p(),_("div",Tt,[t[7]||(t[7]=e("div",{class:"user-header"},null,-1)),e("div",Pt,[e("div",Ht,[t[6]||(t[6]=e("h3",{class:"section-title"},"修改密码",-1)),e("div",zt,[e("div",jt,[t[3]||(t[3]=e("label",null,"当前密码：",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),type:"password",placeholder:"请输入当前密码",class:"input"},null,512),[[b,n.value]])]),e("div",Nt,[t[4]||(t[4]=e("label",null,"新密码：",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value=l),type:"password",placeholder:"请输入新密码",class:"input"},null,512),[[b,s.value]])]),e("div",Dt,[t[5]||(t[5]=e("label",null,"确认新密码：",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),type:"password",placeholder:"请再次输入新密码",class:"input"},null,512),[[b,u.value]])]),e("div",Kt,[e("button",{onClick:f,class:"btn",disabled:v.value},U(v.value?"修改中...":"修改密码"),9,Ot)]),h.value?(p(),_("p",{key:0,class:S(["message",$.value])},U(h.value),3)):x("",!0)])])])]))}},Et=F(qt,[["__scopeId","data-v-85ce40f4"]]),Gt={key:0,class:"login-container"},Jt={class:"login-card"},Qt={class:"login-form"},Rt={class:"password-input-wrapper"},Wt=["type"],Xt={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Yt={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Zt={class:"login-buttons"},el=["disabled"],tl={key:0,class:"login-error"},ll={key:1,class:"admin-layout"},nl={class:"menu-list"},ol={class:"admin-main"},sl={class:"admin-header"},al={class:"header-title"},ul={class:"admin-content"},il={key:0,class:"welcome-page"},dl={class:"welcome-cards"},rl={class:"welcome-card"},vl={class:"welcome-value"},cl={class:"welcome-card"},pl={class:"welcome-value"},ml={__name:"Admin",setup(C){const n=m("welcome"),s=m(""),u=m(""),v=m(!1),h=m(""),$=m(""),M=m(!1),f=m(""),w=m(!1),r=m(!1),t=E(()=>{switch(n.value){case"menu":return"栏目管理";case"card":return"卡片管理";case"ad":return"广告管理";case"friend":return"友链管理";case"user":return"用户管理";default:return""}});T(()=>{const k=localStorage.getItem("token");v.value=!!k,v.value&&l()});function l(){return y(this,null,function*(){try{const k=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(k.ok){const d=yield k.json();s.value=d.last_login_time||"",u.value=d.last_login_ip||""}}catch(k){console.error("获取用户信息失败:",k)}})}function o(){return y(this,null,function*(){var k,d;if(!h.value||!$.value){f.value="请输入用户名和密码";return}M.value=!0,f.value="";try{const V=yield fe(h.value,$.value);V.data.token&&(localStorage.setItem("token",V.data.token),v.value=!0,s.value=V.data.lastLoginTime||"",u.value=V.data.lastLoginIp||"")}catch(V){f.value=((d=(k=V.response)==null?void 0:k.data)==null?void 0:d.message)||"登录失败，请检查用户名和密码"}finally{M.value=!1}})}function B(){localStorage.removeItem("token"),v.value=!1,h.value="",$.value="",f.value=""}function i(){window.open("/","_blank")}function c(){r.value=!r.value}function a(){r.value=!1}return(k,d)=>v.value?(p(),_("div",ll,[e("aside",{class:S(["admin-sider",{open:r.value}]),onClick:G(a,["self"])},[e("div",{class:"logo clickable",onClick:d[3]||(d[3]=V=>{n.value="welcome",a()})},"Admin"),e("ul",nl,[e("li",{class:S({active:n.value==="menu"}),onClick:d[4]||(d[4]=V=>{n.value="menu",a()})},"栏目管理",2),e("li",{class:S({active:n.value==="card"}),onClick:d[5]||(d[5]=V=>{n.value="card",a()})},"卡片管理",2),e("li",{class:S({active:n.value==="ad"}),onClick:d[6]||(d[6]=V=>{n.value="ad",a()})},"广告管理",2),e("li",{class:S({active:n.value==="friend"}),onClick:d[7]||(d[7]=V=>{n.value="friend",a()})},"友链管理",2),e("li",{class:S({active:n.value==="user"}),onClick:d[8]||(d[8]=V=>{n.value="user",a()})},"用户管理",2)])],2),e("main",ol,[e("div",sl,[e("button",{class:"menu-toggle",onClick:c}," ☰ "),e("div",al,U(t.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:i,title:"进入主页"},d[13]||(d[13]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("button",{class:"btn logout-btn",onClick:B},"退出登录")])]),e("div",ul,[n.value==="welcome"?(p(),_("div",il,[d[16]||(d[16]=e("h2",{class:"welcome-title"},"欢迎您进入 Nav-Item 后台管理系统",-1)),e("div",dl,[e("div",rl,[d[14]||(d[14]=q('<div class="welcome-icon time-icon" data-v-54d5c650><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-54d5c650><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-54d5c650></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-54d5c650></path></svg></div><div class="welcome-label" data-v-54d5c650>上次登录时间</div>',2)),e("div",vl,U(s.value||"--"),1)]),e("div",cl,[d[15]||(d[15]=q('<div class="welcome-icon ip-icon" data-v-54d5c650><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-54d5c650><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-54d5c650></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-54d5c650></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-54d5c650></circle></svg></div><div class="welcome-label" data-v-54d5c650>上次登录IP</div>',2)),e("div",pl,U(u.value||"--"),1)])])])):x("",!0),n.value==="menu"?(p(),P(Je,{key:1})):x("",!0),n.value==="card"?(p(),P(it,{key:2})):x("",!0),n.value==="ad"?(p(),P(Mt,{key:3})):x("",!0),n.value==="friend"?(p(),P(Ft,{key:4})):x("",!0),n.value==="user"?(p(),P(Et,{key:5})):x("",!0)]),d[17]||(d[17]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[L("Copyright © 2025 Nav-Item | "),e("a",{href:"https://github.com/eooce/Nav-Item",target:"_blank",class:"footer-link"},"Powered by eooce")])],-1))])])):(p(),_("div",Gt,[e("div",Jt,[d[12]||(d[12]=e("h2",{class:"login-title"},"后台管理登录",-1)),e("div",Qt,[g(e("input",{"onUpdate:modelValue":d[0]||(d[0]=V=>h.value=V),type:"text",placeholder:"用户名",class:"login-input",onKeyup:O(o,["enter"])},null,544),[[b,h.value]]),e("div",Rt,[g(e("input",{"onUpdate:modelValue":d[1]||(d[1]=V=>$.value=V),type:w.value?"text":"password",placeholder:"密码",class:"login-input password-input",onKeyup:O(o,["enter"])},null,40,Wt),[[Z,$.value]]),e("span",{class:"toggle-password",onClick:d[2]||(d[2]=V=>w.value=!w.value)},[w.value?(p(),_("svg",Xt,d[9]||(d[9]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]))):(p(),_("svg",Yt,d[10]||(d[10]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])))])]),e("div",Zt,[e("button",{onClick:i,class:"back-btn"},d[11]||(d[11]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),L(" 返回首页 ")])),e("button",{onClick:o,class:"login-btn",disabled:M.value},U(M.value?"登录中...":"登录"),9,el)]),f.value?(p(),_("p",tl,U(f.value),1)):x("",!0)])])]))}},_l=F(ml,[["__scopeId","data-v-54d5c650"]]);export{_l as default};
