const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-DYiawd1f.js","assets/index-BmfvWE5S.js","assets/CardGrid-CxlXuEba.css"])))=>i.map(i=>d[i]);
var Oe=Object.defineProperty,je=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var Ce=(f,v,u)=>v in f?Oe(f,v,{enumerable:!0,configurable:!0,writable:!0,value:u}):f[v]=u,ue=(f,v)=>{for(var u in v||(v={}))He.call(v,u)&&Ce(f,u,v[u]);if(_e)for(var u of _e(v))Je.call(v,u)&&Ce(f,u,v[u]);return f},ce=(f,v)=>je(f,Ge(v));var y=(f,v,u)=>new Promise((_,m)=>{var N=x=>{try{w(u.next(x))}catch(P){m(P)}},c=x=>{try{w(u.throw(x))}catch(P){m(P)}},w=x=>x.done?_(x.value):Promise.resolve(x.value).then(N,c);w((u=u.apply(f,v)).next())});import{_ as $e,r as d,c as s,F as A,a as D,o,b as t,d as h,t as b,n as ae,e as Me,f as Qe,g as We,h as Xe,i as Ye,j as z,w as g,v as E,k as ve,u as he,l as Ze,m as Q,T as W,p as X,q as xe,s as Ie,x as et,y as te}from"./index-BmfvWE5S.js";import{g as tt,a as lt,b as at,c as le,l as Se,d as ot,e as st,u as nt,f as rt,h as it,i as dt}from"./api-BbZSgGBc.js";const ut={class:"menu-bar"},ct=["onMouseenter","onMouseleave"],vt=["onClick"],ht=["onClick"],bt={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(f){const v=d(null);function u(m){v.value=m}function _(m){setTimeout(()=>{v.value===m&&(v.value=null)},100)}return(m,N)=>(o(),s("nav",ut,[(o(!0),s(A,null,D(f.menus,c=>(o(),s("div",{key:c.id,class:"menu-item",onMouseenter:w=>u(c.id),onMouseleave:w=>_(c.id)},[t("button",{onClick:w=>m.$emit("select",c),class:ae({active:c.id===f.activeId})},b(c.name),11,vt),c.subMenus&&c.subMenus.length>0?(o(),s("div",{key:0,class:ae(["sub-menu",{show:v.value===c.id}])},[(o(!0),s(A,null,D(c.subMenus,w=>(o(),s("button",{key:w.id,onClick:x=>m.$emit("select",w,c),class:ae([{active:w.id===f.activeSubMenuId},"sub-menu-item"])},b(w.name),11,ht))),128))],2)):h("",!0)],40,ct))),128))]))}},pt=$e(bt,[["__scopeId","data-v-16a94230"]]),gt={class:"home-container"},ft={class:"menu-bar-fixed"},mt={class:"search-section"},kt={class:"search-box-wrapper"},yt={class:"search-engine-select"},wt=["onClick"],_t={class:"search-container"},Ct=["placeholder"],Mt={key:0,class:"ad-space-fixed left-ad-fixed"},xt=["href"],It=["src"],St={key:1,class:"ad-space-fixed right-ad-fixed"},$t=["href"],Et=["src"],Bt={key:2,class:"categories-view"},Lt={class:"category-title"},Ut={key:0,class:"sub-categories"},Vt={class:"sub-category-title"},Rt=["disabled"],At={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Dt={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Pt={key:"plus",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},zt={key:"close",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Nt={class:"modal-header"},Ft={class:"modal-body"},Tt={key:0,class:"batch-step"},qt={class:"remember-password-wrapper"},Kt={key:0,class:"batch-error"},Ot={class:"batch-actions"},jt=["disabled"],Gt={key:1,class:"batch-step"},Ht={key:0,class:"batch-error"},Jt={class:"batch-actions"},Qt=["disabled"],Wt={key:2,class:"batch-step"},Xt={class:"batch-preview-list"},Yt=["onUpdate:modelValue","id"],Zt={class:"batch-card-preview"},el=["src","alt"],tl={class:"batch-card-info"},ll={class:"batch-edit-field"},al=["onUpdate:modelValue"],ol={class:"batch-edit-field"},sl=["onUpdate:modelValue"],nl={class:"batch-edit-field"},rl=["onUpdate:modelValue"],il={class:"batch-card-url"},dl={key:0,class:"batch-card-warning"},ul={key:0,class:"batch-error"},cl={class:"batch-actions"},vl=["disabled"],hl={class:"footer"},bl={class:"footer-content"},pl={class:"modal-header"},gl={class:"modal-body"},fl={key:0,class:"batch-error"},ml={class:"batch-actions",style:{"margin-top":"20px"}},kl=["disabled"],yl={class:"modal-header"},wl={class:"modal-body"},_l={class:"friend-links-grid"},Cl=["href"],Ml={class:"friend-link-logo"},xl=["src","alt"],Il={key:1,class:"friend-link-placeholder"},Sl={class:"friend-link-info"},$l={class:"modal-body"},El={class:"edit-card-form"},Bl={class:"form-group"},Ll={class:"form-group"},Ul={class:"form-group"},Vl={class:"form-group"},Rl={key:0,class:"batch-error"},Al={class:"batch-actions",style:{"margin-top":"20px"}},Dl=["disabled"],Pl={__name:"Home",setup(f){const v=Ze(()=>et(()=>import("./CardGrid-DYiawd1f.js"),__vite__mapDeps([0,1,2]))),u=d([]),_=d(null),m=d(null),N=d([]),c=d(""),w=d([]),x=d([]),P=d(!1),be=d([]),oe=d(!1),I=d(1),L=d(""),K=d(""),M=d(!1),p=d(""),O=d([]),T=d(!1),S=d(!1),j=d(""),q=d(!1),U=d(!1),C=d(""),se=d(!1),Y=d(null),k=d({title:"",url:"",logo_url:"",desc:""}),V=d(!1);function Ee(){V.value=!V.value}function pe(){V.value&&(V.value=!1)}const G=d(!1),ge=Me(()=>O.value.filter(l=>l.selected).length),ne=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],H=d((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=ne.find(n=>n.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return ne[0]})());function Be(l){H.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function Le(){c.value=""}const Ue=Me(()=>c.value?N.value.filter(l=>l.title.toLowerCase().includes(c.value.toLowerCase())||l.url.toLowerCase().includes(c.value.toLowerCase())):N.value);Qe(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),We(()=>y(null,null,function*(){const l=yield tt();u.value=l.data,u.value.length&&(_.value=u.value[0],F());const e=yield lt();w.value=e.data.filter(r=>r.position==="left"),x.value=e.data.filter(r=>r.position==="right");const n=yield at();be.value=n.data;const i=localStorage.getItem("nav_background");if(i){const r=document.querySelector(".home-container");r&&!r.style.backgroundImage.includes(i)&&(r.style.backgroundImage=`url(${i})`,r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",r.style.backgroundAttachment="fixed")}De(),document.addEventListener("click",pe)})),Xe(()=>{document.removeEventListener("click",pe)});function Ve(l,e=null){return y(this,null,function*(){e?(_.value=e,m.value=l):(_.value=l,m.value=null),F()})}const fe=d({});function F(){return y(this,null,function*(){var e;if(!_.value)return;const l=yield le(_.value.id,(e=m.value)==null?void 0:e.id);N.value=l.data})}function J(){return y(this,null,function*(){const l={};for(const e of u.value){const n=yield le(e.id,null),i=`${e.id}_null`;if(l[i]=n.data,e.sub_menus&&e.sub_menus.length)for(const r of e.sub_menus){const $=yield le(e.id,r.id),a=`${e.id}_${r.id}`;l[a]=$.data}}fe.value=l})}function me(l,e){const n=`${l}_${e}`;return fe.value[n]||[]}function ke(){return y(this,null,function*(){if(c.value.trim())if(H.value.name==="site"){let l=!1;for(const e of u.value){const n=yield le(e.id),i=n.data.find(r=>r.title.toLowerCase().includes(c.value.toLowerCase())||r.url.toLowerCase().includes(c.value.toLowerCase()));if(i){_.value=e,N.value=n.data,setTimeout(()=>{const r=document.querySelector(`[data-card-id='${i.id}']`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=H.value.url(c.value);window.open(l,"_blank")}})}function Re(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function Ae(){return y(this,null,function*(){oe.value=!0,p.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:i}=JSON.parse(l);if(Date.now()<n&&i){localStorage.setItem("token",i),L.value=e,T.value=!0,I.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}I.value=1})}function Z(){oe.value=!1,I.value=1,L.value="",K.value="",p.value="",O.value=[],M.value=!1}function De(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:i}=JSON.parse(l);Date.now()<n?(L.value=e,T.value=!0,i&&localStorage.setItem("token",i)):localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}}function ye(){return y(this,null,function*(){if(!L.value){p.value="请输入密码";return}M.value=!0,p.value="";try{const l=yield Se("admin",L.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(T.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:L.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");I.value=2}catch(l){p.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{M.value=!1}})}function Pe(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),L.value="",T.value=!1,I.value=1}function ze(){return y(this,null,function*(){var e,n;const l=K.value.split(`
`).map(i=>i.trim()).filter(i=>i.length>0);if(l.length===0){p.value="请输入至少一个网址";return}M.value=!0,p.value="";try{const i=yield ot(l);O.value=i.data.data.map(r=>ce(ue({},r),{selected:!0})),I.value=3}catch(i){p.value=((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.error)||"解析失败，请重试"}finally{M.value=!1}})}function Ne(){return y(this,null,function*(){var e,n,i;const l=O.value.filter(r=>r.selected);if(l.length===0){p.value="请至少选择一个网站";return}M.value=!0,p.value="";try{const r=l.map($=>({title:$.title,url:$.url,logo:$.logo,description:$.description}));yield st(_.value.id,((e=m.value)==null?void 0:e.id)||null,r),alert(`成功添加 ${l.length} 个网站！`),Z(),yield F()}catch(r){p.value=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.error)||"添加失败，请重试"}finally{M.value=!1}})}function Fe(){return y(this,null,function*(){if(!G.value){G.value=!0;try{const e=(yield rt()).data.url;let n=document.getElementById("dynamic-bg-style");n||(n=document.createElement("style"),n.id="dynamic-bg-style",document.head.appendChild(n)),n.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{G.value=!1}}})}function Te(){return y(this,null,function*(){q.value=!0,j.value="",C.value=""})}function we(){return y(this,null,function*(){if(!j.value){C.value="请输入密码";return}U.value=!0,C.value="";try{const l=yield Se("admin",j.value);localStorage.setItem("token",l.data.token),yield J(),S.value=!0,q.value=!1,U.value=!1}catch(l){C.value="密码错误",U.value=!1}})}function qe(){S.value=!1}function re(l,e,n){return y(this,null,function*(){var r,$;const i=l.map((a,B)=>({id:a,order:B,menu_id:e,sub_menu_id:n}));try{yield dt(i),S.value?yield J():yield F()}catch(a){alert("保存失败："+((($=(r=a.response)==null?void 0:r.data)==null?void 0:$.error)||a.message)),S.value?yield J():yield F()}})}function ie(l){return y(this,null,function*(){var e,n;if(confirm(`确定要删除「${l.title}」吗？`))try{yield it(l.id),alert("删除成功"),S.value?yield J():yield F()}catch(i){alert("删除失败："+(((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.error)||i.message))}})}function de(l){Y.value=l,k.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},C.value="",se.value=!0}function ee(){se.value=!1,Y.value=null,k.value={title:"",url:"",logo_url:"",desc:""},C.value=""}function Ke(){return y(this,null,function*(){var l,e;if(!k.value.title.trim()){C.value="请输入标题";return}if(!k.value.url.trim()){C.value="请输入网址";return}U.value=!0,C.value="";try{yield nt(Y.value.id,ce(ue({},Y.value),{title:k.value.title,url:k.value.url,logo_url:k.value.logo_url,desc:k.value.desc})),alert("修改成功"),ee(),S.value?yield J():yield F()}catch(n){C.value="修改失败："+(((e=(l=n.response)==null?void 0:l.data)==null?void 0:e.error)||n.message)}finally{U.value=!1}})}return(l,e)=>{var n,i,r,$;return o(),s("div",gt,[t("div",ft,[z(pt,{menus:u.value,activeId:(n=_.value)==null?void 0:n.id,activeSubMenuId:(i=m.value)==null?void 0:i.id,onSelect:Ve},null,8,["menus","activeId","activeSubMenuId"])]),t("div",mt,[t("div",kt,[t("div",yt,[(o(),s(A,null,D(ne,a=>t("button",{key:a.name,class:ae(["engine-btn",{active:H.value.name===a.name}]),onClick:B=>Be(a)},b(a.label),11,wt)),64))]),t("div",_t,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),type:"text",placeholder:H.value.placeholder,class:"search-input",onKeyup:ve(ke,["enter"])},null,40,Ct),[[E,c.value]]),c.value?(o(),s("button",{key:0,class:"clear-btn",onClick:Le,"aria-label":"清空",title:"clear"},e[22]||(e[22]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):h("",!0),t("button",{onClick:ke,class:"search-btn",title:"search"},e[23]||(e[23]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),w.value.length?(o(),s("div",Mt,[(o(!0),s(A,null,D(w.value,a=>(o(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,It)],8,xt))),128))])):h("",!0),x.value.length?(o(),s("div",St,[(o(!0),s(A,null,D(x.value,a=>(o(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Et)],8,$t))),128))])):h("",!0),S.value?(o(),s("div",Bt,[(o(!0),s(A,null,D(u.value,a=>(o(),s("div",{key:a.id,class:"category-section"},[t("h3",Lt,b(a.name),1),z(he(v),{cards:me(a.id,null),editMode:S.value,categoryId:a.id,subCategoryId:null,onCardsReordered:re,onEditCard:de,onDeleteCard:ie},null,8,["cards","editMode","categoryId"]),a.sub_menus&&a.sub_menus.length?(o(),s("div",Ut,[(o(!0),s(A,null,D(a.sub_menus,B=>(o(),s("div",{key:B.id,class:"sub-category-section"},[t("h4",Vt,b(B.name),1),z(he(v),{cards:me(a.id,B.id),editMode:S.value,categoryId:a.id,subCategoryId:B.id,onCardsReordered:re,onEditCard:de,onDeleteCard:ie},null,8,["cards","editMode","categoryId","subCategoryId"])]))),128))])):h("",!0)]))),128))])):(o(),Ye(he(v),{key:3,cards:Ue.value,editMode:S.value,categoryId:(r=_.value)==null?void 0:r.id,subCategoryId:($=m.value)==null?void 0:$.id,onCardsReordered:re,onEditCard:de,onDeleteCard:ie},null,8,["cards","editMode","categoryId","subCategoryId"])),t("div",{class:"fab-container",onClick:e[1]||(e[1]=X(()=>{},["stop"]))},[z(W,{name:"fab-item"},{default:Q(()=>[g(t("button",{onClick:Fe,class:"change-bg-btn",title:"切换背景",disabled:G.value},[G.value?(o(),s("svg",Dt,e[25]||(e[25]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(o(),s("svg",At,e[24]||(e[24]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,Rt),[[te,V.value]])]),_:1}),z(W,{name:"fab-item"},{default:Q(()=>[_.value?g((o(),s("button",{key:0,onClick:Ae,class:"batch-add-btn",title:"批量添加网站"},e[26]||(e[26]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[te,V.value]]):h("",!0)]),_:1}),z(W,{name:"fab-item"},{default:Q(()=>[S.value?g((o(),s("button",{key:0,onClick:qe,class:"exit-edit-btn",title:"退出编辑模式"},e[27]||(e[27]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[te,V.value]]):h("",!0)]),_:1}),z(W,{name:"fab-item"},{default:Q(()=>[S.value?h("",!0):g((o(),s("button",{key:0,onClick:Te,class:"edit-mode-btn",title:"编辑模式"},e[28]||(e[28]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[te,V.value]])]),_:1}),t("button",{onClick:Ee,class:"fab-toggle-btn",title:"更多功能"},[z(W,{name:"fab-icon",mode:"out-in"},{default:Q(()=>[V.value?(o(),s("svg",zt,e[30]||(e[30]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(o(),s("svg",Pt,e[29]||(e[29]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),oe.value?(o(),s("div",{key:4,class:"modal-overlay",onClick:Z},[t("div",{class:"modal-content batch-modal",onClick:e[7]||(e[7]=X(()=>{},["stop"]))},[t("div",Nt,[t("h3",null,b(I.value===1?"验证密码":I.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:Z,class:"close-btn"},e[31]||(e[31]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ft,[I.value===1?(o(),s("div",Tt,[e[33]||(e[33]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>L.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ve(ye,["enter"])},null,544),[[E,L.value]]),t("div",qt,[t("label",null,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>T.value=a)},null,512),[[xe,T.value]]),e[32]||(e[32]=t("span",null,"记住密码（2小时）",-1))])]),p.value?(o(),s("p",Kt,b(p.value),1)):h("",!0),t("div",Ot,[t("button",{onClick:Z,class:"btn btn-cancel"},"取消"),t("button",{onClick:ye,class:"btn btn-primary",disabled:M.value},b(M.value?"验证中...":"确认"),9,jt)])])):h("",!0),I.value===2?(o(),s("div",Gt,[e[34]||(e[34]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),g(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>K.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[E,K.value]]),p.value?(o(),s("p",Ht,b(p.value),1)):h("",!0),t("div",Jt,[t("button",{onClick:Pe,class:"btn btn-cancel"},"上一步"),t("button",{onClick:ze,class:"btn btn-primary",disabled:M.value||!K.value.trim()},b(M.value?"解析中...":"下一步"),9,Qt)])])):h("",!0),I.value===3?(o(),s("div",Wt,[e[38]||(e[38]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",Xt,[(o(!0),s(A,null,D(O.value,(a,B)=>(o(),s("div",{key:B,class:"batch-preview-item"},[g(t("input",{type:"checkbox","onUpdate:modelValue":R=>a.selected=R,id:`card-${B}`},null,8,Yt),[[xe,a.selected]]),t("div",Zt,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[5]||(e[5]=R=>R.target.src="/default-favicon.png")},null,40,el),t("div",tl,[t("div",ll,[e[35]||(e[35]=t("label",null,"标题：",-1)),g(t("input",{type:"text","onUpdate:modelValue":R=>a.title=R,class:"batch-edit-input"},null,8,al),[[E,a.title]])]),t("div",ol,[e[36]||(e[36]=t("label",null,"Logo：",-1)),g(t("input",{type:"text","onUpdate:modelValue":R=>a.logo=R,class:"batch-edit-input"},null,8,sl),[[E,a.logo]])]),t("div",nl,[e[37]||(e[37]=t("label",null,"描述：",-1)),g(t("textarea",{"onUpdate:modelValue":R=>a.description=R,class:"batch-edit-textarea",rows:"2"},null,8,rl),[[E,a.description]])]),t("p",il,b(a.url),1),a.success?h("",!0):(o(),s("p",dl,"⚠️ "+b(a.error),1))])])]))),128))]),p.value?(o(),s("p",ul,b(p.value),1)):h("",!0),t("div",cl,[t("button",{onClick:e[6]||(e[6]=a=>I.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Ne,class:"btn btn-primary",disabled:M.value||ge.value===0},b(M.value?"添加中...":`添加 (${ge.value})`),9,vl)])])):h("",!0)])])])):h("",!0),t("footer",hl,[t("div",bl,[t("button",{onClick:e[8]||(e[8]=a=>P.value=!0),class:"friend-link-btn"},e[39]||(e[39]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),Ie(" 友情链接 ")])),e[40]||(e[40]=t("p",{class:"copyright"},[Ie("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),q.value?(o(),s("div",{key:5,class:"modal-overlay",onClick:e[13]||(e[13]=a=>q.value=!1)},[t("div",{class:"modal-content",onClick:e[12]||(e[12]=X(()=>{},["stop"]))},[t("div",pl,[e[42]||(e[42]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[9]||(e[9]=a=>q.value=!1),class:"close-btn"},e[41]||(e[41]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",gl,[e[43]||(e[43]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),g(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>j.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ve(we,["enter"]),style:{width:"100%"}},null,544),[[E,j.value]]),C.value?(o(),s("p",fl,b(C.value),1)):h("",!0),t("div",ml,[t("button",{onClick:e[11]||(e[11]=a=>q.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:we,class:"btn btn-primary",disabled:U.value},b(U.value?"验证中...":"确认"),9,kl)])])])])):h("",!0),P.value?(o(),s("div",{key:6,class:"modal-overlay",onClick:e[16]||(e[16]=a=>P.value=!1)},[t("div",{class:"modal-content",onClick:e[15]||(e[15]=X(()=>{},["stop"]))},[t("div",yl,[e[45]||(e[45]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[14]||(e[14]=a=>P.value=!1),class:"close-btn"},e[44]||(e[44]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",wl,[t("div",_l,[(o(!0),s(A,null,D(be.value,a=>(o(),s("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",Ml,[a.logo?(o(),s("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:Re},null,40,xl)):(o(),s("div",Il,b(a.title.charAt(0)),1))]),t("div",Sl,[t("h4",null,b(a.title),1)])],8,Cl))),128))])])])])):h("",!0),se.value?(o(),s("div",{key:7,class:"modal-overlay",onClick:ee},[t("div",{class:"modal-content",onClick:e[21]||(e[21]=X(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[47]||(e[47]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:ee,class:"close-btn"},e[46]||(e[46]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",$l,[t("div",El,[t("div",Bl,[e[48]||(e[48]=t("label",null,"标题",-1)),g(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>k.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[E,k.value.title]])]),t("div",Ll,[e[49]||(e[49]=t("label",null,"网址",-1)),g(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>k.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[E,k.value.url]])]),t("div",Ul,[e[50]||(e[50]=t("label",null,"Logo 链接",-1)),g(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>k.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[E,k.value.logo_url]])]),t("div",Vl,[e[51]||(e[51]=t("label",null,"描述",-1)),g(t("textarea",{"onUpdate:modelValue":e[20]||(e[20]=a=>k.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[E,k.value.desc]])]),C.value?(o(),s("p",Rl,b(C.value),1)):h("",!0),t("div",Al,[t("button",{onClick:ee,class:"btn btn-cancel"},"取消"),t("button",{onClick:Ke,class:"btn btn-primary",disabled:U.value},b(U.value?"保存中...":"保存"),9,Dl)])])])])])):h("",!0)])}}},ql=$e(Pl,[["__scopeId","data-v-8820776c"]]);export{ql as default};
