const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-Daa4Z86Y.js","assets/index-CAECLKJ2.js","assets/CardGrid-CR1X23qM.css"])))=>i.map(i=>d[i]);
var Ze=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var xe=(k,p,d)=>p in k?Ze(k,p,{enumerable:!0,configurable:!0,writable:!0,value:d}):k[p]=d,ne=(k,p)=>{for(var d in p||(p={}))lt.call(p,d)&&xe(k,d,p[d]);if(Me)for(var d of Me(p))at.call(p,d)&&xe(k,d,p[d]);return k},ie=(k,p)=>et(k,tt(p));var g=(k,p,d)=>new Promise((w,b)=>{var F=S=>{try{_(d.next(S))}catch(D){b(D)}},c=S=>{try{_(d.throw(S))}catch(D){b(D)}},_=S=>S.done?w(S.value):Promise.resolve(S.value).then(F,c);_((d=d.apply(k,p)).next())});import{_ as Be,r as u,c as o,F as R,a as T,o as s,b as t,d as v,t as h,n as H,e as Ie,f as ot,g as st,h as nt,i as N,w as m,v as B,j as pe,u as it,k as rt,l as j,T as G,m as te,p as Se,q as $e,s as ut,x as re}from"./index-CAECLKJ2.js";import{g as dt,a as ct,b as vt,c as ue,l as Ee,d as ht,e as pt,u as Le,f as bt,h as ft,i as gt}from"./api-BbZSgGBc.js";const mt={class:"menu-bar"},kt=["onMouseenter","onMouseleave"],yt=["onClick"],wt=["onClick"],_t={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(k){const p=u(null);function d(b){p.value=b}function w(b){setTimeout(()=>{p.value===b&&(p.value=null)},100)}return(b,F)=>(s(),o("nav",mt,[(s(!0),o(R,null,T(k.menus,c=>(s(),o("div",{key:c.id,class:"menu-item",onMouseenter:_=>d(c.id),onMouseleave:_=>w(c.id)},[t("button",{onClick:_=>b.$emit("select",c),class:H({active:c.id===k.activeId})},h(c.name),11,yt),c.subMenus&&c.subMenus.length>0?(s(),o("div",{key:0,class:H(["sub-menu",{show:p.value===c.id}])},[(s(!0),o(R,null,T(c.subMenus,_=>(s(),o("button",{key:_.id,onClick:S=>b.$emit("select",_,c),class:H([{active:_.id===k.activeSubMenuId},"sub-menu-item"])},h(_.name),11,wt))),128))],2)):v("",!0)],40,kt))),128))]))}},Ct=Be(_t,[["__scopeId","data-v-16a94230"]]),Mt={class:"home-container"},xt={class:"menu-bar-fixed"},It={class:"search-section"},St={class:"search-box-wrapper"},$t={class:"search-engine-select"},Et=["onClick"],Lt={class:"search-container"},Bt=["placeholder"],Ut={key:0,class:"ad-space-fixed left-ad-fixed"},Vt=["href"],At=["src"],Pt={key:1,class:"ad-space-fixed right-ad-fixed"},Rt=["href"],Tt=["src"],Dt={key:2,class:"move-target-panel"},zt={class:"move-target-header"},Nt={class:"move-target-list"},Ft=["onClick"],qt={key:0,class:"target-submenu-list"},Kt=["onClick"],Ot=["disabled"],jt={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Gt={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ht={key:"plus",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Jt={key:"close",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Qt={class:"modal-header"},Wt={class:"modal-body"},Xt={key:0,class:"batch-step"},Yt={class:"remember-password-wrapper"},Zt={key:0,class:"batch-error"},el={class:"batch-actions"},tl=["disabled"],ll={key:1,class:"batch-step"},al={key:0,class:"batch-error"},ol={class:"batch-actions"},sl=["disabled"],nl={key:2,class:"batch-step"},il={class:"batch-preview-list"},rl=["onUpdate:modelValue","id"],ul={class:"batch-card-preview"},dl=["src","alt"],cl={class:"batch-card-info"},vl={class:"batch-edit-field"},hl=["onUpdate:modelValue"],pl={class:"batch-edit-field"},bl=["onUpdate:modelValue"],fl={class:"batch-edit-field"},gl=["onUpdate:modelValue"],ml={class:"batch-card-url"},kl={key:0,class:"batch-card-warning"},yl={key:0,class:"batch-error"},wl={class:"batch-actions"},_l=["disabled"],Cl={class:"footer"},Ml={class:"footer-content"},xl={class:"modal-header"},Il={class:"modal-body"},Sl={key:0,class:"batch-error"},$l={class:"batch-actions",style:{"margin-top":"20px"}},El=["disabled"],Ll={class:"modal-header"},Bl={class:"modal-body"},Ul={class:"friend-links-grid"},Vl=["href"],Al={class:"friend-link-logo"},Pl=["src","alt"],Rl={key:1,class:"friend-link-placeholder"},Tl={class:"friend-link-info"},Dl={class:"modal-body"},zl={class:"edit-card-form"},Nl={class:"form-group"},Fl={class:"form-group"},ql={class:"form-group"},Kl={class:"form-group"},Ol={key:0,class:"batch-error"},jl={class:"batch-actions",style:{"margin-top":"20px"}},Gl=["disabled"],Hl={key:0,class:"toast-notification"},Jl={__name:"Home",setup(k){const p=rt(()=>ut(()=>import("./CardGrid-Daa4Z86Y.js"),__vite__mapDeps([0,1,2]))),d=u([]),w=u(null),b=u(null),F=u([]),c=u(""),_=u([]),S=u([]),D=u(!1),be=u([]),de=u(!1),$=u(1),V=u(""),J=u(""),x=u(!1),f=u(""),Q=u([]),K=u(!1),U=u(!1),W=u(""),O=u(!1),A=u(!1),C=u(""),E=u([]),q=u(!1),X=u(null),Y=u(null),fe=u(""),ce=u(!1),ve=u(!1),le=u(null),y=u({title:"",url:"",logo_url:"",desc:""}),P=u(!1);function Ue(){P.value=!P.value}function ge(){P.value&&(P.value=!1)}const Z=u(!1),me=Ie(()=>Q.value.filter(l=>l.selected).length),he=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],ee=u((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=he.find(n=>n.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return he[0]})());function Ve(l){ee.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function Ae(){c.value=""}const Pe=Ie(()=>c.value?F.value.filter(l=>l.title.toLowerCase().includes(c.value.toLowerCase())||l.url.toLowerCase().includes(c.value.toLowerCase())):F.value);ot(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),st(()=>g(null,null,function*(){const l=yield dt();d.value=l.data,d.value.length&&(w.value=d.value[0],z());const e=yield ct();_.value=e.data.filter(i=>i.position==="left"),S.value=e.data.filter(i=>i.position==="right");const n=yield vt();be.value=n.data;const r=localStorage.getItem("nav_background");if(r){const i=document.querySelector(".home-container");i&&!i.style.backgroundImage.includes(r)&&(i.style.backgroundImage=`url(${r})`,i.style.backgroundSize="cover",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",i.style.backgroundAttachment="fixed")}Ne(),document.addEventListener("click",ge)})),nt(()=>{document.removeEventListener("click",ge)});function Re(l,e=null){return g(this,null,function*(){e?(w.value=e,b.value=l):(w.value=l,b.value=null),z()})}const Te=u({});function z(){return g(this,null,function*(){var e;if(!w.value)return;const l=yield ue(w.value.id,(e=b.value)==null?void 0:e.id);F.value=l.data})}function ae(){return g(this,null,function*(){const l={};for(const e of d.value){const n=yield ue(e.id,null),r=`${e.id}_null`;if(l[r]=n.data,e.subMenus&&e.subMenus.length)for(const i of e.subMenus){const M=yield ue(e.id,i.id),a=`${e.id}_${i.id}`;l[a]=M.data}}Te.value=l})}function ke(){return g(this,null,function*(){if(c.value.trim())if(ee.value.name==="site"){let l=!1;for(const e of d.value){const n=yield ue(e.id),r=n.data.find(i=>i.title.toLowerCase().includes(c.value.toLowerCase())||i.url.toLowerCase().includes(c.value.toLowerCase()));if(r){w.value=e,F.value=n.data,setTimeout(()=>{const i=document.querySelector(`[data-card-id='${r.id}']`);i&&i.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=ee.value.url(c.value);window.open(l,"_blank")}})}function De(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function ze(){return g(this,null,function*(){de.value=!0,f.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:r}=JSON.parse(l);if(Date.now()<n&&r){localStorage.setItem("token",r),V.value=e,K.value=!0,$.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}$.value=1})}function oe(){de.value=!1,$.value=1,V.value="",J.value="",f.value="",Q.value=[],x.value=!1}function Ne(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:r}=JSON.parse(l);Date.now()<n?(V.value=e,K.value=!0,r&&localStorage.setItem("token",r)):localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}}function ye(){return g(this,null,function*(){if(!V.value){f.value="请输入密码";return}x.value=!0,f.value="";try{const l=yield Ee("admin",V.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(K.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:V.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");$.value=2}catch(l){f.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{x.value=!1}})}function Fe(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),V.value="",K.value=!1,$.value=1}function qe(){return g(this,null,function*(){var e,n;const l=J.value.split(`
`).map(r=>r.trim()).filter(r=>r.length>0);if(l.length===0){f.value="请输入至少一个网址";return}x.value=!0,f.value="";try{const r=yield ht(l);Q.value=r.data.data.map(i=>ie(ne({},i),{selected:!0})),$.value=3}catch(r){f.value=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"解析失败，请重试"}finally{x.value=!1}})}function Ke(){return g(this,null,function*(){var e,n,r;const l=Q.value.filter(i=>i.selected);if(l.length===0){f.value="请至少选择一个网站";return}x.value=!0,f.value="";try{const i=l.map(M=>({title:M.title,url:M.url,logo:M.logo,description:M.description}));yield pt(w.value.id,((e=b.value)==null?void 0:e.id)||null,i),alert(`成功添加 ${l.length} 个网站！`),oe(),yield z()}catch(i){f.value=((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"添加失败，请重试"}finally{x.value=!1}})}function Oe(){return g(this,null,function*(){if(!Z.value){Z.value=!0;try{const e=(yield bt()).data.url;let n=document.getElementById("dynamic-bg-style");n||(n=document.createElement("style"),n.id="dynamic-bg-style",document.head.appendChild(n)),n.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{Z.value=!1}}})}function je(){return g(this,null,function*(){O.value=!0,W.value="",C.value=""})}function we(){return g(this,null,function*(){if(!W.value){C.value="请输入密码";return}A.value=!0,C.value="";try{const l=yield Ee("admin",W.value);localStorage.setItem("token",l.data.token),U.value=!0,O.value=!1,A.value=!1}catch(l){C.value="密码错误",A.value=!1}})}function Ge(){U.value=!1,E.value=[],q.value=!1,X.value=null,Y.value=null}function He(){q.value=!1,X.value=null,Y.value=null}function Je(l){var n,r;const e=E.value.findIndex(i=>i.id===l.id);e>-1?(E.value.splice(e,1),E.value.length===0&&(q.value=!1)):(E.value.push(l),q.value||(q.value=!0,X.value=((n=w.value)==null?void 0:n.id)||null,Y.value=((r=b.value)==null?void 0:r.id)||null))}function _e(l,e=2e3){fe.value=l,ce.value=!0,setTimeout(()=>{ce.value=!1},e)}function Ce(l,e){return g(this,null,function*(){var n,r;if(E.value.length!==0)try{const i=E.value.map(a=>({id:a.id,menu_id:l,sub_menu_id:e}));for(const a of i){const I=E.value.find(L=>L.id===a.id);yield Le(a.id,ie(ne({},I),{menu_id:a.menu_id,sub_menu_id:a.sub_menu_id}))}const M=E.value.length;_e(`已移动 ${M} 个卡片！`),E.value=[],q.value=!1,yield z()}catch(i){_e(`移动失败：${((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||i.message}`)}})}function Qe(l,e,n){return g(this,null,function*(){var i,M;const r=l.map((a,I)=>({id:a,order:I,menu_id:e,sub_menu_id:n}));try{yield gt(r),U.value?yield ae():yield z()}catch(a){alert("保存失败："+(((M=(i=a.response)==null?void 0:i.data)==null?void 0:M.error)||a.message)),U.value?yield ae():yield z()}})}function We(l){return g(this,null,function*(){var e,n;if(confirm(`确定要删除「${l.title}」吗？`))try{yield ft(l.id),alert("删除成功"),U.value?yield ae():yield z()}catch(r){alert("删除失败："+(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||r.message))}})}function Xe(l){le.value=l,y.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},C.value="",ve.value=!0}function se(){ve.value=!1,le.value=null,y.value={title:"",url:"",logo_url:"",desc:""},C.value=""}function Ye(){return g(this,null,function*(){var l,e;if(!y.value.title.trim()){C.value="请输入标题";return}if(!y.value.url.trim()){C.value="请输入网址";return}A.value=!0,C.value="";try{yield Le(le.value.id,ie(ne({},le.value),{title:y.value.title,url:y.value.url,logo_url:y.value.logo_url,desc:y.value.desc})),alert("修改成功"),se(),U.value?yield ae():yield z()}catch(n){C.value="修改失败："+(((e=(l=n.response)==null?void 0:l.data)==null?void 0:e.error)||n.message)}finally{A.value=!1}})}return(l,e)=>{var n,r,i,M;return s(),o("div",Mt,[t("div",xt,[N(Ct,{menus:d.value,activeId:(n=w.value)==null?void 0:n.id,activeSubMenuId:(r=b.value)==null?void 0:r.id,onSelect:Re},null,8,["menus","activeId","activeSubMenuId"])]),t("div",It,[t("div",St,[t("div",$t,[(s(),o(R,null,T(he,a=>t("button",{key:a.name,class:H(["engine-btn",{active:ee.value.name===a.name}]),onClick:I=>Ve(a)},h(a.label),11,Et)),64))]),t("div",Lt,[m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),type:"text",placeholder:ee.value.placeholder,class:"search-input",onKeyup:pe(ke,["enter"])},null,40,Bt),[[B,c.value]]),c.value?(s(),o("button",{key:0,class:"clear-btn",onClick:Ae,"aria-label":"清空",title:"clear"},e[22]||(e[22]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):v("",!0),t("button",{onClick:ke,class:"search-btn",title:"search"},e[23]||(e[23]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),_.value.length?(s(),o("div",Ut,[(s(!0),o(R,null,T(_.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,At)],8,Vt))),128))])):v("",!0),S.value.length?(s(),o("div",Pt,[(s(!0),o(R,null,T(S.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Tt)],8,Rt))),128))])):v("",!0),U.value&&q.value?(s(),o("div",Dt,[t("div",zt,[t("h4",null,"移动到 ("+h(E.value.length)+")",1),t("button",{onClick:He,class:"cancel-move-btn"},"×")]),t("div",Nt,[(s(!0),o(R,null,T(d.value,a=>(s(),o("div",{key:a.id,class:"target-menu-group"},[t("button",{onClick:I=>Ce(a.id,null),class:H(["target-menu-btn",{active:X.value===a.id&&Y.value===null}])},h(a.name),11,Ft),a.subMenus&&a.subMenus.length?(s(),o("div",qt,[(s(!0),o(R,null,T(a.subMenus,I=>(s(),o("button",{key:I.id,onClick:L=>Ce(a.id,I.id),class:H(["target-submenu-btn",{active:X.value===a.id&&Y.value===I.id}])}," ⤷ "+h(I.name),11,Kt))),128))])):v("",!0)]))),128))])])):v("",!0),N(it(p),{cards:Pe.value,editMode:U.value,selectedCards:E.value,categoryId:(i=w.value)==null?void 0:i.id,subCategoryId:(M=b.value)==null?void 0:M.id,onCardsReordered:Qe,onEditCard:Xe,onDeleteCard:We,onToggleCardSelection:Je},null,8,["cards","editMode","selectedCards","categoryId","subCategoryId"]),t("div",{class:"fab-container",onClick:e[1]||(e[1]=te(()=>{},["stop"]))},[N(G,{name:"fab-item"},{default:j(()=>[m(t("button",{onClick:Oe,class:"change-bg-btn",title:"切换背景",disabled:Z.value},[Z.value?(s(),o("svg",Gt,e[25]||(e[25]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(s(),o("svg",jt,e[24]||(e[24]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,Ot),[[re,P.value]])]),_:1}),N(G,{name:"fab-item"},{default:j(()=>[w.value?m((s(),o("button",{key:0,onClick:ze,class:"batch-add-btn",title:"批量添加网站"},e[26]||(e[26]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[re,P.value]]):v("",!0)]),_:1}),N(G,{name:"fab-item"},{default:j(()=>[U.value?m((s(),o("button",{key:0,onClick:Ge,class:"exit-edit-btn",title:"退出编辑模式"},e[27]||(e[27]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[re,P.value]]):v("",!0)]),_:1}),N(G,{name:"fab-item"},{default:j(()=>[U.value?v("",!0):m((s(),o("button",{key:0,onClick:je,class:"edit-mode-btn",title:"编辑模式"},e[28]||(e[28]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[re,P.value]])]),_:1}),t("button",{onClick:Ue,class:"fab-toggle-btn",title:"更多功能"},[N(G,{name:"fab-icon",mode:"out-in"},{default:j(()=>[P.value?(s(),o("svg",Jt,e[30]||(e[30]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(s(),o("svg",Ht,e[29]||(e[29]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),de.value?(s(),o("div",{key:3,class:"modal-overlay",onClick:oe},[t("div",{class:"modal-content batch-modal",onClick:e[7]||(e[7]=te(()=>{},["stop"]))},[t("div",Qt,[t("h3",null,h($.value===1?"验证密码":$.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:oe,class:"close-btn"},e[31]||(e[31]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Wt,[$.value===1?(s(),o("div",Xt,[e[33]||(e[33]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>V.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:pe(ye,["enter"])},null,544),[[B,V.value]]),t("div",Yt,[t("label",null,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>K.value=a)},null,512),[[Se,K.value]]),e[32]||(e[32]=t("span",null,"记住密码（2小时）",-1))])]),f.value?(s(),o("p",Zt,h(f.value),1)):v("",!0),t("div",el,[t("button",{onClick:oe,class:"btn btn-cancel"},"取消"),t("button",{onClick:ye,class:"btn btn-primary",disabled:x.value},h(x.value?"验证中...":"确认"),9,tl)])])):v("",!0),$.value===2?(s(),o("div",ll,[e[34]||(e[34]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),m(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>J.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[B,J.value]]),f.value?(s(),o("p",al,h(f.value),1)):v("",!0),t("div",ol,[t("button",{onClick:Fe,class:"btn btn-cancel"},"上一步"),t("button",{onClick:qe,class:"btn btn-primary",disabled:x.value||!J.value.trim()},h(x.value?"解析中...":"下一步"),9,sl)])])):v("",!0),$.value===3?(s(),o("div",nl,[e[38]||(e[38]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",il,[(s(!0),o(R,null,T(Q.value,(a,I)=>(s(),o("div",{key:I,class:"batch-preview-item"},[m(t("input",{type:"checkbox","onUpdate:modelValue":L=>a.selected=L,id:`card-${I}`},null,8,rl),[[Se,a.selected]]),t("div",ul,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[5]||(e[5]=L=>L.target.src="/default-favicon.png")},null,40,dl),t("div",cl,[t("div",vl,[e[35]||(e[35]=t("label",null,"标题：",-1)),m(t("input",{type:"text","onUpdate:modelValue":L=>a.title=L,class:"batch-edit-input"},null,8,hl),[[B,a.title]])]),t("div",pl,[e[36]||(e[36]=t("label",null,"Logo：",-1)),m(t("input",{type:"text","onUpdate:modelValue":L=>a.logo=L,class:"batch-edit-input"},null,8,bl),[[B,a.logo]])]),t("div",fl,[e[37]||(e[37]=t("label",null,"描述：",-1)),m(t("textarea",{"onUpdate:modelValue":L=>a.description=L,class:"batch-edit-textarea",rows:"2"},null,8,gl),[[B,a.description]])]),t("p",ml,h(a.url),1),a.success?v("",!0):(s(),o("p",kl,"⚠️ "+h(a.error),1))])])]))),128))]),f.value?(s(),o("p",yl,h(f.value),1)):v("",!0),t("div",wl,[t("button",{onClick:e[6]||(e[6]=a=>$.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Ke,class:"btn btn-primary",disabled:x.value||me.value===0},h(x.value?"添加中...":`添加 (${me.value})`),9,_l)])])):v("",!0)])])])):v("",!0),t("footer",Cl,[t("div",Ml,[t("button",{onClick:e[8]||(e[8]=a=>D.value=!0),class:"friend-link-btn"},e[39]||(e[39]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),$e(" 友情链接 ")])),e[40]||(e[40]=t("p",{class:"copyright"},[$e("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),O.value?(s(),o("div",{key:4,class:"modal-overlay",onClick:e[13]||(e[13]=a=>O.value=!1)},[t("div",{class:"modal-content",onClick:e[12]||(e[12]=te(()=>{},["stop"]))},[t("div",xl,[e[42]||(e[42]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[9]||(e[9]=a=>O.value=!1),class:"close-btn"},e[41]||(e[41]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Il,[e[43]||(e[43]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>W.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:pe(we,["enter"]),style:{width:"100%"}},null,544),[[B,W.value]]),C.value?(s(),o("p",Sl,h(C.value),1)):v("",!0),t("div",$l,[t("button",{onClick:e[11]||(e[11]=a=>O.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:we,class:"btn btn-primary",disabled:A.value},h(A.value?"验证中...":"确认"),9,El)])])])])):v("",!0),D.value?(s(),o("div",{key:5,class:"modal-overlay",onClick:e[16]||(e[16]=a=>D.value=!1)},[t("div",{class:"modal-content",onClick:e[15]||(e[15]=te(()=>{},["stop"]))},[t("div",Ll,[e[45]||(e[45]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[14]||(e[14]=a=>D.value=!1),class:"close-btn"},e[44]||(e[44]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Bl,[t("div",Ul,[(s(!0),o(R,null,T(be.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",Al,[a.logo?(s(),o("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:De},null,40,Pl)):(s(),o("div",Rl,h(a.title.charAt(0)),1))]),t("div",Tl,[t("h4",null,h(a.title),1)])],8,Vl))),128))])])])])):v("",!0),ve.value?(s(),o("div",{key:6,class:"modal-overlay",onClick:se},[t("div",{class:"modal-content",onClick:e[21]||(e[21]=te(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[47]||(e[47]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:se,class:"close-btn"},e[46]||(e[46]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Dl,[t("div",zl,[t("div",Nl,[e[48]||(e[48]=t("label",null,"标题",-1)),m(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>y.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[B,y.value.title]])]),t("div",Fl,[e[49]||(e[49]=t("label",null,"网址",-1)),m(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>y.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[B,y.value.url]])]),t("div",ql,[e[50]||(e[50]=t("label",null,"Logo 链接",-1)),m(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>y.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[B,y.value.logo_url]])]),t("div",Kl,[e[51]||(e[51]=t("label",null,"描述",-1)),m(t("textarea",{"onUpdate:modelValue":e[20]||(e[20]=a=>y.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[B,y.value.desc]])]),C.value?(s(),o("p",Ol,h(C.value),1)):v("",!0),t("div",jl,[t("button",{onClick:se,class:"btn btn-cancel"},"取消"),t("button",{onClick:Ye,class:"btn btn-primary",disabled:A.value},h(A.value?"保存中...":"保存"),9,Gl)])])])])])):v("",!0),N(G,{name:"toast"},{default:j(()=>[ce.value?(s(),o("div",Hl,h(fe.value),1)):v("",!0)]),_:1})])}}},Zl=Be(Jl,[["__scopeId","data-v-bf56d910"]]);export{Zl as default};
