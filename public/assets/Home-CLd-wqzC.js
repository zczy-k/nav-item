const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-0ZxmNXo9.js","assets/index-DyWFyNvT.js","assets/CardGrid-BUvU2NqQ.css"])))=>i.map(i=>d[i]);
var st=Object.defineProperty,nt=Object.defineProperties;var rt=Object.getOwnPropertyDescriptors;var Se=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var Ie=(w,g,d)=>g in w?st(w,g,{enumerable:!0,configurable:!0,writable:!0,value:d}):w[g]=d,ae=(w,g)=>{for(var d in g||(g={}))it.call(g,d)&&Ie(w,d,g[d]);if(Se)for(var d of Se(g))ut.call(g,d)&&Ie(w,d,g[d]);return w},oe=(w,g)=>nt(w,rt(g));var y=(w,g,d)=>new Promise((_,b)=>{var q=E=>{try{M(d.next(E))}catch(F){b(F)}},c=E=>{try{M(d.throw(E))}catch(F){b(F)}},M=E=>E.done?_(E.value):Promise.resolve(E.value).then(q,c);M((d=d.apply(w,g)).next())});import{_ as Ue,r as i,c as o,F as z,a as N,o as s,b as t,d as v,t as h,n as Q,e as $e,f as dt,g as ct,h as vt,i as R,w as f,v as U,j as be,u as ht,k as gt,l as K,T as O,m as se,p as Ee,q as Be,s as pt,x as ne}from"./index-DyWFyNvT.js";import{g as bt,a as ft,b as mt,c as ce,l as Le,d as kt,e as yt,u as fe,f as wt,h as _t,i as Ct}from"./api-BbZSgGBc.js";const Mt={class:"menu-bar"},xt=["onMouseenter","onMouseleave"],St=["onClick"],It=["onClick"],$t={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(w){const g=i(null);function d(b){g.value=b}function _(b){setTimeout(()=>{g.value===b&&(g.value=null)},100)}return(b,q)=>(s(),o("nav",Mt,[(s(!0),o(z,null,N(w.menus,c=>(s(),o("div",{key:c.id,class:"menu-item",onMouseenter:M=>d(c.id),onMouseleave:M=>_(c.id)},[t("button",{onClick:M=>b.$emit("select",c),class:Q({active:c.id===w.activeId})},h(c.name),11,St),c.subMenus&&c.subMenus.length>0?(s(),o("div",{key:0,class:Q(["sub-menu",{show:g.value===c.id}])},[(s(!0),o(z,null,N(c.subMenus,M=>(s(),o("button",{key:M.id,onClick:E=>b.$emit("select",M,c),class:Q([{active:M.id===w.activeSubMenuId},"sub-menu-item"])},h(M.name),11,It))),128))],2)):v("",!0)],40,xt))),128))]))}},Et=Ue($t,[["__scopeId","data-v-16a94230"]]),Bt={class:"home-container"},Lt={class:"menu-bar-fixed"},Ut={class:"search-section"},Vt={class:"search-box-wrapper"},Dt={class:"search-engine-select"},Pt=["onClick"],At={class:"search-container"},Tt=["placeholder"],Rt={key:0,class:"ad-space-fixed left-ad-fixed"},zt=["href"],Nt=["src"],Ft={key:1,class:"ad-space-fixed right-ad-fixed"},qt=["href"],Kt=["src"],Ot={key:2,class:"move-target-panel"},jt={class:"move-target-header"},Gt={key:0},Ht={key:1},Jt={class:"move-target-list"},Qt=["onClick"],Wt={key:0,class:"target-submenu-list"},Xt=["onClick"],Yt=["disabled"],Zt={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},el={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},tl={class:"batch-count"},ll={key:"plus",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},al={key:"close",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},ol={class:"modal-header"},sl={class:"modal-body"},nl={key:0,class:"batch-step"},rl={class:"remember-password-wrapper"},il={key:0,class:"batch-error"},ul={class:"batch-actions"},dl=["disabled"],cl={key:1,class:"batch-step"},vl={key:0,class:"batch-error"},hl={class:"batch-actions"},gl=["disabled"],pl={key:2,class:"batch-step"},bl={class:"batch-preview-list"},fl=["onUpdate:modelValue","id"],ml={class:"batch-card-preview"},kl=["src","alt"],yl={class:"batch-card-info"},wl={class:"batch-edit-field"},_l=["onUpdate:modelValue"],Cl={class:"batch-edit-field"},Ml=["onUpdate:modelValue"],xl={class:"batch-edit-field"},Sl=["onUpdate:modelValue"],Il={class:"batch-card-url"},$l={key:0,class:"batch-card-warning"},El={key:0,class:"batch-error"},Bl={class:"batch-actions"},Ll=["disabled"],Ul={class:"footer"},Vl={class:"footer-content"},Dl={class:"modal-header"},Pl={class:"modal-body"},Al={key:0,class:"batch-error"},Tl={class:"batch-actions",style:{"margin-top":"20px"}},Rl=["disabled"],zl={class:"modal-header"},Nl={class:"modal-body"},Fl={class:"friend-links-grid"},ql=["href"],Kl={class:"friend-link-logo"},Ol=["src","alt"],jl={key:1,class:"friend-link-placeholder"},Gl={class:"friend-link-info"},Hl={class:"modal-body"},Jl={class:"edit-card-form"},Ql={class:"form-group"},Wl={class:"form-group"},Xl={class:"form-group"},Yl={class:"form-group"},Zl={key:0,class:"batch-error"},ea={class:"batch-actions",style:{"margin-top":"20px"}},ta=["disabled"],la={key:0,class:"toast-notification"},aa={__name:"Home",setup(w){const g=gt(()=>pt(()=>import("./CardGrid-0ZxmNXo9.js"),__vite__mapDeps([0,1,2]))),d=i([]),_=i(null),b=i(null),q=i([]),c=i(""),M=i([]),E=i([]),F=i(!1),me=i([]),ve=i(!1),B=i(1),P=i(""),W=i(""),$=i(!1),m=i(""),X=i([]),j=i(!1),L=i(!1),Y=i(""),G=i(!1),A=i(!1),I=i(""),V=i(null),H=i(null),J=i(null),x=i([]),Z=i(!1),ke=i(""),he=i(!1),ge=i(!1),re=i(null),C=i({title:"",url:"",logo_url:"",desc:""}),D=i(!1);function Ve(){D.value=!D.value}function ye(){D.value&&(D.value=!1)}const ee=i(!1),we=$e(()=>X.value.filter(l=>l.selected).length),pe=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],te=i((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=pe.find(n=>n.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return pe[0]})());function De(l){te.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function Pe(){c.value=""}const Ae=$e(()=>c.value?q.value.filter(l=>l.title.toLowerCase().includes(c.value.toLowerCase())||l.url.toLowerCase().includes(c.value.toLowerCase())):q.value);dt(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),ct(()=>y(null,null,function*(){const l=yield bt();d.value=l.data,d.value.length&&(_.value=d.value[0],T());const e=yield ft();M.value=e.data.filter(r=>r.position==="left"),E.value=e.data.filter(r=>r.position==="right");const n=yield mt();me.value=n.data;const u=localStorage.getItem("nav_background");if(u){const r=document.querySelector(".home-container");r&&!r.style.backgroundImage.includes(u)&&(r.style.backgroundImage=`url(${u})`,r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",r.style.backgroundAttachment="fixed")}Fe(),document.addEventListener("click",ye)})),vt(()=>{document.removeEventListener("click",ye)});function Te(l,e=null){return y(this,null,function*(){e?(_.value=e,b.value=l):(_.value=l,b.value=null),T()})}const Re=i({});function T(){return y(this,null,function*(){var e;if(!_.value)return;const l=yield ce(_.value.id,(e=b.value)==null?void 0:e.id);q.value=l.data})}function ie(){return y(this,null,function*(){const l={};for(const e of d.value){const n=yield ce(e.id,null),u=`${e.id}_null`;if(l[u]=n.data,e.subMenus&&e.subMenus.length)for(const r of e.subMenus){const S=yield ce(e.id,r.id),a=`${e.id}_${r.id}`;l[a]=S.data}}Re.value=l})}function _e(){return y(this,null,function*(){if(c.value.trim())if(te.value.name==="site"){let l=!1;for(const e of d.value){const n=yield ce(e.id),u=n.data.find(r=>r.title.toLowerCase().includes(c.value.toLowerCase())||r.url.toLowerCase().includes(c.value.toLowerCase()));if(u){_.value=e,q.value=n.data,setTimeout(()=>{const r=document.querySelector(`[data-card-id='${u.id}']`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=te.value.url(c.value);window.open(l,"_blank")}})}function ze(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function Ne(){return y(this,null,function*(){ve.value=!0,m.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:u}=JSON.parse(l);if(Date.now()<n&&u){localStorage.setItem("token",u),P.value=e,j.value=!0,B.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}B.value=1})}function ue(){ve.value=!1,B.value=1,P.value="",W.value="",m.value="",X.value=[],$.value=!1}function Fe(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:u}=JSON.parse(l);Date.now()<n?(P.value=e,j.value=!0,u&&localStorage.setItem("token",u)):localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}}function Ce(){return y(this,null,function*(){if(!P.value){m.value="请输入密码";return}$.value=!0,m.value="";try{const l=yield Le("admin",P.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(j.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:P.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");B.value=2}catch(l){m.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{$.value=!1}})}function qe(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),P.value="",j.value=!1,B.value=1}function Ke(){return y(this,null,function*(){var e,n;const l=W.value.split(`
`).map(u=>u.trim()).filter(u=>u.length>0);if(l.length===0){m.value="请输入至少一个网址";return}$.value=!0,m.value="";try{const u=yield kt(l);X.value=u.data.data.map(r=>oe(ae({},r),{selected:!0})),B.value=3}catch(u){m.value=((n=(e=u.response)==null?void 0:e.data)==null?void 0:n.error)||"解析失败，请重试"}finally{$.value=!1}})}function Oe(){return y(this,null,function*(){var e,n,u;const l=X.value.filter(r=>r.selected);if(l.length===0){m.value="请至少选择一个网站";return}$.value=!0,m.value="";try{const r=l.map(S=>({title:S.title,url:S.url,logo:S.logo,description:S.description}));yield yt(_.value.id,((e=b.value)==null?void 0:e.id)||null,r),alert(`成功添加 ${l.length} 个网站！`),ue(),yield T()}catch(r){m.value=((u=(n=r.response)==null?void 0:n.data)==null?void 0:u.error)||"添加失败，请重试"}finally{$.value=!1}})}function je(){return y(this,null,function*(){if(!ee.value){ee.value=!0;try{const e=(yield wt()).data.url;let n=document.getElementById("dynamic-bg-style");n||(n=document.createElement("style"),n.id="dynamic-bg-style",document.head.appendChild(n)),n.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{ee.value=!1}}})}function Ge(){return y(this,null,function*(){G.value=!0,Y.value="",I.value=""})}function Me(){return y(this,null,function*(){if(!Y.value){I.value="请输入密码";return}A.value=!0,I.value="";try{const l=yield Le("admin",Y.value);localStorage.setItem("token",l.data.token),L.value=!0,G.value=!1,A.value=!1}catch(l){I.value="密码错误",A.value=!1}})}function He(){L.value=!1,V.value=null,x.value=[],Z.value=!1,H.value=null,J.value=null}function Je(l){var e,n;V.value=l,H.value=((e=_.value)==null?void 0:e.id)||null,J.value=((n=b.value)==null?void 0:n.id)||null}function Qe(){V.value=null}function We(){V.value=null,Z.value=!1,H.value=null,J.value=null}function Xe(l){const e=x.value.findIndex(n=>n.id===l.id);e>-1?x.value.splice(e,1):x.value.push(l)}function Ye(){var l,e;if(x.value.length===0){le("请先选择要移动的卡片");return}Z.value=!0,H.value=((l=_.value)==null?void 0:l.id)||null,J.value=((e=b.value)==null?void 0:e.id)||null}function le(l,e=2e3){ke.value=l,he.value=!0,setTimeout(()=>{he.value=!1},e)}function xe(l,e){return y(this,null,function*(){var u,r,S,a;if(x.value.length>0){try{const p=x.value.map(k=>({id:k.id,menu_id:l,sub_menu_id:e}));for(const k of p){const at=x.value.find(ot=>ot.id===k.id);yield fe(k.id,oe(ae({},at),{menu_id:k.menu_id,sub_menu_id:k.sub_menu_id}))}le(`已移动 ${x.value.length} 个卡片！`),x.value=[],Z.value=!1,yield T()}catch(p){le(`批量移动失败：${((r=(u=p.response)==null?void 0:u.data)==null?void 0:r.error)||p.message}`)}return}if(!V.value)return;const n=V.value.title;try{yield fe(V.value.id,oe(ae({},V.value),{menu_id:l,sub_menu_id:e})),le(`「${n}」移动成功！`),yield T(),V.value=null}catch(p){le(`移动失败：${((a=(S=p.response)==null?void 0:S.data)==null?void 0:a.error)||p.message}`)}})}function Ze(l,e,n){return y(this,null,function*(){var r,S;const u=l.map((a,p)=>({id:a,order:p,menu_id:e,sub_menu_id:n}));try{yield Ct(u),L.value?yield ie():yield T()}catch(a){alert("保存失败："+(((S=(r=a.response)==null?void 0:r.data)==null?void 0:S.error)||a.message)),L.value?yield ie():yield T()}})}function et(l){return y(this,null,function*(){var e,n;if(confirm(`确定要删除「${l.title}」吗？`))try{yield _t(l.id),alert("删除成功"),L.value?yield ie():yield T()}catch(u){alert("删除失败："+(((n=(e=u.response)==null?void 0:e.data)==null?void 0:n.error)||u.message))}})}function tt(l){re.value=l,C.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},I.value="",ge.value=!0}function de(){ge.value=!1,re.value=null,C.value={title:"",url:"",logo_url:"",desc:""},I.value=""}function lt(){return y(this,null,function*(){var l,e;if(!C.value.title.trim()){I.value="请输入标题";return}if(!C.value.url.trim()){I.value="请输入网址";return}A.value=!0,I.value="";try{yield fe(re.value.id,oe(ae({},re.value),{title:C.value.title,url:C.value.url,logo_url:C.value.logo_url,desc:C.value.desc})),alert("修改成功"),de(),L.value?yield ie():yield T()}catch(n){I.value="修改失败："+(((e=(l=n.response)==null?void 0:l.data)==null?void 0:e.error)||n.message)}finally{A.value=!1}})}return(l,e)=>{var n,u,r,S;return s(),o("div",Bt,[t("div",Lt,[R(Et,{menus:d.value,activeId:(n=_.value)==null?void 0:n.id,activeSubMenuId:(u=b.value)==null?void 0:u.id,onSelect:Te},null,8,["menus","activeId","activeSubMenuId"])]),t("div",Ut,[t("div",Vt,[t("div",Dt,[(s(),o(z,null,N(pe,a=>t("button",{key:a.name,class:Q(["engine-btn",{active:te.value.name===a.name}]),onClick:p=>De(a)},h(a.label),11,Pt)),64))]),t("div",At,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),type:"text",placeholder:te.value.placeholder,class:"search-input",onKeyup:be(_e,["enter"])},null,40,Tt),[[U,c.value]]),c.value?(s(),o("button",{key:0,class:"clear-btn",onClick:Pe,"aria-label":"清空",title:"clear"},e[22]||(e[22]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):v("",!0),t("button",{onClick:_e,class:"search-btn",title:"search"},e[23]||(e[23]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),M.value.length?(s(),o("div",Rt,[(s(!0),o(z,null,N(M.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Nt)],8,zt))),128))])):v("",!0),E.value.length?(s(),o("div",Ft,[(s(!0),o(z,null,N(E.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Kt)],8,qt))),128))])):v("",!0),L.value&&(V.value||Z.value)?(s(),o("div",Ot,[t("div",jt,[x.value.length>0?(s(),o("h4",Gt,"批量移动 ("+h(x.value.length)+")",1)):(s(),o("h4",Ht,"移动到：")),t("button",{onClick:We,class:"cancel-move-btn"},"×")]),t("div",Jt,[(s(!0),o(z,null,N(d.value,a=>(s(),o("div",{key:a.id,class:"target-menu-group"},[t("button",{onClick:p=>xe(a.id,null),class:Q(["target-menu-btn",{active:H.value===a.id&&J.value===null}])},h(a.name),11,Qt),a.subMenus&&a.subMenus.length?(s(),o("div",Wt,[(s(!0),o(z,null,N(a.subMenus,p=>(s(),o("button",{key:p.id,onClick:k=>xe(a.id,p.id),class:Q(["target-submenu-btn",{active:H.value===a.id&&J.value===p.id}])}," ⤷ "+h(p.name),11,Xt))),128))])):v("",!0)]))),128))])])):v("",!0),R(ht(g),{cards:Ae.value,editMode:L.value,selectedCards:x.value,categoryId:(r=_.value)==null?void 0:r.id,subCategoryId:(S=b.value)==null?void 0:S.id,onCardsReordered:Ze,onEditCard:tt,onDeleteCard:et,onCardDragStart:Je,onCardDragEnd:Qe,onToggleCardSelection:Xe},null,8,["cards","editMode","selectedCards","categoryId","subCategoryId"]),t("div",{class:"fab-container",onClick:e[1]||(e[1]=se(()=>{},["stop"]))},[R(O,{name:"fab-item"},{default:K(()=>[f(t("button",{onClick:je,class:"change-bg-btn",title:"切换背景",disabled:ee.value},[ee.value?(s(),o("svg",el,e[25]||(e[25]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(s(),o("svg",Zt,e[24]||(e[24]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,Yt),[[ne,D.value]])]),_:1}),R(O,{name:"fab-item"},{default:K(()=>[_.value?f((s(),o("button",{key:0,onClick:Ne,class:"batch-add-btn",title:"批量添加网站"},e[26]||(e[26]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[ne,D.value]]):v("",!0)]),_:1}),R(O,{name:"fab-item"},{default:K(()=>[L.value&&x.value.length>0?f((s(),o("button",{key:0,onClick:Ye,class:"batch-move-btn",title:"批量移动"},[e[27]||(e[27]=t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})],-1)),t("span",tl,h(x.value.length),1)],512)),[[ne,D.value]]):v("",!0)]),_:1}),R(O,{name:"fab-item"},{default:K(()=>[L.value?f((s(),o("button",{key:0,onClick:He,class:"exit-edit-btn",title:"退出编辑模式"},e[28]||(e[28]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[ne,D.value]]):v("",!0)]),_:1}),R(O,{name:"fab-item"},{default:K(()=>[L.value?v("",!0):f((s(),o("button",{key:0,onClick:Ge,class:"edit-mode-btn",title:"编辑模式"},e[29]||(e[29]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[ne,D.value]])]),_:1}),t("button",{onClick:Ve,class:"fab-toggle-btn",title:"更多功能"},[R(O,{name:"fab-icon",mode:"out-in"},{default:K(()=>[D.value?(s(),o("svg",al,e[31]||(e[31]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(s(),o("svg",ll,e[30]||(e[30]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),ve.value?(s(),o("div",{key:3,class:"modal-overlay",onClick:ue},[t("div",{class:"modal-content batch-modal",onClick:e[7]||(e[7]=se(()=>{},["stop"]))},[t("div",ol,[t("h3",null,h(B.value===1?"验证密码":B.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:ue,class:"close-btn"},e[32]||(e[32]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",sl,[B.value===1?(s(),o("div",nl,[e[34]||(e[34]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>P.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:be(Ce,["enter"])},null,544),[[U,P.value]]),t("div",rl,[t("label",null,[f(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>j.value=a)},null,512),[[Ee,j.value]]),e[33]||(e[33]=t("span",null,"记住密码（2小时）",-1))])]),m.value?(s(),o("p",il,h(m.value),1)):v("",!0),t("div",ul,[t("button",{onClick:ue,class:"btn btn-cancel"},"取消"),t("button",{onClick:Ce,class:"btn btn-primary",disabled:$.value},h($.value?"验证中...":"确认"),9,dl)])])):v("",!0),B.value===2?(s(),o("div",cl,[e[35]||(e[35]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),f(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>W.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[U,W.value]]),m.value?(s(),o("p",vl,h(m.value),1)):v("",!0),t("div",hl,[t("button",{onClick:qe,class:"btn btn-cancel"},"上一步"),t("button",{onClick:Ke,class:"btn btn-primary",disabled:$.value||!W.value.trim()},h($.value?"解析中...":"下一步"),9,gl)])])):v("",!0),B.value===3?(s(),o("div",pl,[e[39]||(e[39]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",bl,[(s(!0),o(z,null,N(X.value,(a,p)=>(s(),o("div",{key:p,class:"batch-preview-item"},[f(t("input",{type:"checkbox","onUpdate:modelValue":k=>a.selected=k,id:`card-${p}`},null,8,fl),[[Ee,a.selected]]),t("div",ml,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[5]||(e[5]=k=>k.target.src="/default-favicon.png")},null,40,kl),t("div",yl,[t("div",wl,[e[36]||(e[36]=t("label",null,"标题：",-1)),f(t("input",{type:"text","onUpdate:modelValue":k=>a.title=k,class:"batch-edit-input"},null,8,_l),[[U,a.title]])]),t("div",Cl,[e[37]||(e[37]=t("label",null,"Logo：",-1)),f(t("input",{type:"text","onUpdate:modelValue":k=>a.logo=k,class:"batch-edit-input"},null,8,Ml),[[U,a.logo]])]),t("div",xl,[e[38]||(e[38]=t("label",null,"描述：",-1)),f(t("textarea",{"onUpdate:modelValue":k=>a.description=k,class:"batch-edit-textarea",rows:"2"},null,8,Sl),[[U,a.description]])]),t("p",Il,h(a.url),1),a.success?v("",!0):(s(),o("p",$l,"⚠️ "+h(a.error),1))])])]))),128))]),m.value?(s(),o("p",El,h(m.value),1)):v("",!0),t("div",Bl,[t("button",{onClick:e[6]||(e[6]=a=>B.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Oe,class:"btn btn-primary",disabled:$.value||we.value===0},h($.value?"添加中...":`添加 (${we.value})`),9,Ll)])])):v("",!0)])])])):v("",!0),t("footer",Ul,[t("div",Vl,[t("button",{onClick:e[8]||(e[8]=a=>F.value=!0),class:"friend-link-btn"},e[40]||(e[40]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),Be(" 友情链接 ")])),e[41]||(e[41]=t("p",{class:"copyright"},[Be("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),G.value?(s(),o("div",{key:4,class:"modal-overlay",onClick:e[13]||(e[13]=a=>G.value=!1)},[t("div",{class:"modal-content",onClick:e[12]||(e[12]=se(()=>{},["stop"]))},[t("div",Dl,[e[43]||(e[43]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[9]||(e[9]=a=>G.value=!1),class:"close-btn"},e[42]||(e[42]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Pl,[e[44]||(e[44]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),f(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>Y.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:be(Me,["enter"]),style:{width:"100%"}},null,544),[[U,Y.value]]),I.value?(s(),o("p",Al,h(I.value),1)):v("",!0),t("div",Tl,[t("button",{onClick:e[11]||(e[11]=a=>G.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:Me,class:"btn btn-primary",disabled:A.value},h(A.value?"验证中...":"确认"),9,Rl)])])])])):v("",!0),F.value?(s(),o("div",{key:5,class:"modal-overlay",onClick:e[16]||(e[16]=a=>F.value=!1)},[t("div",{class:"modal-content",onClick:e[15]||(e[15]=se(()=>{},["stop"]))},[t("div",zl,[e[46]||(e[46]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[14]||(e[14]=a=>F.value=!1),class:"close-btn"},e[45]||(e[45]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Nl,[t("div",Fl,[(s(!0),o(z,null,N(me.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",Kl,[a.logo?(s(),o("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:ze},null,40,Ol)):(s(),o("div",jl,h(a.title.charAt(0)),1))]),t("div",Gl,[t("h4",null,h(a.title),1)])],8,ql))),128))])])])])):v("",!0),ge.value?(s(),o("div",{key:6,class:"modal-overlay",onClick:de},[t("div",{class:"modal-content",onClick:e[21]||(e[21]=se(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[48]||(e[48]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:de,class:"close-btn"},e[47]||(e[47]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Hl,[t("div",Jl,[t("div",Ql,[e[49]||(e[49]=t("label",null,"标题",-1)),f(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>C.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[U,C.value.title]])]),t("div",Wl,[e[50]||(e[50]=t("label",null,"网址",-1)),f(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>C.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[U,C.value.url]])]),t("div",Xl,[e[51]||(e[51]=t("label",null,"Logo 链接",-1)),f(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>C.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[U,C.value.logo_url]])]),t("div",Yl,[e[52]||(e[52]=t("label",null,"描述",-1)),f(t("textarea",{"onUpdate:modelValue":e[20]||(e[20]=a=>C.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[U,C.value.desc]])]),I.value?(s(),o("p",Zl,h(I.value),1)):v("",!0),t("div",ea,[t("button",{onClick:de,class:"btn btn-cancel"},"取消"),t("button",{onClick:lt,class:"btn btn-primary",disabled:A.value},h(A.value?"保存中...":"保存"),9,ta)])])])])])):v("",!0),R(O,{name:"toast"},{default:K(()=>[he.value?(s(),o("div",la,h(ke.value),1)):v("",!0)]),_:1})])}}},ia=Ue(aa,[["__scopeId","data-v-a6aa3025"]]);export{ia as default};
