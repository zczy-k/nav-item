const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-Pw0Y64Ob.js","assets/index-Ybumxtf6.js","assets/CardGrid-D5unyEKZ.css"])))=>i.map(i=>d[i]);
var We=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var ke=(k,h,u)=>h in k?We(k,h,{enumerable:!0,configurable:!0,writable:!0,value:u}):k[h]=u,Y=(k,h)=>{for(var u in h||(h={}))Ze.call(h,u)&&ke(k,u,h[u]);if(me)for(var u of me(h))et.call(h,u)&&ke(k,u,h[u]);return k},Z=(k,h)=>Xe(k,Ye(h));var g=(k,h,u)=>new Promise((w,p)=>{var N=S=>{try{_(u.next(S))}catch(z){p(z)}},d=S=>{try{_(u.throw(S))}catch(z){p(z)}},_=S=>S.done?w(S.value):Promise.resolve(S.value).then(N,d);_((u=u.apply(k,h)).next())});import{_ as xe,r as i,c as o,F as A,a as P,o as s,b as t,d as v,t as b,n as G,e as ye,f as tt,g as lt,h as at,i as F,w as m,v as E,j as ve,u as ot,k as st,l as ee,T as te,m as le,p as we,q as _e,s as nt,x as re}from"./index-Ybumxtf6.js";import{g as rt,a as ie,l as Ce,b as it,c as ut,u as Me,d as dt,e as ct,f as vt}from"./api-IXEuL4jV.js";const ht={class:"menu-bar"},bt=["onMouseenter","onMouseleave"],pt=["onClick"],ft=["onClick"],gt={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(k){const h=i(null);function u(p){h.value=p}function w(p){setTimeout(()=>{h.value===p&&(h.value=null)},100)}return(p,N)=>(s(),o("nav",ht,[(s(!0),o(A,null,P(k.menus,d=>(s(),o("div",{key:d.id,class:"menu-item",onMouseenter:_=>u(d.id),onMouseleave:_=>w(d.id)},[t("button",{onClick:_=>p.$emit("select",d),class:G({active:d.id===k.activeId})},b(d.name),11,pt),d.subMenus&&d.subMenus.length>0?(s(),o("div",{key:0,class:G(["sub-menu",{show:h.value===d.id}])},[(s(!0),o(A,null,P(d.subMenus,_=>(s(),o("button",{key:_.id,onClick:S=>p.$emit("select",_,d),class:G([{active:_.id===k.activeSubMenuId},"sub-menu-item"])},b(_.name),11,ft))),128))],2)):v("",!0)],40,bt))),128))]))}},mt=xe(gt,[["__scopeId","data-v-16a94230"]]),kt={class:"home-container"},yt={class:"menu-bar-fixed"},wt={class:"search-section"},_t={class:"search-box-wrapper"},Ct={class:"search-engine-select"},Mt=["onClick"],xt={class:"search-container"},It=["placeholder"],St={key:0,class:"ad-space-fixed left-ad-fixed"},$t=["href"],Et=["src"],Bt={key:1,class:"ad-space-fixed right-ad-fixed"},Lt=["href"],Ut=["src"],Vt={key:2,class:"move-target-panel"},Dt={class:"move-target-list"},At=["onClick"],Pt={key:0,class:"target-submenu-list"},zt=["onClick"],Rt=["disabled"],Tt={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Nt={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ft={key:"plus",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},qt={key:"close",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Kt={class:"modal-header"},jt={class:"modal-body"},Gt={key:0,class:"batch-step"},Ht={class:"remember-password-wrapper"},Ot={key:0,class:"batch-error"},Jt={class:"batch-actions"},Qt=["disabled"],Wt={key:1,class:"batch-step"},Xt={key:0,class:"batch-error"},Yt={class:"batch-actions"},Zt=["disabled"],el={key:2,class:"batch-step"},tl={class:"batch-preview-list"},ll=["onUpdate:modelValue","id"],al={class:"batch-card-preview"},ol=["src","alt"],sl={class:"batch-card-info"},nl={class:"batch-edit-field"},rl=["onUpdate:modelValue"],il={class:"batch-edit-field"},ul=["onUpdate:modelValue"],dl={class:"batch-edit-field"},cl=["onUpdate:modelValue"],vl={class:"batch-card-url"},hl={key:0,class:"batch-card-warning"},bl={key:0,class:"batch-error"},pl={class:"batch-actions"},fl=["disabled"],gl={class:"footer"},ml={class:"footer-content"},kl={class:"modal-header"},yl={class:"modal-body"},wl={key:0,class:"batch-error"},_l={class:"batch-actions",style:{"margin-top":"20px"}},Cl=["disabled"],Ml={class:"modal-header"},xl={class:"modal-body"},Il={class:"friend-links-grid"},Sl=["href"],$l={class:"friend-link-logo"},El=["src","alt"],Bl={key:1,class:"friend-link-placeholder"},Ll={class:"friend-link-info"},Ul={class:"modal-body"},Vl={class:"edit-card-form"},Dl={class:"form-group"},Al={class:"form-group"},Pl={class:"form-group"},zl={class:"form-group"},Rl={key:0,class:"batch-error"},Tl={class:"batch-actions",style:{"margin-top":"20px"}},Nl=["disabled"],Fl={__name:"Home",setup(k){const h=st(()=>nt(()=>import("./CardGrid-Pw0Y64Ob.js"),__vite__mapDeps([0,1,2]))),u=i([]),w=i(null),p=i(null),N=i([]),d=i(""),_=i([]),S=i([]),z=i(!1),Ie=i([]),ue=i(!1),x=i(1),R=i(""),H=i(""),M=i(!1),f=i(""),O=i([]),J=i(!1),B=i(!1),Q=i(""),q=i(!1),U=i(!1),C=i(""),V=i(null),K=i(null),j=i(null),de=i(!1),ae=i(null),y=i({title:"",url:"",logo_url:"",desc:""}),D=i(!1);function Se(){D.value=!D.value}function $e(){D.value&&(D.value=!1)}const W=i(!1),he=ye(()=>O.value.filter(l=>l.selected).length),ce=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],X=i((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=ce.find(n=>n.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return ce[0]})());function Ee(l){X.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function Be(){d.value=""}const Le=ye(()=>d.value?N.value.filter(l=>l.title.toLowerCase().includes(d.value.toLowerCase())||l.url.toLowerCase().includes(d.value.toLowerCase())):N.value);tt(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),lt(()=>g(null,null,function*(){const l=yield rt();u.value=Ue(l.data),u.value.length&&(w.value=u.value[0],T())}));function Ue(l){const e={},n=[];return l.forEach(r=>{e[r.id]=Z(Y({},r),{sub_menus:[]})}),l.forEach(r=>{r.parent_id?e[r.parent_id]&&e[r.parent_id].sub_menus.push(e[r.id]):n.push(e[r.id])}),n}at(()=>{document.removeEventListener("click",$e)});function Ve(l,e=null){return g(this,null,function*(){e?(w.value=e,p.value=l):(w.value=l,p.value=null),T()})}const De=i({});function T(){return g(this,null,function*(){var e;if(!w.value)return;const l=yield ie(w.value.id,(e=p.value)==null?void 0:e.id);N.value=l.data})}function oe(){return g(this,null,function*(){const l={};for(const e of u.value){const n=yield ie(e.id,null),r=`${e.id}_null`;if(l[r]=n.data,e.sub_menus&&e.sub_menus.length)for(const c of e.sub_menus){const I=yield ie(e.id,c.id),a=`${e.id}_${c.id}`;l[a]=I.data}}De.value=l})}function be(){return g(this,null,function*(){if(d.value.trim())if(X.value.name==="site"){let l=!1;for(const e of u.value){const n=yield ie(e.id),r=n.data.find(c=>c.title.toLowerCase().includes(d.value.toLowerCase())||c.url.toLowerCase().includes(d.value.toLowerCase()));if(r){w.value=e,N.value=n.data,setTimeout(()=>{const c=document.querySelector(`[data-card-id='${r.id}']`);c&&c.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=X.value.url(d.value);window.open(l,"_blank")}})}function Ae(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function Pe(){return g(this,null,function*(){ue.value=!0,f.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:n,token:r}=JSON.parse(l);if(Date.now()<n&&r){localStorage.setItem("token",r),R.value=e,J.value=!0,x.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}x.value=1})}function se(){ue.value=!1,x.value=1,R.value="",H.value="",f.value="",O.value=[],M.value=!1}function pe(){return g(this,null,function*(){if(!R.value){f.value="请输入密码";return}M.value=!0,f.value="";try{const l=yield Ce("admin",R.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(J.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:R.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");x.value=2}catch(l){f.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{M.value=!1}})}function ze(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),R.value="",J.value=!1,x.value=1}function Re(){return g(this,null,function*(){var e,n;const l=H.value.split(`
`).map(r=>r.trim()).filter(r=>r.length>0);if(l.length===0){f.value="请输入至少一个网址";return}M.value=!0,f.value="";try{const r=yield it(l);O.value=r.data.data.map(c=>Z(Y({},c),{selected:!0})),x.value=3}catch(r){f.value=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"解析失败，请重试"}finally{M.value=!1}})}function Te(){return g(this,null,function*(){var e,n,r;const l=O.value.filter(c=>c.selected);if(l.length===0){f.value="请至少选择一个网站";return}M.value=!0,f.value="";try{const c=l.map(I=>({title:I.title,url:I.url,logo:I.logo,description:I.description}));yield ut(w.value.id,((e=p.value)==null?void 0:e.id)||null,c),alert(`成功添加 ${l.length} 个网站！`),se(),yield T()}catch(c){f.value=((r=(n=c.response)==null?void 0:n.data)==null?void 0:r.error)||"添加失败，请重试"}finally{M.value=!1}})}function Ne(){return g(this,null,function*(){if(!W.value){W.value=!0;try{const e=(yield dt()).data.url;let n=document.getElementById("dynamic-bg-style");n||(n=document.createElement("style"),n.id="dynamic-bg-style",document.head.appendChild(n)),n.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{W.value=!1}}})}function Fe(){return g(this,null,function*(){q.value=!0,Q.value="",C.value=""})}function fe(){return g(this,null,function*(){if(!Q.value){C.value="请输入密码";return}U.value=!0,C.value="";try{const l=yield Ce("admin",Q.value);localStorage.setItem("token",l.data.token),B.value=!0,q.value=!1,U.value=!1}catch(l){C.value="密码错误",U.value=!1}})}function qe(){B.value=!1,V.value=null,K.value=null,j.value=null}function Ke(l){var e,n;V.value=l,K.value=((e=w.value)==null?void 0:e.id)||null,j.value=((n=p.value)==null?void 0:n.id)||null}function je(){V.value=null}function Ge(){V.value=null,K.value=null,j.value=null}function ge(l,e){return g(this,null,function*(){var n,r;if(V.value)try{yield Me(V.value.id,Z(Y({},V.value),{menu_id:l,sub_menu_id:e})),alert("移动成功！"),yield T(),V.value=null,K.value=null,j.value=null}catch(c){alert("移动失败："+(((r=(n=c.response)==null?void 0:n.data)==null?void 0:r.error)||c.message))}})}function He(l,e,n){return g(this,null,function*(){var c,I;const r=l.map((a,$)=>({id:a,order:$,menu_id:e,sub_menu_id:n}));try{yield vt(r),B.value?yield oe():yield T()}catch(a){alert("保存失败："+(((I=(c=a.response)==null?void 0:c.data)==null?void 0:I.error)||a.message)),B.value?yield oe():yield T()}})}function Oe(l){return g(this,null,function*(){var e,n;if(confirm(`确定要删除「${l.title}」吗？`))try{yield ct(l.id),alert("删除成功"),B.value?yield oe():yield T()}catch(r){alert("删除失败："+(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||r.message))}})}function Je(l){ae.value=l,y.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},C.value="",de.value=!0}function ne(){de.value=!1,ae.value=null,y.value={title:"",url:"",logo_url:"",desc:""},C.value=""}function Qe(){return g(this,null,function*(){var l,e;if(!y.value.title.trim()){C.value="请输入标题";return}if(!y.value.url.trim()){C.value="请输入网址";return}U.value=!0,C.value="";try{yield Me(ae.value.id,Z(Y({},ae.value),{title:y.value.title,url:y.value.url,logo_url:y.value.logo_url,desc:y.value.desc})),alert("修改成功"),ne(),B.value?yield oe():yield T()}catch(n){C.value="修改失败："+(((e=(l=n.response)==null?void 0:l.data)==null?void 0:e.error)||n.message)}finally{U.value=!1}})}return(l,e)=>{var n,r,c,I;return s(),o("div",kt,[t("div",yt,[F(mt,{menus:u.value,activeId:(n=w.value)==null?void 0:n.id,activeSubMenuId:(r=p.value)==null?void 0:r.id,onSelect:Ve},null,8,["menus","activeId","activeSubMenuId"])]),t("div",wt,[t("div",_t,[t("div",Ct,[(s(),o(A,null,P(ce,a=>t("button",{key:a.name,class:G(["engine-btn",{active:X.value.name===a.name}]),onClick:$=>Ee(a)},b(a.label),11,Mt)),64))]),t("div",xt,[m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),type:"text",placeholder:X.value.placeholder,class:"search-input",onKeyup:ve(be,["enter"])},null,40,It),[[E,d.value]]),d.value?(s(),o("button",{key:0,class:"clear-btn",onClick:Be,"aria-label":"清空",title:"clear"},e[22]||(e[22]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):v("",!0),t("button",{onClick:be,class:"search-btn",title:"search"},e[23]||(e[23]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),_.value.length?(s(),o("div",St,[(s(!0),o(A,null,P(_.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Et)],8,$t))),128))])):v("",!0),S.value.length?(s(),o("div",Bt,[(s(!0),o(A,null,P(S.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,Ut)],8,Lt))),128))])):v("",!0),B.value&&V.value?(s(),o("div",Vt,[t("div",{class:"move-target-header"},[e[24]||(e[24]=t("h4",null,"移动到：",-1)),t("button",{onClick:Ge,class:"cancel-move-btn"},"×")]),t("div",Dt,[(s(!0),o(A,null,P(u.value,a=>(s(),o("div",{key:a.id,class:"target-menu-group"},[t("button",{onClick:$=>ge(a.id,null),class:G(["target-menu-btn",{active:K.value===a.id&&j.value===null}])},b(a.name),11,At),a.sub_menus&&a.sub_menus.length?(s(),o("div",Pt,[(s(!0),o(A,null,P(a.sub_menus,$=>(s(),o("button",{key:$.id,onClick:L=>ge(a.id,$.id),class:G(["target-submenu-btn",{active:K.value===a.id&&j.value===$.id}])}," ⤷ "+b($.name),11,zt))),128))])):v("",!0)]))),128))])])):v("",!0),F(ot(h),{cards:Le.value,editMode:B.value,categoryId:(c=w.value)==null?void 0:c.id,subCategoryId:(I=p.value)==null?void 0:I.id,onCardsReordered:He,onEditCard:Je,onDeleteCard:Oe,onCardDragStart:Ke,onCardDragEnd:je},null,8,["cards","editMode","categoryId","subCategoryId"]),t("div",{class:"fab-container",onClick:e[1]||(e[1]=le(()=>{},["stop"]))},[F(te,{name:"fab-item"},{default:ee(()=>[m(t("button",{onClick:Ne,class:"change-bg-btn",title:"切换背景",disabled:W.value},[W.value?(s(),o("svg",Nt,e[26]||(e[26]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(s(),o("svg",Tt,e[25]||(e[25]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,Rt),[[re,D.value]])]),_:1}),F(te,{name:"fab-item"},{default:ee(()=>[w.value?m((s(),o("button",{key:0,onClick:Pe,class:"batch-add-btn",title:"批量添加网站"},e[27]||(e[27]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[re,D.value]]):v("",!0)]),_:1}),F(te,{name:"fab-item"},{default:ee(()=>[B.value?m((s(),o("button",{key:0,onClick:qe,class:"exit-edit-btn",title:"退出编辑模式"},e[28]||(e[28]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[re,D.value]]):v("",!0)]),_:1}),F(te,{name:"fab-item"},{default:ee(()=>[B.value?v("",!0):m((s(),o("button",{key:0,onClick:Fe,class:"edit-mode-btn",title:"编辑模式"},e[29]||(e[29]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[re,D.value]])]),_:1}),t("button",{onClick:Se,class:"fab-toggle-btn",title:"更多功能"},[F(te,{name:"fab-icon",mode:"out-in"},{default:ee(()=>[D.value?(s(),o("svg",qt,e[31]||(e[31]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(s(),o("svg",Ft,e[30]||(e[30]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),ue.value?(s(),o("div",{key:3,class:"modal-overlay",onClick:se},[t("div",{class:"modal-content batch-modal",onClick:e[7]||(e[7]=le(()=>{},["stop"]))},[t("div",Kt,[t("h3",null,b(x.value===1?"验证密码":x.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:se,class:"close-btn"},e[32]||(e[32]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",jt,[x.value===1?(s(),o("div",Gt,[e[34]||(e[34]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>R.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ve(pe,["enter"])},null,544),[[E,R.value]]),t("div",Ht,[t("label",null,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>J.value=a)},null,512),[[we,J.value]]),e[33]||(e[33]=t("span",null,"记住密码（2小时）",-1))])]),f.value?(s(),o("p",Ot,b(f.value),1)):v("",!0),t("div",Jt,[t("button",{onClick:se,class:"btn btn-cancel"},"取消"),t("button",{onClick:pe,class:"btn btn-primary",disabled:M.value},b(M.value?"验证中...":"确认"),9,Qt)])])):v("",!0),x.value===2?(s(),o("div",Wt,[e[35]||(e[35]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),m(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>H.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[E,H.value]]),f.value?(s(),o("p",Xt,b(f.value),1)):v("",!0),t("div",Yt,[t("button",{onClick:ze,class:"btn btn-cancel"},"上一步"),t("button",{onClick:Re,class:"btn btn-primary",disabled:M.value||!H.value.trim()},b(M.value?"解析中...":"下一步"),9,Zt)])])):v("",!0),x.value===3?(s(),o("div",el,[e[39]||(e[39]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",tl,[(s(!0),o(A,null,P(O.value,(a,$)=>(s(),o("div",{key:$,class:"batch-preview-item"},[m(t("input",{type:"checkbox","onUpdate:modelValue":L=>a.selected=L,id:`card-${$}`},null,8,ll),[[we,a.selected]]),t("div",al,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[5]||(e[5]=L=>L.target.src="/default-favicon.png")},null,40,ol),t("div",sl,[t("div",nl,[e[36]||(e[36]=t("label",null,"标题：",-1)),m(t("input",{type:"text","onUpdate:modelValue":L=>a.title=L,class:"batch-edit-input"},null,8,rl),[[E,a.title]])]),t("div",il,[e[37]||(e[37]=t("label",null,"Logo：",-1)),m(t("input",{type:"text","onUpdate:modelValue":L=>a.logo=L,class:"batch-edit-input"},null,8,ul),[[E,a.logo]])]),t("div",dl,[e[38]||(e[38]=t("label",null,"描述：",-1)),m(t("textarea",{"onUpdate:modelValue":L=>a.description=L,class:"batch-edit-textarea",rows:"2"},null,8,cl),[[E,a.description]])]),t("p",vl,b(a.url),1),a.success?v("",!0):(s(),o("p",hl,"⚠️ "+b(a.error),1))])])]))),128))]),f.value?(s(),o("p",bl,b(f.value),1)):v("",!0),t("div",pl,[t("button",{onClick:e[6]||(e[6]=a=>x.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Te,class:"btn btn-primary",disabled:M.value||he.value===0},b(M.value?"添加中...":`添加 (${he.value})`),9,fl)])])):v("",!0)])])])):v("",!0),t("footer",gl,[t("div",ml,[t("button",{onClick:e[8]||(e[8]=a=>z.value=!0),class:"friend-link-btn"},e[40]||(e[40]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),_e(" 友情链接 ")])),e[41]||(e[41]=t("p",{class:"copyright"},[_e("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),q.value?(s(),o("div",{key:4,class:"modal-overlay",onClick:e[13]||(e[13]=a=>q.value=!1)},[t("div",{class:"modal-content",onClick:e[12]||(e[12]=le(()=>{},["stop"]))},[t("div",kl,[e[43]||(e[43]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[9]||(e[9]=a=>q.value=!1),class:"close-btn"},e[42]||(e[42]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",yl,[e[44]||(e[44]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>Q.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ve(fe,["enter"]),style:{width:"100%"}},null,544),[[E,Q.value]]),C.value?(s(),o("p",wl,b(C.value),1)):v("",!0),t("div",_l,[t("button",{onClick:e[11]||(e[11]=a=>q.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:fe,class:"btn btn-primary",disabled:U.value},b(U.value?"验证中...":"确认"),9,Cl)])])])])):v("",!0),z.value?(s(),o("div",{key:5,class:"modal-overlay",onClick:e[16]||(e[16]=a=>z.value=!1)},[t("div",{class:"modal-content",onClick:e[15]||(e[15]=le(()=>{},["stop"]))},[t("div",Ml,[e[46]||(e[46]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[14]||(e[14]=a=>z.value=!1),class:"close-btn"},e[45]||(e[45]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",xl,[t("div",Il,[(s(!0),o(A,null,P(Ie.value,a=>(s(),o("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",$l,[a.logo?(s(),o("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:Ae},null,40,El)):(s(),o("div",Bl,b(a.title.charAt(0)),1))]),t("div",Ll,[t("h4",null,b(a.title),1)])],8,Sl))),128))])])])])):v("",!0),de.value?(s(),o("div",{key:6,class:"modal-overlay",onClick:ne},[t("div",{class:"modal-content",onClick:e[21]||(e[21]=le(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[48]||(e[48]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:ne,class:"close-btn"},e[47]||(e[47]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ul,[t("div",Vl,[t("div",Dl,[e[49]||(e[49]=t("label",null,"标题",-1)),m(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>y.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[E,y.value.title]])]),t("div",Al,[e[50]||(e[50]=t("label",null,"网址",-1)),m(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>y.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[E,y.value.url]])]),t("div",Pl,[e[51]||(e[51]=t("label",null,"Logo 链接",-1)),m(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>y.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[E,y.value.logo_url]])]),t("div",zl,[e[52]||(e[52]=t("label",null,"描述",-1)),m(t("textarea",{"onUpdate:modelValue":e[20]||(e[20]=a=>y.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[E,y.value.desc]])]),C.value?(s(),o("p",Rl,b(C.value),1)):v("",!0),t("div",Tl,[t("button",{onClick:ne,class:"btn btn-cancel"},"取消"),t("button",{onClick:Qe,class:"btn btn-primary",disabled:U.value},b(U.value?"保存中...":"保存"),9,Nl)])])])])])):v("",!0)])}}},Hl=xe(Fl,[["__scopeId","data-v-407ce5fb"]]);export{Hl as default};
