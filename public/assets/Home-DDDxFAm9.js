const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-BTUEPs7s.js","assets/index-BYdf5ref.js","assets/CardGrid-fBB6b1za.css"])))=>i.map(i=>d[i]);
var re=Object.defineProperty,ce=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var K=(d,r,i)=>r in d?re(d,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[r]=i,j=(d,r)=>{for(var i in r||(r={}))de.call(r,i)&&K(d,i,r[i]);if(H)for(var i of H(r))ve.call(r,i)&&K(d,i,r[i]);return d},O=(d,r)=>ce(d,ue(r));var M=(d,r,i)=>new Promise((k,b)=>{var $=m=>{try{p(i.next(m))}catch(C){b(C)}},n=m=>{try{p(i.throw(m))}catch(C){b(C)}},p=m=>m.done?k(m.value):Promise.resolve(m.value).then($,n);p((i=i.apply(d,r)).next())});import{_ as ee,r as u,c as a,F as x,a as I,o,b as t,d as f,t as h,n as V,e as Q,f as he,g as J,w as E,v as P,h as W,u as be,i as pe,j as X,k as Y,l as fe,m as ke}from"./index-BYdf5ref.js";import{g as ge,a as _e,b as me,c as Z,l as ye,d as we,e as Ce}from"./api-C3hluwhN.js";const Me={class:"menu-bar"},$e=["onMouseenter","onMouseleave"],xe=["onClick"],Ie=["onClick"],Le={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(d){const r=u(null);function i(b){r.value=b}function k(b){setTimeout(()=>{r.value===b&&(r.value=null)},100)}return(b,$)=>(o(),a("nav",Me,[(o(!0),a(x,null,I(d.menus,n=>(o(),a("div",{key:n.id,class:"menu-item",onMouseenter:p=>i(n.id),onMouseleave:p=>k(n.id)},[t("button",{onClick:p=>b.$emit("select",n),class:V({active:n.id===d.activeId})},h(n.name),11,xe),n.subMenus&&n.subMenus.length>0?(o(),a("div",{key:0,class:V(["sub-menu",{show:r.value===n.id}])},[(o(!0),a(x,null,I(n.subMenus,p=>(o(),a("button",{key:p.id,onClick:m=>b.$emit("select",p,n),class:V([{active:p.id===d.activeSubMenuId},"sub-menu-item"])},h(p.name),11,Ie))),128))],2)):f("",!0)],40,$e))),128))]))}},Be=ee(Le,[["__scopeId","data-v-16a94230"]]),Se={class:"home-container"},Ue={class:"menu-bar-fixed"},Ae={class:"search-section"},Ee={class:"search-box-wrapper"},Ve={class:"search-engine-select"},ze=["onClick"],Re={class:"search-container"},Ne=["placeholder"],Pe={key:0,class:"ad-space-fixed left-ad-fixed"},Te=["href"],qe=["src"],Fe={key:1,class:"ad-space-fixed right-ad-fixed"},Ge=["href"],De=["src"],He={class:"modal-header"},Ke={class:"modal-body"},je={key:0,class:"batch-step"},Oe={key:0,class:"batch-error"},Qe={class:"batch-actions"},Je=["disabled"],We={key:1,class:"batch-step"},Xe={key:0,class:"batch-error"},Ye={class:"batch-actions"},Ze=["disabled"],et={key:2,class:"batch-step"},tt={class:"batch-preview-list"},st=["onUpdate:modelValue","id"],lt=["for"],at=["src","alt"],ot={class:"batch-card-info"},nt={class:"batch-card-title"},it={class:"batch-card-url"},rt={key:0,class:"batch-card-desc"},ct={key:1,class:"batch-card-warning"},ut={key:0,class:"batch-error"},dt={class:"batch-actions"},vt=["disabled"],ht={class:"footer"},bt={class:"footer-content"},pt={class:"modal-header"},ft={class:"modal-body"},kt={class:"friend-links-grid"},gt=["href"],_t={class:"friend-link-logo"},mt=["src","alt"],yt={key:1,class:"friend-link-placeholder"},wt={class:"friend-link-info"},Ct={__name:"Home",setup(d){const r=pe(()=>fe(()=>import("./CardGrid-BTUEPs7s.js"),__vite__mapDeps([0,1,2]))),i=u([]),k=u(null),b=u(null),$=u([]),n=u(""),p=u([]),m=u([]),C=u(!1),T=u([]),z=u(!1),y=u(1),L=u(""),B=u(""),g=u(!1),v=u(""),S=u([]),q=Q(()=>S.value.filter(l=>l.selected).length),F=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:l=>`/search?query=${encodeURIComponent(l)}`}],U=u(F[0]);function te(l){U.value=l}function se(){n.value=""}const le=Q(()=>n.value?$.value.filter(l=>l.title.toLowerCase().includes(n.value.toLowerCase())||l.url.toLowerCase().includes(n.value.toLowerCase())):$.value);he(()=>M(null,null,function*(){const l=yield ge();i.value=l.data,i.value.length&&(k.value=i.value[0],R());const e=yield _e();p.value=e.data.filter(c=>c.position==="left"),m.value=e.data.filter(c=>c.position==="right");const _=yield me();T.value=_.data}));function ae(l,e=null){return M(this,null,function*(){e?(k.value=e,b.value=l):(k.value=l,b.value=null),R()})}function R(){return M(this,null,function*(){var e;if(!k.value)return;const l=yield Z(k.value.id,(e=b.value)==null?void 0:e.id);$.value=l.data})}function G(){return M(this,null,function*(){if(n.value.trim())if(U.value.name==="site"){let l=!1;for(const e of i.value){const _=yield Z(e.id),c=_.data.find(s=>s.title.toLowerCase().includes(n.value.toLowerCase())||s.url.toLowerCase().includes(n.value.toLowerCase()));if(c){k.value=e,$.value=_.data,setTimeout(()=>{const s=document.querySelector(`[data-card-id='${c.id}']`);s&&s.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=U.value.url(n.value);window.open(l,"_blank")}})}function oe(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function A(){z.value=!1,y.value=1,L.value="",B.value="",v.value="",S.value=[],g.value=!1}function D(){return M(this,null,function*(){if(!L.value){v.value="请输入密码";return}g.value=!0,v.value="";try{yield ye("admin",L.value),y.value=2}catch(l){v.value="密码错误，请重试"}finally{g.value=!1}})}function ne(){return M(this,null,function*(){var e,_;const l=B.value.split(`
`).map(c=>c.trim()).filter(c=>c.length>0);if(l.length===0){v.value="请输入至少一个网址";return}g.value=!0,v.value="";try{const c=yield we(l);S.value=c.data.data.map(s=>O(j({},s),{selected:!0})),y.value=3}catch(c){v.value=((_=(e=c.response)==null?void 0:e.data)==null?void 0:_.error)||"解析失败，请重试"}finally{g.value=!1}})}function ie(){return M(this,null,function*(){var e,_,c;const l=S.value.filter(s=>s.selected);if(l.length===0){v.value="请至少选择一个网站";return}g.value=!0,v.value="";try{const s=l.map(w=>({title:w.title,url:w.url,logo:w.logo,description:w.description}));yield Ce(k.value.id,((e=b.value)==null?void 0:e.id)||null,s),alert(`成功添加 ${l.length} 个网站！`),A(),yield R()}catch(s){v.value=((c=(_=s.response)==null?void 0:_.data)==null?void 0:c.error)||"添加失败，请重试"}finally{g.value=!1}})}return(l,e)=>{var _,c;return o(),a("div",Se,[t("div",Ue,[J(Be,{menus:i.value,activeId:(_=k.value)==null?void 0:_.id,activeSubMenuId:(c=b.value)==null?void 0:c.id,onSelect:ae},null,8,["menus","activeId","activeSubMenuId"])]),t("div",Ae,[t("div",Ee,[t("div",Ve,[(o(),a(x,null,I(F,s=>t("button",{key:s.name,class:V(["engine-btn",{active:U.value.name===s.name}]),onClick:w=>te(s)},h(s.label),11,ze)),64))]),t("div",Re,[E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),type:"text",placeholder:U.value.placeholder,class:"search-input",onKeyup:W(G,["enter"])},null,40,Ne),[[P,n.value]]),n.value?(o(),a("button",{key:0,class:"clear-btn",onClick:se,"aria-label":"清空",title:"clear"},e[12]||(e[12]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):f("",!0),t("button",{onClick:G,class:"search-btn",title:"search"},e[13]||(e[13]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),p.value.length?(o(),a("div",Pe,[(o(!0),a(x,null,I(p.value,s=>(o(),a("a",{key:s.id,href:s.url,target:"_blank"},[t("img",{src:s.img,alt:"广告",loading:"lazy"},null,8,qe)],8,Te))),128))])):f("",!0),m.value.length?(o(),a("div",Fe,[(o(!0),a(x,null,I(m.value,s=>(o(),a("a",{key:s.id,href:s.url,target:"_blank"},[t("img",{src:s.img,alt:"广告",loading:"lazy"},null,8,De)],8,Ge))),128))])):f("",!0),J(be(r),{cards:le.value},null,8,["cards"]),k.value?(o(),a("button",{key:2,onClick:e[1]||(e[1]=s=>z.value=!0),class:"batch-add-btn",title:"批量添加网站"},e[14]||(e[14]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]))):f("",!0),z.value?(o(),a("div",{key:3,class:"modal-overlay",onClick:A},[t("div",{class:"modal-content batch-modal",onClick:e[7]||(e[7]=X(()=>{},["stop"]))},[t("div",He,[t("h3",null,h(y.value===1?"验证密码":y.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:A,class:"close-btn"},e[15]||(e[15]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ke,[y.value===1?(o(),a("div",je,[e[16]||(e[16]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),E(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>L.value=s),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:W(D,["enter"])},null,544),[[P,L.value]]),v.value?(o(),a("p",Oe,h(v.value),1)):f("",!0),t("div",Qe,[t("button",{onClick:A,class:"btn btn-cancel"},"取消"),t("button",{onClick:D,class:"btn btn-primary",disabled:g.value},h(g.value?"验证中...":"确认"),9,Je)])])):f("",!0),y.value===2?(o(),a("div",We,[e[17]||(e[17]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),E(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>B.value=s),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[P,B.value]]),v.value?(o(),a("p",Xe,h(v.value),1)):f("",!0),t("div",Ye,[t("button",{onClick:e[4]||(e[4]=s=>y.value=1),class:"btn btn-cancel"},"上一步"),t("button",{onClick:ne,class:"btn btn-primary",disabled:g.value||!B.value.trim()},h(g.value?"解析中...":"下一步"),9,Ze)])])):f("",!0),y.value===3?(o(),a("div",et,[e[18]||(e[18]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",tt,[(o(!0),a(x,null,I(S.value,(s,w)=>(o(),a("div",{key:w,class:"batch-preview-item"},[E(t("input",{type:"checkbox","onUpdate:modelValue":N=>s.selected=N,id:`card-${w}`},null,8,st),[[ke,s.selected]]),t("label",{for:`card-${w}`,class:"batch-card-preview"},[t("img",{src:s.logo,alt:s.title,class:"batch-card-logo",onError:e[5]||(e[5]=N=>N.target.src="/default-favicon.png")},null,40,at),t("div",ot,[t("h4",nt,h(s.title),1),t("p",it,h(s.url),1),s.description?(o(),a("p",rt,h(s.description),1)):f("",!0),s.success?f("",!0):(o(),a("p",ct,"⚠️ "+h(s.error),1))])],8,lt)]))),128))]),v.value?(o(),a("p",ut,h(v.value),1)):f("",!0),t("div",dt,[t("button",{onClick:e[6]||(e[6]=s=>y.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:ie,class:"btn btn-primary",disabled:g.value||q.value===0},h(g.value?"添加中...":`添加 (${q.value})`),9,vt)])])):f("",!0)])])])):f("",!0),t("footer",ht,[t("div",bt,[t("button",{onClick:e[8]||(e[8]=s=>C.value=!0),class:"friend-link-btn"},e[19]||(e[19]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),Y(" 友情链接 ")])),e[20]||(e[20]=t("p",{class:"copyright"},[Y("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/zczy-k/nav-item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),C.value?(o(),a("div",{key:4,class:"modal-overlay",onClick:e[11]||(e[11]=s=>C.value=!1)},[t("div",{class:"modal-content",onClick:e[10]||(e[10]=X(()=>{},["stop"]))},[t("div",pt,[e[22]||(e[22]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[9]||(e[9]=s=>C.value=!1),class:"close-btn"},e[21]||(e[21]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",ft,[t("div",kt,[(o(!0),a(x,null,I(T.value,s=>(o(),a("a",{key:s.id,href:s.url,target:"_blank",class:"friend-link-card"},[t("div",_t,[s.logo?(o(),a("img",{key:0,src:s.logo,alt:s.title,loading:"lazy",onError:oe},null,40,mt)):(o(),a("div",yt,h(s.title.charAt(0)),1))]),t("div",wt,[t("h4",null,h(s.title),1)])],8,gt))),128))])])])])):f("",!0)])}}},It=ee(Ct,[["__scopeId","data-v-a0c38caf"]]);export{It as default};
