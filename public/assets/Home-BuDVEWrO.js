const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardGrid-CGfq8e3z.js","assets/index-Bl5Fc5pU.js","assets/CardGrid-Bl3pXAM9.css"])))=>i.map(i=>d[i]);
var kt=Object.defineProperty,yt=Object.defineProperties;var wt=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable;var qe=(_,h,v)=>h in _?kt(_,h,{enumerable:!0,configurable:!0,writable:!0,value:v}):_[h]=v,be=(_,h)=>{for(var v in h||(h={}))_t.call(h,v)&&qe(_,v,h[v]);if(Fe)for(var v of Fe(h))Ct.call(h,v)&&qe(_,v,h[v]);return _},ke=(_,h)=>yt(_,wt(h));var g=(_,h,v)=>new Promise((U,y)=>{var ee=L=>{try{m(v.next(L))}catch(K){y(K)}},C=L=>{try{m(v.throw(L))}catch(K){y(K)}},m=L=>L.done?U(L.value):Promise.resolve(L.value).then(ee,C);m((v=v.apply(_,h)).next())});import{_ as Je,r as u,c as s,F as O,a as G,o as n,b as t,d,t as c,n as oe,e as Oe,f as xt,g as Mt,h as Ut,i as q,w as p,j as T,k as Y,T as Z,v as M,l as ye,u as St,m as It,p as Se,q as Ge,s as Et,x as we}from"./index-Bl5Fc5pU.js";import{g as Lt,a as $t,b as Bt,c as Vt,d as ae,l as _e,e as Rt,f as Dt,u as je,p as Tt,h as At,i as Pt,j as zt,k as Nt,m as Ft}from"./api-DJSardu8.js";const qt={class:"menu-bar"},Ot=["onMouseenter","onMouseleave"],Gt=["onClick"],jt=["onClick"],Jt={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(_){const h=u(null);function v(y){h.value=y}function U(y){setTimeout(()=>{h.value===y&&(h.value=null)},100)}return(y,ee)=>(n(),s("nav",qt,[(n(!0),s(O,null,G(_.menus,C=>(n(),s("div",{key:C.id,class:"menu-item",onMouseenter:m=>v(C.id),onMouseleave:m=>U(C.id)},[t("button",{onClick:m=>y.$emit("select",C),class:oe({active:C.id===_.activeId})},c(C.name),11,Gt),C.subMenus&&C.subMenus.length>0?(n(),s("div",{key:0,class:oe(["sub-menu",{show:h.value===C.id}])},[(n(!0),s(O,null,G(C.subMenus,m=>(n(),s("button",{key:m.id,onClick:L=>y.$emit("select",m,C),class:oe([{active:m.id===_.activeSubMenuId},"sub-menu-item"])},c(m.name),11,jt))),128))],2)):d("",!0)],40,Ot))),128))]))}},Kt=Je(Jt,[["__scopeId","data-v-16a94230"]]),Ht={class:"menu-bar-fixed"},Qt={class:"search-section"},Wt={class:"search-box-wrapper"},Xt={class:"search-container"},Yt=["src"],Zt={key:1,class:"engine-icon"},el={class:"engine-menu-items"},tl=["onClick"],ll=["src"],al={key:1,class:"engine-icon"},ol={class:"engine-label"},sl=["onClick"],nl=["placeholder"],rl={key:0,class:"ad-space-fixed left-ad-fixed"},il=["href"],ul=["src"],dl={key:1,class:"ad-space-fixed right-ad-fixed"},cl=["href"],vl=["src"],pl={key:2,class:"move-target-panel"},ml={class:"move-target-header"},gl={class:"move-target-list"},hl=["onClick"],fl={key:0,class:"target-submenu-list"},bl=["onClick"],kl=["disabled"],yl={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},wl={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_l={key:"plus",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},Cl={key:"close",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},xl={class:"modal-header"},Ml={class:"modal-body"},Ul={key:0,class:"batch-step"},Sl={class:"remember-password-wrapper"},Il={key:0,class:"batch-error"},El={class:"batch-actions"},Ll=["disabled"],$l={key:1,class:"batch-step"},Bl={key:0,class:"batch-error"},Vl={class:"batch-actions"},Rl=["disabled"],Dl={key:2,class:"batch-step"},Tl={class:"batch-preview-list"},Al=["onUpdate:modelValue","id"],Pl={class:"batch-card-preview"},zl=["src","alt"],Nl={class:"batch-card-info"},Fl={class:"batch-edit-field"},ql=["onUpdate:modelValue"],Ol={class:"batch-edit-field"},Gl=["onUpdate:modelValue"],jl={class:"batch-edit-field"},Jl=["onUpdate:modelValue"],Kl={class:"batch-card-url"},Hl={key:0,class:"batch-card-warning"},Ql={key:0,class:"batch-error"},Wl={class:"batch-actions"},Xl=["disabled"],Yl={class:"footer"},Zl={class:"footer-content"},ea={class:"modal-header"},ta={class:"modal-body"},la={class:"remember-password-wrapper"},aa={key:0,class:"batch-error"},oa={class:"batch-actions",style:{"margin-top":"20px"}},sa=["disabled"],na={class:"modal-header"},ra={class:"modal-body"},ia={class:"friend-links-grid"},ua=["href"],da={class:"friend-link-logo"},ca=["src","alt"],va={key:1,class:"friend-link-placeholder"},pa={class:"friend-link-info"},ma={class:"modal-body"},ga={class:"edit-card-form"},ha={class:"form-group"},fa={class:"form-group"},ba={class:"form-group"},ka={class:"form-group"},ya={key:0,class:"batch-error"},wa={class:"batch-actions",style:{"margin-top":"20px"}},_a=["disabled"],Ca={class:"modal-header"},xa={class:"modal-body"},Ma={key:0},Ua={class:"form-group"},Sa={key:0,class:"batch-error"},Ia={class:"batch-actions",style:{"margin-top":"20px"}},Ea=["disabled"],La={key:1},$a={class:"form-group"},Ba={style:{display:"flex",gap:"10px","align-items":"center"}},Va=["src"],Ra={class:"form-group"},Da={class:"form-group"},Ta={class:"form-group"},Aa={key:0,class:"batch-error"},Pa={class:"batch-actions",style:{"margin-top":"20px"}},za=["disabled"],Na={key:0,class:"toast-notification"},Fa={__name:"Home",setup(_){const h=It(()=>Et(()=>import("./CardGrid-CGfq8e3z.js"),__vite__mapDeps([0,1,2]))),v=u([]),U=u(null),y=u(null),ee=u([]),C=u([]),m=u(""),L=u([]),K=u([]),de=u(!1),Ie=u([]),Ce=u(!1),$=u(1),A=u(""),se=u(""),E=u(!1),w=u(""),ne=u([]),te=u(!1),B=u(!1),H=u(""),le=u(!1),P=u(!1),S=u(""),ce=u(!1),V=u([]),Q=u(!1),re=u(null),ie=u(null),Ee=u(""),xe=u(!1),Me=u(!1),ve=u(null),x=u({title:"",url:"",logo_url:"",desc:""}),z=u(!1);function Ke(){z.value=!z.value}function Le(){z.value&&(z.value=!1)}const ue=u(!1),$e=Oe(()=>ne.value.filter(l=>l.selected).length),Be=[{name:"google",label:"Google",icon:"🌐",iconUrl:"https://www.google.com/favicon.ico",placeholder:"Google 搜索...",url:l=>`https://www.google.com/search?q=${encodeURIComponent(l)}`},{name:"baidu",label:"百度",icon:"🔍",iconUrl:"https://www.baidu.com/favicon.ico",placeholder:"百度搜索...",url:l=>`https://www.baidu.com/s?wd=${encodeURIComponent(l)}`},{name:"bing",label:"Bing",icon:"🅱️",iconUrl:"https://www.bing.com/favicon.ico",placeholder:"Bing 搜索...",url:l=>`https://www.bing.com/search?q=${encodeURIComponent(l)}`},{name:"github",label:"GitHub",icon:"💻",iconUrl:"https://github.com/favicon.ico",placeholder:"GitHub 搜索...",url:l=>`https://github.com/search?q=${encodeURIComponent(l)}&type=repositories`}],N=u([...Be]),pe=u(!1),F=u(!1),I=u(""),j=u(!1),W=u(1),X=u(""),b=u({name:"",searchUrl:"",iconUrl:"",keyword:""}),D=u((()=>{try{const l=localStorage.getItem("default_search_engine");if(l){const e=N.value.find(o=>o.name===l);if(e)return e}}catch(l){console.error("Failed to load default search engine:",l)}return N.value[0]})());function Ve(l){D.value=l;try{localStorage.setItem("default_search_engine",l.name)}catch(e){console.error("Failed to save default search engine:",e)}}function He(){F.value=!F.value}function Qe(l){Ve(l),F.value=!1}function We(){m.value=""}function Xe(){return g(this,null,function*(){if(!localStorage.getItem("token")){const e=prompt("请输入管理员密码以添加搜索引擎：");if(!e){F.value=!1;return}try{const o=yield _e("admin",e);localStorage.setItem("token",o.data.token)}catch(o){alert("密码错误"),F.value=!1;return}}pe.value=!0,W.value=1,I.value="",X.value="",b.value={name:"",searchUrl:"",iconUrl:"",keyword:""}})}function Ue(){pe.value=!1,W.value=1,I.value="",X.value="",F.value=!1}function Re(){return g(this,null,function*(){var l,e;if(!X.value.trim()){I.value="请输入URL";return}j.value=!0,I.value="";try{const o=yield Tt(X.value);b.value={name:o.data.name,searchUrl:o.data.searchUrl,iconUrl:o.data.iconUrl,keyword:o.data.keyword},W.value=2}catch(o){I.value=((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.error)||"解析失败，请检查URL是否正确"}finally{j.value=!1}})}function Ye(){return g(this,null,function*(){var l,e;if(!b.value.name.trim()){I.value="请输入搜索引擎名称";return}if(!b.value.searchUrl.trim()){I.value="请输入搜索URL模板";return}if(!b.value.searchUrl.includes("{searchTerms}")){I.value="搜索URL模板必须包含 {searchTerms} 占位符";return}j.value=!0,I.value="";try{const o=yield At({name:b.value.name,search_url:b.value.searchUrl,icon_url:b.value.iconUrl,keyword:b.value.keyword}),i={name:"custom_"+o.data.id,label:o.data.name,icon:"",iconUrl:o.data.icon_url,placeholder:`${o.data.name} 搜索...`,url:r=>o.data.search_url.replace("{searchTerms}",encodeURIComponent(r)),custom:!0,id:o.data.id,keyword:o.data.keyword};N.value.push(i),he("搜索引擎添加成功"),Ue()}catch(o){I.value=((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.error)||"添加失败"}finally{j.value=!1}})}function Ze(l){return g(this,null,function*(){var o,i;if(!confirm(`确定要删除「${l.label}」搜索引擎吗？`))return;if(!localStorage.getItem("token")){const r=prompt("请输入管理员密码以删除搜索引擎：");if(!r)return;try{const f=yield _e("admin",r);localStorage.setItem("token",f.data.token)}catch(f){alert("密码错误");return}}try{yield Pt(l.id);const r=N.value.findIndex(f=>f.name===l.name);r>-1&&N.value.splice(r,1),D.value.name===l.name&&(D.value=N.value[0],Ve(N.value[0])),he("删除成功")}catch(r){alert("删除失败："+(((i=(o=r.response)==null?void 0:o.data)==null?void 0:i.error)||r.message))}})}const et=Oe(()=>{if(!m.value)return ee.value;const l=m.value.toLowerCase();return C.value.filter(e=>e.title.toLowerCase().includes(l)||e.url.toLowerCase().includes(l)||e.desc&&e.desc.toLowerCase().includes(l))});xt(()=>{const l=localStorage.getItem("nav_background");l&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".home-container");e&&(e.style.backgroundImage=`url(${l})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment="fixed")})}),Mt(()=>g(null,null,function*(){const l=yield Lt();v.value=l.data,v.value.length&&(U.value=v.value[0],J(),at());const e=yield $t();L.value=e.data.filter(r=>r.position==="left"),K.value=e.data.filter(r=>r.position==="right");const o=yield Bt();Ie.value=o.data;try{const f=(yield Vt()).data.map(a=>({name:"custom_"+a.id,label:a.name,icon:"",iconUrl:a.icon_url,placeholder:`${a.name} 搜索...`,url:k=>a.search_url.replace("{searchTerms}",encodeURIComponent(k)),custom:!0,id:a.id,keyword:a.keyword}));N.value=[...Be,...f]}catch(r){console.error("加载自定义搜索引擎失败:",r)}const i=localStorage.getItem("nav_background");if(i){const r=document.querySelector(".home-container");r&&!r.style.backgroundImage.includes(i)&&(r.style.backgroundImage=`url(${i})`,r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",r.style.backgroundAttachment="fixed")}nt(),document.addEventListener("click",Le),document.addEventListener("click",De)})),Ut(()=>{document.removeEventListener("click",Le),document.removeEventListener("click",De)});function De(){F.value&&(F.value=!1)}function tt(l,e=null){return g(this,null,function*(){e?(U.value=e,y.value=l):(U.value=l,y.value=null),J()})}const lt=u({});function J(){return g(this,null,function*(){var e;if(!U.value)return;const l=yield ae(U.value.id,(e=y.value)==null?void 0:e.id);ee.value=l.data})}function at(){return g(this,null,function*(){const l=[];for(const e of v.value)try{const o=yield ae(e.id,null);if(l.push(...o.data),e.subMenus&&e.subMenus.length)for(const i of e.subMenus){const r=yield ae(e.id,i.id);l.push(...r.data)}}catch(o){console.error(`加载菜单 ${e.name} 的卡片失败:`,o)}C.value=l})}function me(){return g(this,null,function*(){const l={};for(const e of v.value){const o=yield ae(e.id,null),i=`${e.id}_null`;if(l[i]=o.data,e.subMenus&&e.subMenus.length)for(const r of e.subMenus){const f=yield ae(e.id,r.id),a=`${e.id}_${r.id}`;l[a]=f.data}}lt.value=l})}function Te(){return g(this,null,function*(){if(m.value.trim())if(D.value.name==="site"){let l=!1;for(const e of v.value){const o=yield ae(e.id),i=o.data.find(r=>r.title.toLowerCase().includes(m.value.toLowerCase())||r.url.toLowerCase().includes(m.value.toLowerCase()));if(i){U.value=e,ee.value=o.data,setTimeout(()=>{const r=document.querySelector(`[data-card-id='${i.id}']`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100),l=!0;break}}l||alert("未找到相关内容")}else{const l=D.value.url(m.value);window.open(l,"_blank")}})}function ot(l){l.target.style.display="none",l.target.nextElementSibling.style.display="flex"}function st(){return g(this,null,function*(){Ce.value=!0,w.value="";const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:i}=JSON.parse(l);if(Date.now()<o&&i){localStorage.setItem("token",i),A.value=e,te.value=!0,$.value=2;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}$.value=1})}function ge(){Ce.value=!1,$.value=1,A.value="",se.value="",w.value="",ne.value=[],E.value=!1}function nt(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:i}=JSON.parse(l);Date.now()<o?(A.value=e,te.value=!0,i&&localStorage.setItem("token",i)):localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}}function Ae(){return g(this,null,function*(){if(!A.value){w.value="请输入密码";return}E.value=!0,w.value="";try{const l=yield _e("admin",A.value);if(l.data&&l.data.token)localStorage.setItem("token",l.data.token);else throw new Error("登录成功，但未收到 token");if(te.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:A.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");$.value=2}catch(l){w.value="密码错误，请重试",console.error("密码验证失败:",l)}finally{E.value=!1}})}function rt(){localStorage.removeItem("nav_password_token"),localStorage.removeItem("token"),A.value="",te.value=!1,$.value=1}function it(){return g(this,null,function*(){var e,o;const l=se.value.split(`
`).map(i=>i.trim()).filter(i=>i.length>0);if(l.length===0){w.value="请输入至少一个网址";return}E.value=!0,w.value="";try{const i=yield Rt(l);ne.value=i.data.data.map(r=>ke(be({},r),{selected:!0})),$.value=3}catch(i){w.value=((o=(e=i.response)==null?void 0:e.data)==null?void 0:o.error)||"解析失败，请重试"}finally{E.value=!1}})}function ut(){return g(this,null,function*(){var e,o,i;const l=ne.value.filter(r=>r.selected);if(l.length===0){w.value="请至少选择一个网站";return}E.value=!0,w.value="";try{const r=l.map(f=>({title:f.title,url:f.url,logo:f.logo,description:f.description}));yield Dt(U.value.id,((e=y.value)==null?void 0:e.id)||null,r),alert(`成功添加 ${l.length} 个网站！`),ge(),yield J()}catch(r){w.value=((i=(o=r.response)==null?void 0:o.data)==null?void 0:i.error)||"添加失败，请重试"}finally{E.value=!1}})}function dt(){return g(this,null,function*(){if(!ue.value){ue.value=!0;try{const e=(yield zt()).data.url;let o=document.getElementById("dynamic-bg-style");o||(o=document.createElement("style"),o.id="dynamic-bg-style",document.head.appendChild(o)),o.textContent=`.home-container { background-image: url(${e}) !important; }`,localStorage.setItem("nav_background",e)}catch(l){console.error("获取壁纸失败:",l),alert("获取壁纸失败，请稍后重试")}finally{ue.value=!1}}})}function ct(){return g(this,null,function*(){const l=localStorage.getItem("nav_password_token");if(l)try{const{password:e,expiry:o,token:i}=JSON.parse(l);if(Date.now()<o&&i){localStorage.setItem("token",i),B.value=!0;return}else localStorage.removeItem("nav_password_token")}catch(e){localStorage.removeItem("nav_password_token")}if(le.value=!0,H.value="",S.value="",l)try{const{password:e,expiry:o}=JSON.parse(l);Date.now()<o&&(H.value=e,ce.value=!0)}catch(e){}})}function Pe(){return g(this,null,function*(){if(!H.value){S.value="请输入密码";return}P.value=!0,S.value="";try{const l=yield _e("admin",H.value);if(localStorage.setItem("token",l.data.token),ce.value){const e=Date.now()+72e5;localStorage.setItem("nav_password_token",JSON.stringify({password:H.value,token:l.data.token,expiry:e}))}else localStorage.removeItem("nav_password_token");B.value=!0,le.value=!1,P.value=!1}catch(l){S.value="密码错误",P.value=!1}})}function ze(){B.value=!1,V.value=[],Q.value=!1,re.value=null,ie.value=null}function vt(l){B.value&&l.target.classList.contains("home-container")&&ze()}function pt(){Q.value=!1,re.value=null,ie.value=null}function mt(l){var o,i;const e=V.value.findIndex(r=>r.id===l.id);e>-1?(V.value.splice(e,1),V.value.length===0&&(Q.value=!1)):(V.value.push(l),Q.value||(Q.value=!0,re.value=((o=U.value)==null?void 0:o.id)||null,ie.value=((i=y.value)==null?void 0:i.id)||null))}function he(l,e=2e3){Ee.value=l,xe.value=!0,setTimeout(()=>{xe.value=!1},e)}function Ne(l,e){return g(this,null,function*(){var o,i;if(V.value.length!==0)try{const r=V.value.map(a=>({id:a.id,menu_id:l,sub_menu_id:e}));for(const a of r){const k=V.value.find(R=>R.id===a.id);yield je(a.id,ke(be({},k),{menu_id:a.menu_id,sub_menu_id:a.sub_menu_id}))}const f=V.value.length;he(`已移动 ${f} 个卡片！`),V.value=[],Q.value=!1,yield J()}catch(r){he(`移动失败：${((i=(o=r.response)==null?void 0:o.data)==null?void 0:i.error)||r.message}`)}})}function gt(l,e,o){return g(this,null,function*(){var r,f;const i=l.map((a,k)=>({id:a,order:k,menu_id:e,sub_menu_id:o}));try{yield Ft(i),B.value?yield me():yield J()}catch(a){alert("保存失败："+(((f=(r=a.response)==null?void 0:r.data)==null?void 0:f.error)||a.message)),B.value?yield me():yield J()}})}function ht(l){return g(this,null,function*(){var e,o;if(confirm(`确定要删除「${l.title}」吗？`))try{yield Nt(l.id),alert("删除成功"),B.value?yield me():yield J()}catch(i){alert("删除失败："+(((o=(e=i.response)==null?void 0:e.data)==null?void 0:o.error)||i.message))}})}function ft(l){ve.value=l,x.value={title:l.title||"",url:l.url||"",logo_url:l.logo_url||"",desc:l.desc||""},S.value="",Me.value=!0}function fe(){Me.value=!1,ve.value=null,x.value={title:"",url:"",logo_url:"",desc:""},S.value=""}function bt(){return g(this,null,function*(){var l,e;if(!x.value.title.trim()){S.value="请输入标题";return}if(!x.value.url.trim()){S.value="请输入网址";return}P.value=!0,S.value="";try{yield je(ve.value.id,ke(be({},ve.value),{title:x.value.title,url:x.value.url,logo_url:x.value.logo_url,desc:x.value.desc})),alert("修改成功"),fe(),B.value?yield me():yield J()}catch(o){S.value="修改失败："+(((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.error)||o.message)}finally{P.value=!1}})}return(l,e)=>{var o,i,r,f;return n(),s("div",{class:"home-container",onClick:vt},[t("div",Ht,[q(Kt,{menus:v.value,activeId:(o=U.value)==null?void 0:o.id,activeSubMenuId:(i=y.value)==null?void 0:i.id,onSelect:tt},null,8,["menus","activeId","activeSubMenuId"])]),t("div",Qt,[t("div",Wt,[t("div",Xt,[t("div",{class:"search-engine-dropdown",onClick:e[3]||(e[3]=T(()=>{},["stop"]))},[t("button",{onClick:He,class:"engine-selector",title:"选择搜索引擎"},[D.value.iconUrl?(n(),s("img",{key:0,src:D.value.iconUrl,class:"engine-icon-img",onError:e[0]||(e[0]=a=>a.target.style.display="none")},null,40,Yt)):(n(),s("span",Zt,c(D.value.icon||"🔍"),1)),e[37]||(e[37]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})],-1))]),q(Z,{name:"dropdown"},{default:Y(()=>[F.value?(n(),s("div",{key:0,class:"engine-dropdown-menu",onClick:e[2]||(e[2]=T(()=>{},["stop"]))},[t("div",{class:"engine-menu-header"},[e[38]||(e[38]=t("span",null,"搜索引擎",-1)),t("button",{onClick:Xe,class:"add-engine-icon-btn",title:"添加自定义"}," + ")]),t("div",el,[(n(!0),s(O,null,G(N.value,a=>(n(),s("button",{key:a.name,class:oe(["engine-menu-item",{active:D.value.name===a.name}]),onClick:k=>Qe(a)},[a.iconUrl?(n(),s("img",{key:0,src:a.iconUrl,class:"engine-icon-img",onError:e[1]||(e[1]=k=>k.target.style.display="none")},null,40,ll)):(n(),s("span",al,c(a.icon||"🔍"),1)),t("span",ol,c(a.label),1),a.custom?(n(),s("button",{key:2,onClick:T(k=>Ze(a),["stop"]),class:"delete-engine-btn-small",title:"删除"}," × ",8,sl)):d("",!0)],10,tl))),128))])])):d("",!0)]),_:1})]),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>m.value=a),type:"text",placeholder:D.value.placeholder,class:"search-input",onKeyup:ye(Te,["enter"])},null,40,nl),[[M,m.value]]),m.value?(n(),s("button",{key:0,class:"clear-btn",onClick:We,"aria-label":"清空",title:"clear"},e[39]||(e[39]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):d("",!0),t("button",{onClick:Te,class:"search-btn",title:"search"},e[40]||(e[40]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),L.value.length?(n(),s("div",rl,[(n(!0),s(O,null,G(L.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,ul)],8,il))),128))])):d("",!0),K.value.length?(n(),s("div",dl,[(n(!0),s(O,null,G(K.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告",loading:"lazy"},null,8,vl)],8,cl))),128))])):d("",!0),B.value&&Q.value?(n(),s("div",pl,[t("div",ml,[t("h4",null,"移动到 ("+c(V.value.length)+")",1),t("button",{onClick:pt,class:"cancel-move-btn"},"×")]),t("div",gl,[(n(!0),s(O,null,G(v.value,a=>(n(),s("div",{key:a.id,class:"target-menu-group"},[t("button",{onClick:k=>Ne(a.id,null),class:oe(["target-menu-btn",{active:re.value===a.id&&ie.value===null}])},c(a.name),11,hl),a.subMenus&&a.subMenus.length?(n(),s("div",fl,[(n(!0),s(O,null,G(a.subMenus,k=>(n(),s("button",{key:k.id,onClick:R=>Ne(a.id,k.id),class:oe(["target-submenu-btn",{active:re.value===a.id&&ie.value===k.id}])}," ⤷ "+c(k.name),11,bl))),128))])):d("",!0)]))),128))])])):d("",!0),q(St(h),{cards:et.value,editMode:B.value,selectedCards:V.value,categoryId:(r=U.value)==null?void 0:r.id,subCategoryId:(f=y.value)==null?void 0:f.id,onCardsReordered:gt,onEditCard:ft,onDeleteCard:ht,onToggleCardSelection:mt,onClick:e[5]||(e[5]=T(()=>{},["stop"]))},null,8,["cards","editMode","selectedCards","categoryId","subCategoryId"]),t("div",{class:"fab-container",onClick:e[6]||(e[6]=T(()=>{},["stop"]))},[q(Z,{name:"fab-item"},{default:Y(()=>[p(t("button",{onClick:dt,class:"change-bg-btn",title:"切换背景",disabled:ue.value},[ue.value?(n(),s("svg",wl,e[42]||(e[42]=[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"},null,-1)]))):(n(),s("svg",yl,e[41]||(e[41]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),t("path",{d:"M21 15l-5-5L5 21"},null,-1)])))],8,kl),[[we,z.value]])]),_:1}),q(Z,{name:"fab-item"},{default:Y(()=>[U.value?p((n(),s("button",{key:0,onClick:st,class:"batch-add-btn",title:"批量添加网站"},e[43]||(e[43]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)]),512)),[[we,z.value]]):d("",!0)]),_:1}),q(Z,{name:"fab-item"},{default:Y(()=>[B.value?p((n(),s("button",{key:0,onClick:ze,class:"exit-edit-btn",title:"退出编辑模式"},e[44]||(e[44]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),512)),[[we,z.value]]):d("",!0)]),_:1}),q(Z,{name:"fab-item"},{default:Y(()=>[B.value?d("",!0):p((n(),s("button",{key:0,onClick:ct,class:"edit-mode-btn",title:"编辑模式"},e[45]||(e[45]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),512)),[[we,z.value]])]),_:1}),t("button",{onClick:Ke,class:"fab-toggle-btn",title:"更多功能"},[q(Z,{name:"fab-icon",mode:"out-in"},{default:Y(()=>[z.value?(n(),s("svg",Cl,e[47]||(e[47]=[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),t("line",{x1:"6",y1:"6",x2:"18",y2:"12"},null,-1)]))):(n(),s("svg",_l,e[46]||(e[46]=[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1)])))]),_:1})])]),Ce.value?(n(),s("div",{key:3,class:"modal-overlay",onClick:ge},[t("div",{class:"modal-content batch-modal",onClick:e[12]||(e[12]=T(()=>{},["stop"]))},[t("div",xl,[t("h3",null,c($.value===1?"验证密码":$.value===2?"输入网址":"预览并选择"),1),t("button",{onClick:ge,class:"close-btn"},e[48]||(e[48]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ml,[$.value===1?(n(),s("div",Ul,[e[50]||(e[50]=t("p",{class:"batch-tip"},"请输入管理员密码以继续：",-1)),p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>A.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ye(Ae,["enter"])},null,544),[[M,A.value]]),t("div",Sl,[t("label",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>te.value=a)},null,512),[[Se,te.value]]),e[49]||(e[49]=t("span",null,"记住密码（2小时）",-1))])]),w.value?(n(),s("p",Il,c(w.value),1)):d("",!0),t("div",El,[t("button",{onClick:ge,class:"btn btn-cancel"},"取消"),t("button",{onClick:Ae,class:"btn btn-primary",disabled:E.value},c(E.value?"验证中...":"确认"),9,Ll)])])):d("",!0),$.value===2?(n(),s("div",$l,[e[51]||(e[51]=t("p",{class:"batch-tip"},"请输入需要添加的网址，每行一个：",-1)),p(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=a=>se.value=a),placeholder:`例如：
https://github.com
https://google.com
https://stackoverflow.com`,class:"batch-textarea",rows:"10"},null,512),[[M,se.value]]),w.value?(n(),s("p",Bl,c(w.value),1)):d("",!0),t("div",Vl,[t("button",{onClick:rt,class:"btn btn-cancel"},"上一步"),t("button",{onClick:it,class:"btn btn-primary",disabled:E.value||!se.value.trim()},c(E.value?"解析中...":"下一步"),9,Rl)])])):d("",!0),$.value===3?(n(),s("div",Dl,[e[55]||(e[55]=t("p",{class:"batch-tip"},"请选择需要添加的网站：",-1)),t("div",Tl,[(n(!0),s(O,null,G(ne.value,(a,k)=>(n(),s("div",{key:k,class:"batch-preview-item"},[p(t("input",{type:"checkbox","onUpdate:modelValue":R=>a.selected=R,id:`card-${k}`},null,8,Al),[[Se,a.selected]]),t("div",Pl,[t("img",{src:a.logo,alt:a.title,class:"batch-card-logo",onError:e[10]||(e[10]=R=>R.target.src="/default-favicon.png")},null,40,zl),t("div",Nl,[t("div",Fl,[e[52]||(e[52]=t("label",null,"标题：",-1)),p(t("input",{type:"text","onUpdate:modelValue":R=>a.title=R,class:"batch-edit-input"},null,8,ql),[[M,a.title]])]),t("div",Ol,[e[53]||(e[53]=t("label",null,"Logo：",-1)),p(t("input",{type:"text","onUpdate:modelValue":R=>a.logo=R,class:"batch-edit-input"},null,8,Gl),[[M,a.logo]])]),t("div",jl,[e[54]||(e[54]=t("label",null,"描述：",-1)),p(t("textarea",{"onUpdate:modelValue":R=>a.description=R,class:"batch-edit-textarea",rows:"2"},null,8,Jl),[[M,a.description]])]),t("p",Kl,c(a.url),1),a.success?d("",!0):(n(),s("p",Hl,"⚠️ "+c(a.error),1))])])]))),128))]),w.value?(n(),s("p",Ql,c(w.value),1)):d("",!0),t("div",Wl,[t("button",{onClick:e[11]||(e[11]=a=>$.value=2),class:"btn btn-cancel"},"上一步"),t("button",{onClick:ut,class:"btn btn-primary",disabled:E.value||$e.value===0},c(E.value?"添加中...":`添加 (${$e.value})`),9,Xl)])])):d("",!0)])])])):d("",!0),t("footer",Yl,[t("div",Zl,[t("button",{onClick:e[13]||(e[13]=a=>de.value=!0),class:"friend-link-btn"},e[56]||(e[56]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),Ge(" 友情链接 ")])),e[57]||(e[57]=t("p",{class:"copyright"},[Ge("Copyright © 2025 Con-Nav-Item | "),t("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")],-1))])]),le.value?(n(),s("div",{key:4,class:"modal-overlay",onClick:e[19]||(e[19]=a=>le.value=!1)},[t("div",{class:"modal-content",onClick:e[18]||(e[18]=T(()=>{},["stop"]))},[t("div",ea,[e[59]||(e[59]=t("h3",null,"进入编辑模式",-1)),t("button",{onClick:e[14]||(e[14]=a=>le.value=!1),class:"close-btn"},e[58]||(e[58]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",ta,[e[61]||(e[61]=t("p",{style:{"margin-bottom":"15px"}},"请输入管理员密码以继续：",-1)),p(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>H.value=a),type:"password",placeholder:"请输入管理员密码",class:"batch-input",onKeyup:ye(Pe,["enter"]),style:{width:"100%"}},null,544),[[M,H.value]]),t("div",la,[t("label",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=a=>ce.value=a)},null,512),[[Se,ce.value]]),e[60]||(e[60]=t("span",null,"记住密码（2小时）",-1))])]),S.value?(n(),s("p",aa,c(S.value),1)):d("",!0),t("div",oa,[t("button",{onClick:e[17]||(e[17]=a=>le.value=!1),class:"btn btn-cancel"},"取消"),t("button",{onClick:Pe,class:"btn btn-primary",disabled:P.value},c(P.value?"验证中...":"确认"),9,sa)])])])])):d("",!0),de.value?(n(),s("div",{key:5,class:"modal-overlay",onClick:e[22]||(e[22]=a=>de.value=!1)},[t("div",{class:"modal-content",onClick:e[21]||(e[21]=T(()=>{},["stop"]))},[t("div",na,[e[63]||(e[63]=t("h3",null,"友情链接",-1)),t("button",{onClick:e[20]||(e[20]=a=>de.value=!1),class:"close-btn"},e[62]||(e[62]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",ra,[t("div",ia,[(n(!0),s(O,null,G(Ie.value,a=>(n(),s("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",da,[a.logo?(n(),s("img",{key:0,src:a.logo,alt:a.title,loading:"lazy",onError:ot},null,40,ca)):(n(),s("div",va,c(a.title.charAt(0)),1))]),t("div",pa,[t("h4",null,c(a.title),1)])],8,ua))),128))])])])])):d("",!0),Me.value?(n(),s("div",{key:6,class:"modal-overlay",onClick:fe},[t("div",{class:"modal-content",onClick:e[27]||(e[27]=T(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[65]||(e[65]=t("h3",null,"编辑卡片",-1)),t("button",{onClick:fe,class:"close-btn"},e[64]||(e[64]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",ma,[t("div",ga,[t("div",ha,[e[66]||(e[66]=t("label",null,"标题",-1)),p(t("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>x.value.title=a),type:"text",placeholder:"请输入标题",class:"batch-input"},null,512),[[M,x.value.title]])]),t("div",fa,[e[67]||(e[67]=t("label",null,"网址",-1)),p(t("input",{"onUpdate:modelValue":e[24]||(e[24]=a=>x.value.url=a),type:"url",placeholder:"请输入网址",class:"batch-input"},null,512),[[M,x.value.url]])]),t("div",ba,[e[68]||(e[68]=t("label",null,"Logo 链接",-1)),p(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>x.value.logo_url=a),type:"url",placeholder:"请输入 Logo 图片链接",class:"batch-input"},null,512),[[M,x.value.logo_url]])]),t("div",ka,[e[69]||(e[69]=t("label",null,"描述",-1)),p(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=a=>x.value.desc=a),placeholder:"请输入描述",class:"batch-textarea",rows:"4"},null,512),[[M,x.value.desc]])]),S.value?(n(),s("p",ya,c(S.value),1)):d("",!0),t("div",wa,[t("button",{onClick:fe,class:"btn btn-cancel"},"取消"),t("button",{onClick:bt,class:"btn btn-primary",disabled:P.value},c(P.value?"保存中...":"保存"),9,_a)])])])])])):d("",!0),pe.value?(n(),s("div",{key:7,class:"modal-overlay",onClick:e[36]||(e[36]=a=>pe.value=!1)},[t("div",{class:"modal-content",onClick:e[35]||(e[35]=T(()=>{},["stop"]))},[t("div",Ca,[t("h3",null,c(W.value===1?"添加搜索引擎 - 输入URL":"添加搜索引擎 - 编辑信息"),1),t("button",{onClick:Ue,class:"close-btn"},e[70]||(e[70]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",xa,[W.value===1?(n(),s("div",Ma,[t("div",Ua,[e[71]||(e[71]=t("label",null,"搜索引擎URL",-1)),p(t("input",{"onUpdate:modelValue":e[28]||(e[28]=a=>X.value=a),type:"url",placeholder:"例如：https://www.google.com",class:"batch-input",onKeyup:ye(Re,["enter"])},null,544),[[M,X.value]]),e[72]||(e[72]=t("p",{style:{"font-size":"12px",color:"#666","margin-top":"5px"}},"输入搜索引擎的主页地址，系统会自动解析",-1))]),I.value?(n(),s("p",Sa,c(I.value),1)):d("",!0),t("div",Ia,[t("button",{onClick:Ue,class:"btn btn-cancel"},"取消"),t("button",{onClick:Re,class:"btn btn-primary",disabled:j.value||!X.value},c(j.value?"解析中...":"下一步"),9,Ea)])])):d("",!0),W.value===2?(n(),s("div",La,[t("div",$a,[e[73]||(e[73]=t("label",null,"图标",-1)),t("div",Ba,[b.value.iconUrl?(n(),s("img",{key:0,src:b.value.iconUrl,style:{width:"32px",height:"32px","object-fit":"contain","border-radius":"4px"},onError:e[29]||(e[29]=a=>a.target.style.display="none")},null,40,Va)):d("",!0),p(t("input",{"onUpdate:modelValue":e[30]||(e[30]=a=>b.value.iconUrl=a),type:"url",placeholder:"图标URL",class:"batch-input",style:{flex:"1"}},null,512),[[M,b.value.iconUrl]])])]),t("div",Ra,[e[74]||(e[74]=t("label",null,"名称",-1)),p(t("input",{"onUpdate:modelValue":e[31]||(e[31]=a=>b.value.name=a),type:"text",placeholder:"例如：Google",class:"batch-input"},null,512),[[M,b.value.name]])]),t("div",Da,[e[75]||(e[75]=t("label",null,"搜索URL模板",-1)),p(t("input",{"onUpdate:modelValue":e[32]||(e[32]=a=>b.value.searchUrl=a),type:"text",placeholder:"例如：https://www.google.com/search?q={searchTerms}",class:"batch-input"},null,512),[[M,b.value.searchUrl]]),e[76]||(e[76]=t("p",{style:{"font-size":"12px",color:"#666","margin-top":"5px"}},"使用 {searchTerms} 作为搜索关键词占位符",-1))]),t("div",Ta,[e[77]||(e[77]=t("label",null,"关键词（可选）",-1)),p(t("input",{"onUpdate:modelValue":e[33]||(e[33]=a=>b.value.keyword=a),type:"text",placeholder:"例如：google",class:"batch-input"},null,512),[[M,b.value.keyword]]),e[78]||(e[78]=t("p",{style:{"font-size":"12px",color:"#666","margin-top":"5px"}},"用于快捷键搜索，例如输入 'g 关键词' 使用Google搜索",-1))]),I.value?(n(),s("p",Aa,c(I.value),1)):d("",!0),t("div",Pa,[t("button",{onClick:e[34]||(e[34]=a=>W.value=1),class:"btn btn-cancel"},"上一步"),t("button",{onClick:Ye,class:"btn btn-primary",disabled:j.value},c(j.value?"添加中...":"添加"),9,za)])])):d("",!0)])])])):d("",!0),q(Z,{name:"toast"},{default:Y(()=>[xe.value?(n(),s("div",Na,c(Ee.value),1)):d("",!0)]),_:1})])}}},Ja=Je(Fa,[["__scopeId","data-v-c1f72822"]]);export{Ja as default};
