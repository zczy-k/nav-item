var de=Object.defineProperty,ue=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Q=(A,o,c)=>o in A?de(A,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):A[o]=c,N=(A,o)=>{for(var c in o||(o={}))ce.call(o,c)&&Q(A,c,o[c]);if(G)for(var c of G(o))ve.call(o,c)&&Q(A,c,o[c]);return A},E=(A,o)=>ue(A,re(o));var $=(A,o,c)=>new Promise((m,w)=>{var y=d=>{try{M(c.next(d))}catch(f){w(f)}},a=d=>{try{M(c.throw(d))}catch(f){w(f)}},M=d=>d.done?m(d.value):Promise.resolve(d.value).then(y,a);M((c=c.apply(A,o)).next())});import{_ as T,r as g,g as H,c as h,o as r,b as e,w as k,v as V,q as D,F as z,a as I,n as L,t as x,e as ee,y as X,z as q,j as te,d as S,A as O,x as Y,B as R,l as Z,C as pe,D as P}from"./index-CoAiku38.js";import{g as se,n as be,o as me,q as he,r as we,s as ge,t as fe,v as ke,u as _e,k as $e,d as ye,a as Ce,w as Me,x as Ve,y as Be,b as xe,z as Ue,A as Ae,B as De,C as Se,D as Le,l as We}from"./api-DJSardu8.js";const ze={class:"menu-manage"},Ie={class:"menu-header"},Te={class:"menu-add"},He={class:"menu-content"},Fe={class:"menu-list"},Pe={class:"main-menu"},je={class:"menu-info"},Ne=["onUpdate:modelValue","onBlur"],Oe={class:"menu-order"},Ee=["onUpdate:modelValue","onBlur"],qe={class:"menu-actions"},Re=["onClick","title"],Ke=["onClick"],Je={class:"sub-menu-header"},Ge={class:"sub-menu-title"},Qe=["onClick"],Xe={key:0,class:"sub-menu-list"},Ye={class:"sub-menu-info"},Ze=["onUpdate:modelValue","onBlur"],et={class:"sub-menu-order"},tt=["onUpdate:modelValue","onBlur"],st={class:"sub-menu-actions"},lt=["onClick"],nt={key:1,class:"empty-sub-menu"},ot=["onClick"],at={__name:"MenuManage",setup(A){const o=g([]),c=g("");H(m);function m(){return $(this,null,function*(){const t=yield se();o.value=t.data.map(s=>E(N({},s),{showSubMenu:!1}))})}function w(){return $(this,null,function*(){if(!c.value.trim())return;const t=o.value.length?Math.max(...o.value.map(s=>s.order||0)):0;yield be({name:c.value.trim(),order:t+1}),c.value="",m()})}function y(t){return $(this,null,function*(){yield me(t.id,{name:t.name,order:t.order}),m()})}function a(t){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ã€‚")&&(yield he(t),m())})}function M(t){return $(this,null,function*(){var v;const s=o.value.find(_=>_.id===t),n=prompt("è¯·è¾“å…¥å­èœå•åç§°ï¼š");if(!(n!=null&&n.trim()))return;const W=(v=s.subMenus)!=null&&v.length?Math.max(...s.subMenus.map(_=>_.order||0)):0;yield we(t,{name:n.trim(),order:W+1}),m()})}function d(t){return $(this,null,function*(){yield ge(t.id,{name:t.name,order:t.order}),m()})}function f(t){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å¡ç‰‡ã€‚")&&(yield fe(t),m())})}function i(t){const s=o.value.find(n=>n.id===t);s&&(s.showSubMenu=!s.showSubMenu)}return(t,s)=>(r(),h("div",ze,[e("div",Ie,[s[2]||(s[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ä¸»èœå•å’Œå­èœå•")],-1)),e("div",Te,[k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>c.value=n),placeholder:"è¯·è¾“å…¥ä¸»èœå•åç§°",class:"input"},null,512),[[V,c.value]]),e("button",{class:"btn btn-primary",onClick:w},s[1]||(s[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),D(" æ·»åŠ ä¸»èœå• ")]))])]),e("div",He,[e("div",Fe,[(r(!0),h(z,null,I(o.value,n=>{var W;return r(),h("div",{key:n.id,class:"menu-item"},[e("div",Pe,[e("div",je,[s[4]||(s[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),k(e("input",{"onUpdate:modelValue":v=>n.name=v,onBlur:v=>y(n),class:"menu-name-input"},null,40,Ne),[[V,n.name]]),e("div",Oe,[s[3]||(s[3]=e("span",{class:"order-label"},"æ’åº",-1)),k(e("input",{"onUpdate:modelValue":v=>n.order=v,type:"number",onBlur:v=>y(n),class:"order-input"},null,40,Ee),[[V,n.order,void 0,{number:!0}]])])]),e("div",qe,[e("button",{class:"btn btn-icon expand-btn",onClick:v=>i(n.id),title:n.showSubMenu?"æ”¶èµ·å­èœå•":"å±•å¼€å­èœå•"},s[5]||(s[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)]),8,Re),e("button",{class:"btn btn-danger btn-icon",onClick:v=>a(n.id),title:"åˆ é™¤ä¸»èœå•"},s[6]||(s[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Ke)])]),e("div",{class:L(["sub-menu-section",{expanded:n.showSubMenu}])},[e("div",Je,[e("div",Ge,[s[7]||(s[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),D(" å­èœå• ("+x(((W=n.subMenus)==null?void 0:W.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:v=>M(n.id)},s[8]||(s[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),D(" æ·»åŠ å­èœå• ")]),8,Qe)]),n.subMenus&&n.subMenus.length>0?(r(),h("div",Xe,[(r(!0),h(z,null,I(n.subMenus,v=>(r(),h("div",{key:v.id,class:"sub-menu-item"},[e("div",Ye,[s[9]||(s[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),k(e("input",{"onUpdate:modelValue":_=>v.name=_,onBlur:_=>d(v),class:"sub-menu-name-input"},null,40,Ze),[[V,v.name]]),e("div",et,[k(e("input",{"onUpdate:modelValue":_=>v.order=_,type:"number",onBlur:_=>d(v),class:"order-input"},null,40,tt),[[V,v.order,void 0,{number:!0}]])])]),e("div",st,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:_=>f(v.id),title:"åˆ é™¤å­èœå•"},s[10]||(s[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,lt)])]))),128))])):(r(),h("div",nt,[s[11]||(s[11]=e("p",null,"æš‚æ— å­èœå•",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:v=>M(n.id)},"æ·»åŠ ç¬¬ä¸€ä¸ªå­èœå•",8,ot)]))],2)])}),128))])])]))}},it=T(at,[["__scopeId","data-v-5964fa59"]]),dt={class:"card-manage"},ut={class:"card-header"},rt={class:"card-add"},ct=["value"],vt=["value"],pt={class:"card-card"},bt={class:"card-table"},mt=["onUpdate:modelValue","onBlur"],ht=["onUpdate:modelValue","onBlur"],wt=["onUpdate:modelValue","onBlur"],gt=["onUpdate:modelValue","onBlur"],ft=["onUpdate:modelValue","onBlur"],kt=["onClick"],_t={__name:"CardManage",setup(A){const o=g([]),c=g([]),m=g(),w=g(""),y=g(""),a=g(""),M=g(""),d=ee(()=>{if(!m.value)return[];const v=o.value.find(_=>_.id===m.value);return(v==null?void 0:v.subMenus)||[]});H(()=>$(null,null,function*(){const v=yield se();o.value=v.data,o.value.length&&(m.value=o.value[0].id,w.value="")})),X(m,()=>{w.value="",t()}),X(w,t);function f(){w.value=""}function i(){t()}function t(){return $(this,null,function*(){if(!m.value)return;const v=yield ye(m.value,w.value||null);c.value=v.data})}function s(){return $(this,null,function*(){!y.value||!a.value||(yield ke({menu_id:m.value,sub_menu_id:w.value||null,title:y.value,url:a.value,logo_url:M.value}),y.value="",a.value="",M.value="",t())})}function n(v){return $(this,null,function*(){yield _e(v.id,{menu_id:m.value,sub_menu_id:w.value||null,title:v.title,url:v.url,logo_url:v.logo_url,desc:v.desc,order:v.order}),t()})}function W(v){return $(this,null,function*(){yield $e(v),t()})}return(v,_)=>(r(),h("div",dt,[e("div",ut,[_[7]||(_[7]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",rt,[k(e("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>m.value=p),class:"input narrow",onChange:f},[(r(!0),h(z,null,I(o.value,p=>(r(),h("option",{value:p.id,key:p.id},x(p.name),9,ct))),128))],544),[[q,m.value]]),k(e("select",{"onUpdate:modelValue":_[1]||(_[1]=p=>w.value=p),class:"input narrow",onChange:i},[_[5]||(_[5]=e("option",{value:""},"ä¸»èœå•",-1)),(r(!0),h(z,null,I(d.value,p=>(r(),h("option",{value:p.id,key:p.id},x(p.name),9,vt))),128))],544),[[q,w.value]]),k(e("input",{"onUpdate:modelValue":_[2]||(_[2]=p=>y.value=p),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[V,y.value]]),k(e("input",{"onUpdate:modelValue":_[3]||(_[3]=p=>a.value=p),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[V,a.value]]),k(e("input",{"onUpdate:modelValue":_[4]||(_[4]=p=>M.value=p),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[V,M.value]]),e("button",{class:"btn",onClick:s},_[6]||(_[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),D(" æ·»åŠ å¡ç‰‡ ")]))])]),e("div",pt,[e("table",bt,[_[9]||(_[9]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),h(z,null,I(c.value,p=>(r(),h("tr",{key:p.id},[e("td",null,[k(e("input",{"onUpdate:modelValue":B=>p.title=B,onBlur:B=>n(p),class:"table-input"},null,40,mt),[[V,p.title]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":B=>p.url=B,onBlur:B=>n(p),class:"table-input"},null,40,ht),[[V,p.url]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":B=>p.logo_url=B,onBlur:B=>n(p),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,wt),[[V,p.logo_url]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":B=>p.desc=B,onBlur:B=>n(p),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,gt),[[V,p.desc]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":B=>p.order=B,type:"number",onBlur:B=>n(p),class:"table-input order-input"},null,40,ft),[[V,p.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:B=>W(p.id),title:"åˆ é™¤"},_[8]||(_[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,kt)])]))),128))])])])]))}},$t=T(_t,[["__scopeId","data-v-2003d901"]]),yt={class:"ad-manage"},Ct={class:"ad-header"},Mt={class:"ad-section"},Vt={class:"ad-card"},Bt={class:"ad-table"},xt=["onUpdate:modelValue","onBlur"],Ut=["onUpdate:modelValue","onBlur"],At=["onClick"],Dt={class:"ad-section"},St={class:"ad-card"},Lt={class:"ad-table"},Wt=["onUpdate:modelValue","onBlur"],zt=["onUpdate:modelValue","onBlur"],It=["onClick"],Tt={__name:"AdManage",setup(A){const o=g([]),c=g([]),m=g(""),w=g(""),y=g("left");H(a);function a(){return $(this,null,function*(){const i=yield Ce();o.value=i.data.filter(t=>t.position==="left"),c.value=i.data.filter(t=>t.position==="right")})}function M(){return $(this,null,function*(){!m.value||!w.value||(yield Me({position:y.value,img:m.value,url:w.value}),m.value="",w.value="",y.value="left",a())})}function d(i){return $(this,null,function*(){yield Ve(i.id,{img:i.img,url:i.url}),a()})}function f(i){return $(this,null,function*(){yield Be(i),a()})}return(i,t)=>(r(),h("div",yt,[e("div",Ct,[e("form",{class:"ad-add-row",onSubmit:te(M,["prevent"])},[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[V,m.value]]),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>w.value=s),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[V,w.value]]),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"input select-input"},t[3]||(t[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)]),512),[[q,y.value]]),t[4]||(t[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",Mt,[t[6]||(t[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Vt,[e("table",Bt,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),h(z,null,I(o.value,s=>(r(),h("tr",{key:s.id},[e("td",null,[k(e("input",{"onUpdate:modelValue":n=>s.img=n,onBlur:n=>d(s),class:"input"},null,40,xt),[[V,s.img]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":n=>s.url=n,onBlur:n=>d(s),class:"input"},null,40,Ut),[[V,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:n=>f(s.id)},"åˆ é™¤å¹¿å‘Š",8,At)])]))),128))])])])]),e("div",Dt,[t[8]||(t[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",St,[e("table",Lt,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),h(z,null,I(c.value,s=>(r(),h("tr",{key:s.id},[e("td",null,[k(e("input",{"onUpdate:modelValue":n=>s.img=n,onBlur:n=>d(s),class:"input"},null,40,Wt),[[V,s.img]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":n=>s.url=n,onBlur:n=>d(s),class:"input"},null,40,zt),[[V,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:n=>f(s.id)},"åˆ é™¤å¹¿å‘Š",8,It)])]))),128))])])])])]))}},Ht=T(Tt,[["__scopeId","data-v-780b5e23"]]),Ft={class:"friend-manage"},Pt={class:"friend-add"},jt={class:"friend-card"},Nt={class:"friend-table"},Ot=["onUpdate:modelValue","onBlur"],Et=["onUpdate:modelValue","onBlur"],qt=["onUpdate:modelValue","onBlur"],Rt=["onClick"],Kt={__name:"FriendLinkManage",setup(A){const o=g([]),c=g(""),m=g(""),w=g("");H(y);function y(){return $(this,null,function*(){const f=yield xe();o.value=f.data})}function a(){return $(this,null,function*(){!c.value||!m.value||(yield Ue({title:c.value,url:m.value,logo:w.value}),c.value="",m.value="",w.value="",y())})}function M(f){return $(this,null,function*(){yield Ae(f.id,{title:f.title,url:f.url,logo:f.logo}),y()})}function d(f){return $(this,null,function*(){yield De(f),y()})}return(f,i)=>(r(),h("div",Ft,[i[4]||(i[4]=e("div",{class:"friend-header"},null,-1)),e("div",Pt,[k(e("input",{"onUpdate:modelValue":i[0]||(i[0]=t=>c.value=t),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[V,c.value]]),k(e("input",{"onUpdate:modelValue":i[1]||(i[1]=t=>m.value=t),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[V,m.value]]),k(e("input",{"onUpdate:modelValue":i[2]||(i[2]=t=>w.value=t),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[V,w.value]]),e("button",{class:"btn",onClick:a},"æ·»åŠ å‹é“¾")]),e("div",jt,[e("table",Nt,[i[3]||(i[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),h(z,null,I(o.value,t=>(r(),h("tr",{key:t.id},[e("td",null,[k(e("input",{"onUpdate:modelValue":s=>t.title=s,onBlur:s=>M(t),class:"input"},null,40,Ot),[[V,t.title]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":s=>t.url=s,onBlur:s=>M(t),class:"input"},null,40,Et),[[V,t.url]])]),e("td",null,[k(e("input",{"onUpdate:modelValue":s=>t.logo=s,onBlur:s=>M(t),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,qt),[[V,t.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:s=>d(t.id)},"åˆ é™¤",8,Rt)])]))),128))])])])]))}},Jt=T(Kt,[["__scopeId","data-v-f280329a"]]),Gt={class:"user-manage"},Qt={class:"user-card"},Xt={class:"password-section"},Yt={class:"password-form"},Zt={class:"form-group"},es={class:"form-group"},ts={class:"form-group"},ss={class:"form-actions"},ls=["disabled"],ns={__name:"UserManage",setup(A){const o=g(""),c=g(""),m=g(""),w=g(!1),y=g(""),a=g("success"),M=g({});H(()=>$(null,null,function*(){try{const i=yield Se();M.value=i.data}catch(i){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",i)}}));function d(){return $(this,null,function*(){var i,t;if(!o.value||!c.value||!m.value){f("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(c.value!==m.value){f("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(c.value.length<6){f("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}w.value=!0,y.value="";try{yield Le(o.value,c.value),f("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),o.value="",c.value="",m.value=""}catch(s){f(((t=(i=s.response)==null?void 0:i.data)==null?void 0:t.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{w.value=!1}})}function f(i,t){y.value=i,a.value=t,i==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&t==="success"?setTimeout(()=>{y.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{y.value=""},3e3)}return(i,t)=>(r(),h("div",Gt,[t[7]||(t[7]=e("div",{class:"user-header"},null,-1)),e("div",Qt,[e("div",Xt,[t[6]||(t[6]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",Yt,[e("div",Zt,[t[3]||(t[3]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[V,o.value]])]),e("div",es,[t[4]||(t[4]=e("label",null,"æ–°å¯†ç ï¼š",-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[V,c.value]])]),e("div",ts,[t[5]||(t[5]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),k(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[V,m.value]])]),e("div",ss,[e("button",{onClick:d,class:"btn",disabled:w.value},x(w.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,ls)]),y.value?(r(),h("p",{key:0,class:L(["message",a.value])},x(y.value),3)):S("",!0)])])])]))}},os=T(ns,[["__scopeId","data-v-85ce40f4"]]),as={class:"backup-manage"},is={class:"tabs"},ds={class:"tab-content"},us={class:"toolbar"},rs=["disabled"],cs=["disabled"],vs=["disabled"],ps={class:"backup-list"},bs={key:0,class:"empty-state"},ms={key:1,class:"backup-grid"},hs={class:"backup-info"},ws={class:"backup-name"},gs={class:"backup-meta"},fs={class:"backup-size"},ks={class:"backup-date"},_s={class:"backup-actions"},$s=["onClick"],ys=["onClick"],Cs=["onClick"],Ms={class:"tab-content"},Vs={class:"toolbar"},Bs=["disabled"],xs=["disabled"],Us={key:1,class:"info-box"},As={class:"backup-list"},Ds={key:0,class:"empty-state"},Ss={key:1,class:"backup-grid"},Ls={class:"backup-info"},Ws={class:"backup-name"},zs={class:"backup-meta"},Is={class:"backup-size"},Ts={class:"backup-date"},Hs={class:"backup-actions"},Fs=["onClick"],Ps=["onClick"],js={key:0,class:"modal-overlay"},Ns={class:"modal-content config-modal"},Os={class:"form-group"},Es={class:"form-group"},qs={class:"form-group"},Rs={class:"modal-actions"},Ks=["disabled"],Js={key:1,class:"modal-overlay"},Gs={class:"modal-content"},Qs={class:"modal-actions"},Xs={__name:"BackupManage",setup(A){const o=g("local"),c=g([]),m=g([]),w=g(!1),y=g(null),a=O({create:!1,list:!1,delete:!1,restore:!1,upload:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1}),M=g({text:"",type:""}),d=O({show:!1,filename:"",action:null,title:"",message:"",confirmClass:""}),f=O({configured:!1,url:"",username:""}),i=O({url:"",username:"",password:""}),t=localStorage.getItem("token");function s(C){return $(this,arguments,function*(u,l={}){return(yield fetch(u,E(N({},l),{headers:N({Authorization:`Bearer ${t}`,"Content-Type":"application/json"},l.headers)}))).json()})}const n=(u,l="success")=>{M.value={text:u,type:l},setTimeout(()=>{M.value={text:"",type:""}},3e3)},W=()=>$(null,null,function*(){a.create=!0;const u=yield s("/api/backup/create",{method:"POST"});u.success?(n("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),yield v()):n(u.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),a.create=!1}),v=()=>$(null,null,function*(){a.list=!0;const u=yield s("/api/backup/list");u.success?c.value=u.backups:n("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.list=!1}),_=u=>{window.open(`/api/backup/download/${u}?token=${t}`,"_blank")},p=(u,l)=>{d.show=!0,d.filename=l,d.action=u,u==="delete"?(d.title="åˆ é™¤",d.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${l} å—ï¼Ÿ`,d.confirmClass="btn-danger"):u==="restore"?(d.title="æ¢å¤",d.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${l} å—ï¼Ÿ`,d.confirmClass="btn-restore"):u==="webdav-restore"?(d.title="ä»WebDAVæ¢å¤",d.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${l} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,d.confirmClass="btn-restore"):u==="webdav-delete"&&(d.title="åˆ é™¤WebDAVå¤‡ä»½",d.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${l} å—ï¼Ÿ`,d.confirmClass="btn-danger")},B=()=>$(null,null,function*(){const{action:u,filename:l}=d;if(d.show=!1,u==="delete"){a.delete=!0;const C=yield s(`/api/backup/delete/${l}`,{method:"DELETE"});C.success?(n("åˆ é™¤æˆåŠŸï¼"),yield v()):n(C.message||"åˆ é™¤å¤±è´¥","error"),a.delete=!1}else if(u==="restore"){a.restore=!0;const C=yield s(`/api/backup/restore/${l}`,{method:"POST"});C.success?(n("æ¢å¤æˆåŠŸï¼"),yield v()):n(C.message||"æ¢å¤å¤±è´¥","error"),a.restore=!1}else u==="webdav-restore"?yield ae(l):u==="webdav-delete"&&(yield ie(l))}),b=u=>u?new Date(u).toLocaleString("zh-CN",{hour12:!1}):"--",U=()=>{y.value.click()},le=u=>$(null,null,function*(){const l=u.target.files[0];if(l){if(!l.name.endsWith(".zip")){n("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),u.target.value="";return}if(l.size>500*1024*1024){n("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),u.target.value="";return}a.upload=!0;try{const C=new FormData;C.append("backup",l);const J=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:C})).json();J.success?(n("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield v()):n(J.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(C){console.error("ä¸Šä¼ å¤±è´¥:",C),n("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{a.upload=!1,u.target.value=""}}}),K=()=>$(null,null,function*(){const u=yield s("/api/backup/webdav/config");u.success&&u.config&&(f.configured=u.config.configured,f.url=u.config.url||"",f.username=u.config.username||"")}),ne=()=>$(null,null,function*(){if(!i.url||!i.username||!i.password){n("è¯·å¡«å†™å®Œæ•´çš„WebDAVé…ç½®ä¿¡æ¯","error");return}a.webdavConfig=!0;const u=yield s("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(i)});u.success?(n("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),w.value=!1,i.url="",i.username="",i.password="",yield K()):n(u.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),a.webdavConfig=!1}),oe=()=>$(null,null,function*(){a.webdavBackup=!0;const u=yield s("/api/backup/webdav/backup",{method:"POST"});u.success?(n("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield j()):n(u.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),a.webdavBackup=!1}),j=()=>$(null,null,function*(){a.webdavList=!0;const u=yield s("/api/backup/webdav/list");u.success?m.value=u.backups||[]:n("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.webdavList=!1}),ae=u=>$(null,null,function*(){a.webdavRestore=!0;const l=yield s("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:u})});l.success?n("ä»WebDAVæ¢å¤æˆåŠŸï¼"):n(l.message||"ä»WebDAVæ¢å¤å¤±è´¥","error"),a.webdavRestore=!1}),ie=u=>$(null,null,function*(){a.webdavDelete=!0;const l=yield s(`/api/backup/webdav/delete/${u}`,{method:"DELETE"});l.success?(n("åˆ é™¤æˆåŠŸï¼"),yield j()):n(l.message||"åˆ é™¤å¤±è´¥","error"),a.webdavDelete=!1});return H(()=>$(null,null,function*(){yield v(),yield K(),f.configured&&(yield j())})),(u,l)=>(r(),h("div",as,[e("div",is,[e("button",{class:L(["tab",{active:o.value==="local"}]),onClick:l[0]||(l[0]=C=>o.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:L(["tab",{active:o.value==="webdav"}]),onClick:l[1]||(l[1]=C=>o.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2)]),k(e("div",ds,[e("div",us,[e("button",{class:"btn btn-primary",onClick:W,disabled:a.create},[l[8]||(l[8]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),D(" "+x(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,rs),e("button",{class:"btn btn-success",onClick:U,disabled:a.upload},[l[9]||(l[9]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),D(" "+x(a.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,cs),e("button",{class:"btn btn-secondary",onClick:v,disabled:a.list},[l[10]||(l[10]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),D(" "+x(a.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,vs),e("input",{ref_key:"fileInput",ref:y,type:"file",accept:".zip",onChange:le,style:{display:"none"}},null,544)]),M.value.text?(r(),h("div",{key:0,class:L(["message",M.value.type])},x(M.value.text),3)):S("",!0),e("div",ps,[c.value.length===0&&!a.list?(r(),h("div",bs,l[11]||(l[11]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)]))):(r(),h("div",ms,[(r(!0),h(z,null,I(c.value,C=>(r(),h("div",{key:C.name,class:"backup-card"},[l[15]||(l[15]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",hs,[e("div",ws,x(C.name),1),e("div",gs,[e("span",fs,x(C.size),1),e("span",ks,x(b(C.created)),1)])]),e("div",_s,[e("button",{class:"btn-icon btn-restore",onClick:F=>p("restore",C.name),title:"æ¢å¤å¤‡ä»½"},l[12]||(l[12]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,$s),e("button",{class:"btn-icon",onClick:F=>_(C.name),title:"ä¸‹è½½å¤‡ä»½"},l[13]||(l[13]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)]),8,ys),e("button",{class:"btn-icon btn-danger",onClick:F=>p("delete",C.name),title:"åˆ é™¤å¤‡ä»½"},l[14]||(l[14]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Cs)])]))),128))]))])],512),[[Y,o.value==="local"]]),k(e("div",Ms,[e("div",Vs,[e("button",{class:"btn btn-primary",onClick:l[2]||(l[2]=C=>w.value=!0)},l[16]||(l[16]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),D(" WebDAVé…ç½® ")])),e("button",{class:"btn btn-primary",onClick:oe,disabled:a.webdavBackup||!f.configured},[l[17]||(l[17]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),D(" "+x(a.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,Bs),e("button",{class:"btn btn-secondary",onClick:j,disabled:a.webdavList||!f.configured},[l[18]||(l[18]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),D(" "+x(a.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,xs)]),M.value.text?(r(),h("div",{key:0,class:L(["message",M.value.type])},x(M.value.text),3)):S("",!0),f.configured?S("",!0):(r(),h("div",Us,l[19]||(l[19]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)]))),e("div",As,[m.value.length===0&&!a.webdavList?(r(),h("div",Ds,l[20]||(l[20]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)]))):(r(),h("div",Ss,[(r(!0),h(z,null,I(m.value,C=>(r(),h("div",{key:C.name,class:"backup-card"},[l[23]||(l[23]=R('<div class="backup-icon" data-v-dcfe8b26><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-dcfe8b26><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-dcfe8b26></path><polyline points="14 2 14 8 20 8" data-v-dcfe8b26></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-dcfe8b26></path></svg></div>',1)),e("div",Ls,[e("div",Ws,x(C.name),1),e("div",zs,[e("span",Is,x(C.size),1),e("span",Ts,x(b(C.created)),1)])]),e("div",Hs,[e("button",{class:"btn-icon btn-restore",onClick:F=>p("webdav-restore",C.name),title:"ä»WebDAVæ¢å¤"},l[21]||(l[21]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,Fs),e("button",{class:"btn-icon btn-danger",onClick:F=>p("webdav-delete",C.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},l[22]||(l[22]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ps)])]))),128))]))])],512),[[Y,o.value==="webdav"]]),w.value?(r(),h("div",js,[e("div",Ns,[l[29]||(l[29]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",Os,[l[24]||(l[24]=e("label",null,[D("WebDAV URL "),e("span",{class:"required"},"*")],-1)),k(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=C=>i.url=C),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[V,i.url]]),l[25]||(l[25]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Es,[l[26]||(l[26]=e("label",null,[D("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),k(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=C=>i.username=C),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[V,i.username]])]),e("div",qs,[l[27]||(l[27]=e("label",null,[D("å¯†ç  "),e("span",{class:"required"},"*")],-1)),k(e("input",{type:"password","onUpdate:modelValue":l[5]||(l[5]=C=>i.password=C),placeholder:"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,512),[[V,i.password]]),l[28]||(l[28]=e("small",null,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç ",-1))]),e("div",Rs,[e("button",{class:"btn btn-secondary",onClick:l[6]||(l[6]=C=>w.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ne,disabled:a.webdavConfig},x(a.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,Ks)])])])):S("",!0),d.show?(r(),h("div",Js,[e("div",Gs,[e("h3",null,"ç¡®è®¤"+x(d.title),1),e("p",null,x(d.message),1),e("div",Qs,[e("button",{class:"btn btn-secondary",onClick:l[7]||(l[7]=C=>d.show=!1)},"å–æ¶ˆ"),e("button",{class:L(["btn",d.confirmClass]),onClick:B},"ç¡®è®¤",2)])])])):S("",!0)]))}},Ys=T(Xs,[["__scopeId","data-v-dcfe8b26"]]),Zs={key:0,class:"login-container"},el={class:"login-card"},tl={class:"login-form"},sl={class:"password-input-wrapper"},ll=["type"],nl={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ol={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},al={class:"login-buttons"},il=["disabled"],dl={key:0,class:"login-error"},ul={key:1,class:"admin-layout"},rl={class:"menu-list"},cl={class:"admin-main"},vl={class:"admin-header"},pl={class:"header-title"},bl={class:"admin-content"},ml={key:0,class:"welcome-page"},hl={class:"welcome-cards"},wl={class:"welcome-card"},gl={class:"welcome-value"},fl={class:"welcome-card"},kl={class:"welcome-value"},_l={__name:"Admin",setup(A){const o=g("welcome"),c=g(""),m=g(""),w=g(!1),y=g(""),a=g(""),M=g(!1),d=g(""),f=g(!1),i=g(!1),t=ee(()=>{switch(o.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});H(()=>{const B=localStorage.getItem("token");w.value=!!B,w.value&&s()});function s(){return $(this,null,function*(){try{const B=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(B.ok){const b=yield B.json();c.value=b.last_login_time||"",m.value=b.last_login_ip||""}}catch(B){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",B)}})}function n(){return $(this,null,function*(){var B,b;if(!y.value||!a.value){d.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}M.value=!0,d.value="";try{const U=yield We(y.value,a.value);U.data.token&&(localStorage.setItem("token",U.data.token),w.value=!0,c.value=U.data.lastLoginTime||"",m.value=U.data.lastLoginIp||"")}catch(U){d.value=((b=(B=U.response)==null?void 0:B.data)==null?void 0:b.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{M.value=!1}})}function W(){localStorage.removeItem("token"),w.value=!1,y.value="",a.value="",d.value=""}function v(){window.open("/","_blank")}function _(){i.value=!i.value}function p(){i.value=!1}return(B,b)=>w.value?(r(),h("div",ul,[e("aside",{class:L(["admin-sider",{open:i.value}]),onClick:te(p,["self"])},[e("div",{class:"logo clickable",onClick:b[3]||(b[3]=U=>{o.value="welcome",p()})},"Admin"),e("ul",rl,[e("li",{class:L({active:o.value==="menu"}),onClick:b[4]||(b[4]=U=>{o.value="menu",p()})},"æ ç›®ç®¡ç†",2),e("li",{class:L({active:o.value==="card"}),onClick:b[5]||(b[5]=U=>{o.value="card",p()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:L({active:o.value==="ad"}),onClick:b[6]||(b[6]=U=>{o.value="ad",p()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:L({active:o.value==="friend"}),onClick:b[7]||(b[7]=U=>{o.value="friend",p()})},"å‹é“¾ç®¡ç†",2),e("li",{class:L({active:o.value==="user"}),onClick:b[8]||(b[8]=U=>{o.value="user",p()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:L({active:o.value==="backup"}),onClick:b[9]||(b[9]=U=>{o.value="backup",p()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",cl,[e("div",vl,[e("button",{class:"menu-toggle",onClick:_}," â˜° "),e("div",pl,x(t.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:v,title:"è¿›å…¥ä¸»é¡µ"},b[14]||(b[14]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("button",{class:"btn logout-btn",onClick:W},"é€€å‡ºç™»å½•")])]),e("div",bl,[o.value==="welcome"?(r(),h("div",ml,[b[17]||(b[17]=e("h2",{class:"welcome-title"},"æ¬¢è¿æ‚¨è¿›å…¥ Con-Nav-Item åå°ç®¡ç†ç³»ç»Ÿ",-1)),e("div",hl,[e("div",wl,[b[15]||(b[15]=R('<div class="welcome-icon time-icon" data-v-3d6ed9cb><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-3d6ed9cb><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-3d6ed9cb></path></svg></div><div class="welcome-label" data-v-3d6ed9cb>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",gl,x(c.value||"--"),1)]),e("div",fl,[b[16]||(b[16]=R('<div class="welcome-icon ip-icon" data-v-3d6ed9cb><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-3d6ed9cb><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-3d6ed9cb></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-3d6ed9cb></circle></svg></div><div class="welcome-label" data-v-3d6ed9cb>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",kl,x(m.value||"--"),1)])])])):S("",!0),o.value==="menu"?(r(),P(it,{key:1})):S("",!0),o.value==="card"?(r(),P($t,{key:2})):S("",!0),o.value==="ad"?(r(),P(Ht,{key:3})):S("",!0),o.value==="friend"?(r(),P(Jt,{key:4})):S("",!0),o.value==="user"?(r(),P(os,{key:5})):S("",!0),o.value==="backup"?(r(),P(Ys,{key:6})):S("",!0)]),b[18]||(b[18]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[D("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(r(),h("div",Zs,[e("div",el,[b[13]||(b[13]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",tl,[k(e("input",{"onUpdate:modelValue":b[0]||(b[0]=U=>y.value=U),type:"text",placeholder:"ç”¨æˆ·å",class:"login-input",onKeyup:Z(n,["enter"])},null,544),[[V,y.value]]),e("div",sl,[k(e("input",{"onUpdate:modelValue":b[1]||(b[1]=U=>a.value=U),type:f.value?"text":"password",placeholder:"å¯†ç ",class:"login-input password-input",onKeyup:Z(n,["enter"])},null,40,ll),[[pe,a.value]]),e("span",{class:"toggle-password",onClick:b[2]||(b[2]=U=>f.value=!f.value)},[f.value?(r(),h("svg",nl,b[10]||(b[10]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]))):(r(),h("svg",ol,b[11]||(b[11]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])))])]),e("div",al,[e("button",{onClick:v,class:"back-btn"},b[12]||(b[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),D(" è¿”å›é¦–é¡µ ")])),e("button",{onClick:n,class:"login-btn",disabled:M.value},x(M.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,il)]),d.value?(r(),h("p",dl,x(d.value),1)):S("",!0)])])]))}},Ml=T(_l,[["__scopeId","data-v-3d6ed9cb"]]);export{Ml as default};
